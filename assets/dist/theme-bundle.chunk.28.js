(window["webpackJsonpWebpackChiara"] = window["webpackJsonpWebpackChiara"] || []).push([[28],{

/***/ "./node_modules/jstree/dist/jstree.min.js":
/*!************************************************!*\
  !*** ./node_modules/jstree/dist/jstree.min.js ***!
  \************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! jsTree - v3.3.12 - 2021-09-03 - (MIT) */
!function(a){"use strict"; true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(/*! jquery */ "./node_modules/jquery/dist/jquery.min.js")], __WEBPACK_AMD_DEFINE_FACTORY__ = (a),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined}(function(a,b){"use strict";if(!a.jstree){var c=0,d=!1,e=!1,f=!1,g=[],h=a("script:last").attr("src"),i=window.document,j=window.setImmediate,k=window.Promise;!j&&k&&(j=function(a,b){k.resolve(b).then(a)}),a.jstree={version:"3.3.12",defaults:{plugins:[]},plugins:{},path:h&&-1!==h.indexOf("/")?h.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g,root:"#"},a.jstree.create=function(b,d){var e=new a.jstree.core(++c),f=d;return d=a.extend(!0,{},a.jstree.defaults,d),f&&f.plugins&&(d.plugins=f.plugins),a.each(d.plugins,function(a,b){"core"!==a&&(e=e.plugin(b,d[b]))}),a(b).data("jstree",e),e.init(b,d),e},a.jstree.destroy=function(){a(".jstree:jstree").jstree("destroy"),a(i).off(".jstree")},a.jstree.core=function(a){this._id=a,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1,ellipsis:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},a.jstree.reference=function(b){var c=null,d=null;if(!b||!b.id||b.tagName&&b.nodeType||(b=b.id),!d||!d.length)try{d=a(b)}catch(e){}if(!d||!d.length)try{d=a("#"+b.replace(a.jstree.idregex,"\\$&"))}catch(e){}return d&&d.length&&(d=d.closest(".jstree")).length&&(d=d.data("jstree"))?c=d:a(".jstree").each(function(){var d=a(this).data("jstree");return d&&d._model.data[b]?(c=d,!1):void 0}),c},a.fn.jstree=function(c){var d="string"==typeof c,e=Array.prototype.slice.call(arguments,1),f=null;return c!==!0||this.length?(this.each(function(){var g=a.jstree.reference(this),h=d&&g?g[c]:null;return f=d&&h?h.apply(g,e):null,g||d||c!==b&&!a.isPlainObject(c)||a.jstree.create(this,c),(g&&!d||c===!0)&&(f=g||!1),null!==f&&f!==b?!1:void 0}),null!==f&&f!==b?f:this):!1},a.expr.pseudos.jstree=a.expr.createPseudo(function(c){return function(c){return a(c).hasClass("jstree")&&a(c).data("jstree")!==b}}),a.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:a.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,ellipsis:!1,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0,loaded_state:!1,restore_focus:!0,compute_elements_positions:!1,keyboard:{"ctrl-space":function(b){b.type="click",a(b.currentTarget).trigger(b)},enter:function(b){b.type="click",a(b.currentTarget).trigger(b)},left:function(b){if(b.preventDefault(),this.is_open(b.currentTarget))this.close_node(b.currentTarget);else{var c=this.get_parent(b.currentTarget);c&&c.id!==a.jstree.root&&this.get_node(c,!0).children(".jstree-anchor").trigger("focus")}},up:function(a){a.preventDefault();var b=this.get_prev_dom(a.currentTarget);b&&b.length&&b.children(".jstree-anchor").trigger("focus")},right:function(b){if(b.preventDefault(),this.is_closed(b.currentTarget))this.open_node(b.currentTarget,function(a){this.get_node(a,!0).children(".jstree-anchor").trigger("focus")});else if(this.is_open(b.currentTarget)){var c=this.get_node(b.currentTarget,!0).children(".jstree-children")[0];c&&a(this._firstChild(c)).children(".jstree-anchor").trigger("focus")}},down:function(a){a.preventDefault();var b=this.get_next_dom(a.currentTarget);b&&b.length&&b.children(".jstree-anchor").trigger("focus")},"*":function(a){this.open_all()},home:function(b){b.preventDefault();var c=this._firstChild(this.get_container_ul()[0]);c&&a(c).children(".jstree-anchor").filter(":visible").trigger("focus")},end:function(a){a.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().trigger("focus")},f2:function(a){a.preventDefault(),this.edit(a.currentTarget)}}},a.jstree.core.prototype={plugin:function(b,c){var d=a.jstree.plugins[b];return d?(this._data[b]={},d.prototype=this,new d(c,this)):this},init:function(b,c){this._model={data:{},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this._model.data[a.jstree.root]={id:a.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this.element=a(b).addClass("jstree jstree-"+this._id),this.settings=c,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='none'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' role='treeitem' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().outerHeight()||24,this._data.core.node=this._create_prototype_node(),this.trigger("loading"),this.load_node(a.jstree.root)},destroy:function(a){if(this.trigger("destroy"),this._wrk)try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(b){}a||this.element.empty(),this.teardown()},_create_prototype_node:function(){var a=i.createElement("LI"),b,c;return a.setAttribute("role","none"),b=i.createElement("I"),b.className="jstree-icon jstree-ocl",b.setAttribute("role","presentation"),a.appendChild(b),b=i.createElement("A"),b.className="jstree-anchor",b.setAttribute("href","#"),b.setAttribute("tabindex","-1"),b.setAttribute("role","treeitem"),c=i.createElement("I"),c.className="jstree-icon jstree-themeicon",c.setAttribute("role","presentation"),b.appendChild(c),a.appendChild(b),b=c=null,a},_kbevent_to_func:function(a){var b={8:"Backspace",9:"Tab",13:"Enter",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock",16:"Shift",17:"Ctrl",18:"Alt",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*",173:"-"},c=[];if(a.ctrlKey&&c.push("ctrl"),a.altKey&&c.push("alt"),a.shiftKey&&c.push("shift"),c.push(b[a.which]||a.which),c=c.sort().join("-").toLowerCase(),"shift-shift"===c||"ctrl-ctrl"===c||"alt-alt"===c)return null;var d=this.settings.core.keyboard,e,f;for(e in d)if(d.hasOwnProperty(e)&&(f=e,"-"!==f&&"+"!==f&&(f=f.replace("--","-MINUS").replace("+-","-MINUS").replace("++","-PLUS").replace("-+","-PLUS"),f=f.split(/-|\+/).sort().join("-").replace("MINUS","-").replace("PLUS","+").toLowerCase()),f===c))return d[e];return null},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var b="",c=null,d=0;this.element.on("dblclick.jstree",function(a){if(a.target.tagName&&"input"===a.target.tagName.toLowerCase())return!0;if(i.selection&&i.selection.empty)i.selection.empty();else if(window.getSelection){var b=window.getSelection();try{b.removeAllRanges(),b.collapse()}catch(c){}}}).on("mousedown.jstree",function(a){a.target===this.element[0]&&(a.preventDefault(),d=+new Date)}.bind(this)).on("mousedown.jstree",".jstree-ocl",function(a){a.preventDefault()}).on("click.jstree",".jstree-ocl",function(a){this.toggle_node(a.target)}.bind(this)).on("dblclick.jstree",".jstree-anchor",function(a){return a.target.tagName&&"input"===a.target.tagName.toLowerCase()?!0:void(this.settings.core.dblclick_toggle&&this.toggle_node(a.target))}.bind(this)).on("click.jstree",".jstree-anchor",function(b){b.preventDefault(),b.currentTarget!==i.activeElement&&a(b.currentTarget).trigger("focus"),this.activate_node(b.currentTarget,b)}.bind(this)).on("keydown.jstree",".jstree-anchor",function(a){if(a.target.tagName&&"input"===a.target.tagName.toLowerCase())return!0;this._data.core.rtl&&(37===a.which?a.which=39:39===a.which&&(a.which=37));var b=this._kbevent_to_func(a);if(b){var c=b.call(this,a);if(c===!1||c===!0)return c}}.bind(this)).on("load_node.jstree",function(b,c){c.status&&(c.node.id!==a.jstree.root||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(function(){if(this.element&&!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var b=[],c,d;for(c=0,d=this._data.core.selected.length;d>c;c++)b=b.concat(this._model.data[this._data.core.selected[c]].parents);for(b=a.vakata.array_unique(b),c=0,d=b.length;d>c;c++)this.open_node(b[c],!1,0)}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}}.bind(this),0))}.bind(this)).on("keypress.jstree",function(d){if(d.target.tagName&&"input"===d.target.tagName.toLowerCase())return!0;c&&clearTimeout(c),c=setTimeout(function(){b=""},500);var e=String.fromCharCode(d.which).toLowerCase(),f=this.element.find(".jstree-anchor").filter(":visible"),g=f.index(i.activeElement)||0,h=!1;if(b+=e,b.length>1){if(f.slice(g).each(function(c,d){return 0===a(d).text().toLowerCase().indexOf(b)?(a(d).trigger("focus"),h=!0,!1):void 0}.bind(this)),h)return;if(f.slice(0,g).each(function(c,d){return 0===a(d).text().toLowerCase().indexOf(b)?(a(d).trigger("focus"),h=!0,!1):void 0}.bind(this)),h)return}if(new RegExp("^"+e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+"+$").test(b)){if(f.slice(g+1).each(function(b,c){return a(c).text().toLowerCase().charAt(0)===e?(a(c).trigger("focus"),h=!0,!1):void 0}.bind(this)),h)return;if(f.slice(0,g+1).each(function(b,c){return a(c).text().toLowerCase().charAt(0)===e?(a(c).trigger("focus"),h=!0,!1):void 0}.bind(this)),h)return}}.bind(this)).on("init.jstree",function(){var a=this.settings.core.themes;this._data.core.themes.dots=a.dots,this._data.core.themes.stripes=a.stripes,this._data.core.themes.icons=a.icons,this._data.core.themes.ellipsis=a.ellipsis,this.set_theme(a.name||"default",a.url),this.set_theme_variant(a.variant)}.bind(this)).on("loading.jstree",function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"](),this[this._data.core.themes.ellipsis?"show_ellipsis":"hide_ellipsis"]()}.bind(this)).on("blur.jstree",".jstree-anchor",function(b){this._data.core.focused=null,a(b.currentTarget).filter(".jstree-hovered").trigger("mouseleave"),this.element.attr("tabindex","0")}.bind(this)).on("focus.jstree",".jstree-anchor",function(b){var c=this.get_node(b.currentTarget);c&&c.id&&(this._data.core.focused=c.id),this.element.find(".jstree-hovered").not(b.currentTarget).trigger("mouseleave"),a(b.currentTarget).trigger("mouseenter"),this.element.attr("tabindex","-1")}.bind(this)).on("focus.jstree",function(){if(+new Date-d>500&&!this._data.core.focused&&this.settings.core.restore_focus){d=0;var a=this.get_node(this.element.attr("aria-activedescendant"),!0);a&&a.find("> .jstree-anchor").trigger("focus")}}.bind(this)).on("mouseenter.jstree",".jstree-anchor",function(a){this.hover_node(a.currentTarget)}.bind(this)).on("mouseleave.jstree",".jstree-anchor",function(a){this.dehover_node(a.currentTarget)}.bind(this))},unbind:function(){this.element.off(".jstree"),a(i).off(".jstree-"+this._id)},trigger:function(a,b){b||(b={}),b.instance=this,this.element.triggerHandler(a.replace(".jstree","")+".jstree",b)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(b){var c=this.settings.core.strings;return a.vakata.is_function(c)?c.call(this,b):c&&c[b]?c[b]:b},_firstChild:function(a){a=a?a.firstChild:null;while(null!==a&&1!==a.nodeType)a=a.nextSibling;return a},_nextSibling:function(a){a=a?a.nextSibling:null;while(null!==a&&1!==a.nodeType)a=a.nextSibling;return a},_previousSibling:function(a){a=a?a.previousSibling:null;while(null!==a&&1!==a.nodeType)a=a.previousSibling;return a},get_node:function(b,c){b&&b.id&&(b=b.id),b instanceof a&&b.length&&b[0].id&&(b=b[0].id);var d;try{if(this._model.data[b])b=this._model.data[b];else if("string"==typeof b&&this._model.data[b.replace(/^#/,"")])b=this._model.data[b.replace(/^#/,"")];else if("string"==typeof b&&(d=a("#"+b.replace(a.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[d.closest(".jstree-node").attr("id")])b=this._model.data[d.closest(".jstree-node").attr("id")];else if((d=this.element.find(b)).length&&this._model.data[d.closest(".jstree-node").attr("id")])b=this._model.data[d.closest(".jstree-node").attr("id")];else{if(!(d=this.element.find(b)).length||!d.hasClass("jstree"))return!1;b=this._model.data[a.jstree.root]}return c&&(b=b.id===a.jstree.root?this.element:a("#"+b.id.replace(a.jstree.idregex,"\\$&"),this.element)),b}catch(e){return!1}},get_path:function(b,c,d){if(b=b.parents?b:this.get_node(b),!b||b.id===a.jstree.root||!b.parents)return!1;var e,f,g=[];for(g.push(d?b.id:b.text),e=0,f=b.parents.length;f>e;e++)g.push(d?b.parents[e]:this.get_text(b.parents[e]));return g=g.reverse().slice(1),c?g.join(c):g},get_next_dom:function(b,c){var d;if(b=this.get_node(b,!0),b[0]===this.element[0]){d=this._firstChild(this.get_container_ul()[0]);while(d&&0===d.offsetHeight)d=this._nextSibling(d);return d?a(d):!1}if(!b||!b.length)return!1;if(c){d=b[0];do d=this._nextSibling(d);while(d&&0===d.offsetHeight);return d?a(d):!1}if(b.hasClass("jstree-open")){d=this._firstChild(b.children(".jstree-children")[0]);while(d&&0===d.offsetHeight)d=this._nextSibling(d);if(null!==d)return a(d)}d=b[0];do d=this._nextSibling(d);while(d&&0===d.offsetHeight);return null!==d?a(d):b.parentsUntil(".jstree",".jstree-node").nextAll(".jstree-node:visible").first()},get_prev_dom:function(b,c){var d;if(b=this.get_node(b,!0),b[0]===this.element[0]){d=this.get_container_ul()[0].lastChild;while(d&&0===d.offsetHeight)d=this._previousSibling(d);return d?a(d):!1}if(!b||!b.length)return!1;if(c){d=b[0];do d=this._previousSibling(d);while(d&&0===d.offsetHeight);return d?a(d):!1}d=b[0];do d=this._previousSibling(d);while(d&&0===d.offsetHeight);if(null!==d){b=a(d);while(b.hasClass("jstree-open"))b=b.children(".jstree-children").first().children(".jstree-node:visible:last");return b}return d=b[0].parentNode.parentNode,d&&d.className&&-1!==d.className.indexOf("jstree-node")?a(d):!1},get_parent:function(b){return b=this.get_node(b),b&&b.id!==a.jstree.root?b.parent:!1},get_children_dom:function(a){return a=this.get_node(a,!0),a[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):a&&a.length?a.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(a){return a=this.get_node(a),a&&(a.state.loaded===!1||a.children.length>0)},is_loaded:function(a){return a=this.get_node(a),a&&a.state.loaded},is_loading:function(a){return a=this.get_node(a),a&&a.state&&a.state.loading},is_open:function(a){return a=this.get_node(a),a&&a.state.opened},is_closed:function(a){return a=this.get_node(a),a&&this.is_parent(a)&&!a.state.opened},is_leaf:function(a){return!this.is_parent(a)},load_node:function(b,c){var d,e,f,g,h;if(a.vakata.is_array(b))return this._load_nodes(b.slice(),c),!0;if(b=this.get_node(b),!b)return c&&c.call(this,b,!1),!1;if(b.state.loaded){for(b.state.loaded=!1,f=0,g=b.parents.length;g>f;f++)this._model.data[b.parents[f]].children_d=a.vakata.array_filter(this._model.data[b.parents[f]].children_d,function(c){return-1===a.inArray(c,b.children_d)});for(d=0,e=b.children_d.length;e>d;d++)this._model.data[b.children_d[d]].state.selected&&(h=!0),delete this._model.data[b.children_d[d]];h&&(this._data.core.selected=a.vakata.array_filter(this._data.core.selected,function(c){return-1===a.inArray(c,b.children_d)})),b.children=[],b.children_d=[],h&&this.trigger("changed",{action:"load_node",node:b,selected:this._data.core.selected})}return b.state.failed=!1,b.state.loading=!0,this.get_node(b,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(b,function(a){b=this._model.data[b.id],b.state.loading=!1,b.state.loaded=a,b.state.failed=!b.state.loaded;var d=this.get_node(b,!0),e=0,f=0,g=this._model.data,h=!1;for(e=0,f=b.children.length;f>e;e++)if(g[b.children[e]]&&!g[b.children[e]].state.hidden){h=!0;break}b.state.loaded&&d&&d.length&&(d.removeClass("jstree-closed jstree-open jstree-leaf"),h?"#"!==b.id&&d.addClass(b.state.opened?"jstree-open":"jstree-closed"):d.addClass("jstree-leaf")),d.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:b,status:a}),c&&c.call(this,b,a)}.bind(this)),!0},_load_nodes:function(a,b,c,d){var e=!0,f=function(){this._load_nodes(a,b,!0)},g=this._model.data,h,i,j=[];for(h=0,i=a.length;i>h;h++)g[a[h]]&&(!g[a[h]].state.loaded&&!g[a[h]].state.failed||!c&&d)&&(this.is_loading(a[h])||this.load_node(a[h],f),e=!1);if(e){for(h=0,i=a.length;i>h;h++)g[a[h]]&&g[a[h]].state.loaded&&j.push(a[h]);b&&!b.done&&(b.call(this,j),b.done=!0)}},load_all:function(b,c){if(b||(b=a.jstree.root),b=this.get_node(b),!b)return!1;var d=[],e=this._model.data,f=e[b.id].children_d,g,h;for(b.state&&!b.state.loaded&&d.push(b.id),g=0,h=f.length;h>g;g++)e[f[g]]&&e[f[g]].state&&!e[f[g]].state.loaded&&d.push(f[g]);d.length?this._load_nodes(d,function(){this.load_all(b,c)}):(c&&c.call(this,b),this.trigger("load_all",{node:b}))},_load_node:function(b,c){var d=this.settings.core.data,e,f=function g(){return 3!==this.nodeType&&8!==this.nodeType};return d?a.vakata.is_function(d)?d.call(this,b,function(d){d===!1?c.call(this,!1):this["string"==typeof d?"_append_html_data":"_append_json_data"](b,"string"==typeof d?a(a.parseHTML(d)).filter(f):d,function(a){c.call(this,a)})}.bind(this)):"object"==typeof d?d.url?(d=a.extend(!0,{},d),a.vakata.is_function(d.url)&&(d.url=d.url.call(this,b)),a.vakata.is_function(d.data)&&(d.data=d.data.call(this,b)),a.ajax(d).done(function(d,e,g){var h=g.getResponseHeader("Content-Type");return h&&-1!==h.indexOf("json")||"object"==typeof d?this._append_json_data(b,d,function(a){c.call(this,a)}):h&&-1!==h.indexOf("html")||"string"==typeof d?this._append_html_data(b,a(a.parseHTML(d)).filter(f),function(a){c.call(this,a)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:b.id,xhr:g})},this.settings.core.error.call(this,this._data.core.last_error),c.call(this,!1))}.bind(this)).fail(function(a){this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:b.id,xhr:a})},c.call(this,!1),this.settings.core.error.call(this,this._data.core.last_error)}.bind(this))):(e=a.vakata.is_array(d)?a.extend(!0,[],d):a.isPlainObject(d)?a.extend(!0,{},d):d,b.id===a.jstree.root?this._append_json_data(b,e,function(a){c.call(this,a)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:b.id})},this.settings.core.error.call(this,this._data.core.last_error),c.call(this,!1))):"string"==typeof d?b.id===a.jstree.root?this._append_html_data(b,a(a.parseHTML(d)).filter(f),function(a){c.call(this,a)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:b.id})},this.settings.core.error.call(this,this._data.core.last_error),c.call(this,!1)):c.call(this,!1):b.id===a.jstree.root?this._append_html_data(b,this._data.core.original_container_html.clone(!0),function(a){c.call(this,a)}):c.call(this,!1)},_node_changed:function(b){b=this.get_node(b),b&&-1===a.inArray(b.id,this._model.changed)&&this._model.changed.push(b.id)},_append_html_data:function(b,c,d){b=this.get_node(b),b.children=[],b.children_d=[];var e=c.is("ul")?c.children():c,f=b.id,g=[],h=[],i=this._model.data,j=i[f],k=this._data.core.selected.length,l,m,n;for(e.each(function(b,c){l=this._parse_model_from_html(a(c),f,j.parents.concat()),l&&(g.push(l),h.push(l),i[l].children_d.length&&(h=h.concat(i[l].children_d)))}.bind(this)),j.children=g,j.children_d=h,m=0,n=j.parents.length;n>m;m++)i[j.parents[m]].children_d=i[j.parents[m]].children_d.concat(h);this.trigger("model",{nodes:h,parent:f}),f!==a.jstree.root?(this._node_changed(f),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==k&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),d.call(this,!0)},_append_json_data:function(b,c,d,e){if(null!==this.element){b=this.get_node(b),b.children=[],b.children_d=[],c.d&&(c=c.d,"string"==typeof c&&(c=JSON.parse(c))),a.vakata.is_array(c)||(c=[c]);var f=null,g={df:this._model.default_state,dat:c,par:b.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},h=this,i=function(a,b){a.data&&(a=a.data);var c=a.dat,d=a.par,e=[],f=[],g=[],i=a.df,j=a.t_id,k=a.t_cnt,l=a.m,m=l[d],n=a.sel,o,p,q,r,s=function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e=a.id.toString(),f,h,j,k,m={id:e,text:a.text||"",icon:a.icon!==b?a.icon:!0,parent:c,parents:d,children:a.children||[],children_d:a.children_d||[],data:a.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(f in i)i.hasOwnProperty(f)&&(m.state[f]=i[f]);if(a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(m.icon=a.data.jstree.icon),(m.icon===b||null===m.icon||""===m.icon)&&(m.icon=!0),a&&a.data&&(m.data=a.data,a.data.jstree))for(f in a.data.jstree)a.data.jstree.hasOwnProperty(f)&&(m.state[f]=a.data.jstree[f]);if(a&&"object"==typeof a.state)for(f in a.state)a.state.hasOwnProperty(f)&&(m.state[f]=a.state[f]);if(a&&"object"==typeof a.li_attr)for(f in a.li_attr)a.li_attr.hasOwnProperty(f)&&(m.li_attr[f]=a.li_attr[f]);if(m.li_attr.id||(m.li_attr.id=e),a&&"object"==typeof a.a_attr)for(f in a.a_attr)a.a_attr.hasOwnProperty(f)&&(m.a_attr[f]=a.a_attr[f]);for(a&&a.children&&a.children===!0&&(m.state.loaded=!1,m.children=[],m.children_d=[]),l[m.id]=m,f=0,h=m.children.length;h>f;f++)j=s(l[m.children[f]],m.id,d),k=l[j],m.children_d.push(j),k.children_d.length&&(m.children_d=m.children_d.concat(k.children_d));return delete a.data,delete a.children,l[m.id].original=a,m.state.selected&&g.push(m.id),m.id},t=function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e=!1,f,h,m,n,o;do e="j"+j+"_"+ ++k;while(l[e]);o={id:!1,text:"string"==typeof a?a:"",icon:"object"==typeof a&&a.icon!==b?a.icon:!0,parent:c,parents:d,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(f in i)i.hasOwnProperty(f)&&(o.state[f]=i[f]);if(a&&a.id&&(o.id=a.id.toString()),a&&a.text&&(o.text=a.text),a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(o.icon=a.data.jstree.icon),(o.icon===b||null===o.icon||""===o.icon)&&(o.icon=!0),a&&a.data&&(o.data=a.data,a.data.jstree))for(f in a.data.jstree)a.data.jstree.hasOwnProperty(f)&&(o.state[f]=a.data.jstree[f]);if(a&&"object"==typeof a.state)for(f in a.state)a.state.hasOwnProperty(f)&&(o.state[f]=a.state[f]);if(a&&"object"==typeof a.li_attr)for(f in a.li_attr)a.li_attr.hasOwnProperty(f)&&(o.li_attr[f]=a.li_attr[f]);if(o.li_attr.id&&!o.id&&(o.id=o.li_attr.id.toString()),o.id||(o.id=e),o.li_attr.id||(o.li_attr.id=o.id),a&&"object"==typeof a.a_attr)for(f in a.a_attr)a.a_attr.hasOwnProperty(f)&&(o.a_attr[f]=a.a_attr[f]);if(a&&a.children&&a.children.length){for(f=0,h=a.children.length;h>f;f++)m=t(a.children[f],o.id,d),n=l[m],o.children.push(m),n.children_d.length&&(o.children_d=o.children_d.concat(n.children_d));o.children_d=o.children_d.concat(o.children)}return a&&a.children&&a.children===!0&&(o.state.loaded=!1,o.children=[],o.children_d=[]),delete a.data,delete a.children,o.original=a,l[o.id]=o,o.state.selected&&g.push(o.id),o.id};if(c.length&&c[0].id!==b&&c[0].parent!==b){for(p=0,q=c.length;q>p;p++)c[p].children||(c[p].children=[]),c[p].state||(c[p].state={}),l[c[p].id.toString()]=c[p];for(p=0,q=c.length;q>p;p++)l[c[p].parent.toString()]?(l[c[p].parent.toString()].children.push(c[p].id.toString()),m.children_d.push(c[p].id.toString())):"undefined"!=typeof h&&(h._data.core.last_error={error:"parse",plugin:"core",id:"core_07",reason:"Node with invalid parent",data:JSON.stringify({id:c[p].id.toString(),parent:c[p].parent.toString()})},h.settings.core.error.call(h,h._data.core.last_error));for(p=0,q=m.children.length;q>p;p++)o=s(l[m.children[p]],d,m.parents.concat()),f.push(o),l[o].children_d.length&&(f=f.concat(l[o].children_d));for(p=0,q=m.parents.length;q>p;p++)l[m.parents[p]].children_d=l[m.parents[p]].children_d.concat(f);r={cnt:k,mod:l,sel:n,par:d,dpc:f,add:g}}else{for(p=0,q=c.length;q>p;p++)o=t(c[p],d,m.parents.concat()),o&&(e.push(o),f.push(o),l[o].children_d.length&&(f=f.concat(l[o].children_d)));for(m.children=e,m.children_d=f,p=0,q=m.parents.length;q>p;p++)l[m.parents[p]].children_d=l[m.parents[p]].children_d.concat(f);r={cnt:k,mod:l,sel:n,par:d,dpc:f,add:g}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?r:void postMessage(r)},k=function(b,c){if(null!==this.element){this._cnt=b.cnt;var e,f=this._model.data;for(e in f)f.hasOwnProperty(e)&&f[e].state&&f[e].state.loading&&b.mod[e]&&(b.mod[e].state.loading=!0);if(this._model.data=b.mod,c){var g,i=b.add,k=b.sel,l=this._data.core.selected.slice();if(f=this._model.data,k.length!==l.length||a.vakata.array_unique(k.concat(l)).length!==k.length){for(e=0,g=k.length;g>e;e++)-1===a.inArray(k[e],i)&&-1===a.inArray(k[e],l)&&(f[k[e]].state.selected=!1);for(e=0,g=l.length;g>e;e++)-1===a.inArray(l[e],k)&&(f[l[e]].state.selected=!0)}}b.add.length&&(this._data.core.selected=this._data.core.selected.concat(b.add)),this.trigger("model",{nodes:b.dpc,parent:b.par}),b.par!==a.jstree.root?(this._node_changed(b.par),this.redraw()):this.redraw(!0),b.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),!c&&j?j(function(){d.call(h,!0)}):d.call(h,!0)}};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker)try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+i.toString()],{type:"text/javascript"}))),!this._data.core.working||e?(this._data.core.working=!0,f=new window.Worker(this._wrk),f.onmessage=function(a){k.call(this,a.data,!0);try{f.terminate(),f=null}catch(b){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}.bind(this),g.par?f.postMessage(g):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([b,c,d,!0])}catch(l){k.call(this,i(g),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}else k.call(this,i(g),!1)}},_parse_model_from_html:function(c,d,e){e=e?[].concat(e):[],d&&e.unshift(d);var f,g,h=this._model.data,i={id:!1,text:!1,icon:!0,parent:d,parents:e,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},j,k,l;for(j in this._model.default_state)this._model.default_state.hasOwnProperty(j)&&(i.state[j]=this._model.default_state[j]);if(k=a.vakata.attributes(c,!0),a.each(k,function(b,c){return c=a.vakata.trim(c),c.length?(i.li_attr[b]=c,void("id"===b&&(i.id=c.toString()))):!0}),k=c.children("a").first(),k.length&&(k=a.vakata.attributes(k,!0),a.each(k,function(b,c){c=a.vakata.trim(c),c.length&&(i.a_attr[b]=c)})),k=c.children("a").first().length?c.children("a").first().clone():c.clone(),k.children("ins, i, ul").remove(),k=k.html(),k=a("<div></div>").html(k),i.text=this.settings.core.force_text?k.text():k.html(),k=c.data(),i.data=k?a.extend(!0,{},k):null,i.state.opened=c.hasClass("jstree-open"),i.state.selected=c.children("a").hasClass("jstree-clicked"),i.state.disabled=c.children("a").hasClass("jstree-disabled"),i.data&&i.data.jstree)for(j in i.data.jstree)i.data.jstree.hasOwnProperty(j)&&(i.state[j]=i.data.jstree[j]);k=c.children("a").children(".jstree-themeicon"),k.length&&(i.icon=k.hasClass("jstree-themeicon-hidden")?!1:k.attr("rel")),i.state.icon!==b&&(i.icon=i.state.icon),(i.icon===b||null===i.icon||""===i.icon)&&(i.icon=!0),k=c.children("ul").children("li");do l="j"+this._id+"_"+ ++this._cnt;while(h[l]);return i.id=i.li_attr.id?i.li_attr.id.toString():l,k.length?(k.each(function(b,c){f=this._parse_model_from_html(a(c),i.id,e),g=this._model.data[f],i.children.push(f),g.children_d.length&&(i.children_d=i.children_d.concat(g.children_d))}.bind(this)),i.children_d=i.children_d.concat(i.children)):c.hasClass("jstree-closed")&&(i.state.loaded=!1),i.li_attr["class"]&&(i.li_attr["class"]=i.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),i.a_attr["class"]&&(i.a_attr["class"]=i.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),h[i.id]=i,i.state.selected&&this._data.core.selected.push(i.id),i.id},_parse_model_from_flat_json:function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e=a.id.toString(),f=this._model.data,g=this._model.default_state,h,i,j,k,l={id:e,text:a.text||"",icon:a.icon!==b?a.icon:!0,parent:c,parents:d,children:a.children||[],children_d:a.children_d||[],data:a.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(h in g)g.hasOwnProperty(h)&&(l.state[h]=g[h]);if(a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(l.icon=a.data.jstree.icon),(l.icon===b||null===l.icon||""===l.icon)&&(l.icon=!0),a&&a.data&&(l.data=a.data,a.data.jstree))for(h in a.data.jstree)a.data.jstree.hasOwnProperty(h)&&(l.state[h]=a.data.jstree[h]);if(a&&"object"==typeof a.state)for(h in a.state)a.state.hasOwnProperty(h)&&(l.state[h]=a.state[h]);if(a&&"object"==typeof a.li_attr)for(h in a.li_attr)a.li_attr.hasOwnProperty(h)&&(l.li_attr[h]=a.li_attr[h]);if(l.li_attr.id||(l.li_attr.id=e),a&&"object"==typeof a.a_attr)for(h in a.a_attr)a.a_attr.hasOwnProperty(h)&&(l.a_attr[h]=a.a_attr[h]);for(a&&a.children&&a.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),f[l.id]=l,h=0,i=l.children.length;i>h;h++)j=this._parse_model_from_flat_json(f[l.children[h]],l.id,d),k=f[j],l.children_d.push(j),k.children_d.length&&(l.children_d=l.children_d.concat(k.children_d));return delete a.data,delete a.children,f[l.id].original=a,l.state.selected&&this._data.core.selected.push(l.id),l.id},_parse_model_from_json:function(a,c,d){d=d?d.concat():[],c&&d.unshift(c);var e=!1,f,g,h,i,j=this._model.data,k=this._model.default_state,l;do e="j"+this._id+"_"+ ++this._cnt;while(j[e]);l={id:!1,text:"string"==typeof a?a:"",icon:"object"==typeof a&&a.icon!==b?a.icon:!0,parent:c,parents:d,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(f in k)k.hasOwnProperty(f)&&(l.state[f]=k[f]);if(a&&a.id&&(l.id=a.id.toString()),a&&a.text&&(l.text=a.text),a&&a.data&&a.data.jstree&&a.data.jstree.icon&&(l.icon=a.data.jstree.icon),(l.icon===b||null===l.icon||""===l.icon)&&(l.icon=!0),
a&&a.data&&(l.data=a.data,a.data.jstree))for(f in a.data.jstree)a.data.jstree.hasOwnProperty(f)&&(l.state[f]=a.data.jstree[f]);if(a&&"object"==typeof a.state)for(f in a.state)a.state.hasOwnProperty(f)&&(l.state[f]=a.state[f]);if(a&&"object"==typeof a.li_attr)for(f in a.li_attr)a.li_attr.hasOwnProperty(f)&&(l.li_attr[f]=a.li_attr[f]);if(l.li_attr.id&&!l.id&&(l.id=l.li_attr.id.toString()),l.id||(l.id=e),l.li_attr.id||(l.li_attr.id=l.id),a&&"object"==typeof a.a_attr)for(f in a.a_attr)a.a_attr.hasOwnProperty(f)&&(l.a_attr[f]=a.a_attr[f]);if(a&&a.children&&a.children.length){for(f=0,g=a.children.length;g>f;f++)h=this._parse_model_from_json(a.children[f],l.id,d),i=j[h],l.children.push(h),i.children_d.length&&(l.children_d=l.children_d.concat(i.children_d));l.children_d=l.children.concat(l.children_d)}return a&&a.children&&a.children===!0&&(l.state.loaded=!1,l.children=[],l.children_d=[]),delete a.data,delete a.children,l.original=a,j[l.id]=l,l.state.selected&&this._data.core.selected.push(l.id),l.id},_redraw:function(){var b=this._model.force_full_redraw?this._model.data[a.jstree.root].children.concat([]):this._model.changed.concat([]),c=i.createElement("UL"),d,e,f,g=this._data.core.focused;for(e=0,f=b.length;f>e;e++)d=this.redraw_node(b[e],!0,this._model.force_full_redraw),d&&this._model.force_full_redraw&&c.appendChild(d);this._model.force_full_redraw&&(c.className=this.get_container_ul()[0].className,c.setAttribute("role","group"),this.element.empty().append(c)),null!==g&&this.settings.core.restore_focus&&(d=this.get_node(g,!0),d&&d.length&&d.children(".jstree-anchor")[0]!==i.activeElement?d.children(".jstree-anchor").trigger("focus"):this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:b})},redraw:function(a){a&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(b){var c=this.get_node(b),d=!1,e=!1,f=!1,g=i;if(!c)return!1;if(c.id===a.jstree.root)return this.redraw(!0);if(b=this.get_node(b,!0),!b||!b.length)return!1;if(b.children(".jstree-children").remove(),b=b[0],c.children.length&&c.state.loaded){for(f=g.createElement("UL"),f.setAttribute("role","group"),f.className="jstree-children",d=0,e=c.children.length;e>d;d++)f.appendChild(this.redraw_node(c.children[d],!0,!0));b.appendChild(f)}},redraw_node:function(b,c,d,e){var f=this.get_node(b),g=!1,h=!1,j=!1,k=!1,l=!1,m=!1,n="",o=i,p=this._model.data,q=!1,r=!1,s=null,t=0,u=0,v=!1,w=!1;if(!f)return!1;if(f.id===a.jstree.root)return this.redraw(!0);if(c=c||0===f.children.length,b=i.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(f.id[0])?"\\3"+f.id[0]+" "+f.id.substr(1).replace(a.jstree.idregex,"\\$&"):f.id.replace(a.jstree.idregex,"\\$&"))):i.getElementById(f.id))b=a(b),d||(g=b.parent().parent()[0],g===this.element[0]&&(g=null),h=b.index()),c||!f.children.length||b.children(".jstree-children").length||(c=!0),c||(j=b.children(".jstree-children")[0]),q=b.children(".jstree-anchor")[0]===i.activeElement,b.remove();else if(c=!0,!d){if(g=f.parent!==a.jstree.root?a("#"+f.parent.replace(a.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===g||g&&p[f.parent].state.opened))return!1;h=a.inArray(f.id,null===g?p[a.jstree.root].children:p[f.parent].children)}b=this._data.core.node.cloneNode(!0),n="jstree-node ";for(k in f.li_attr)if(f.li_attr.hasOwnProperty(k)){if("id"===k)continue;"class"!==k?b.setAttribute(k,f.li_attr[k]):n+=f.li_attr[k]}for(f.a_attr.id||(f.a_attr.id=f.id+"_anchor"),b.childNodes[1].setAttribute("aria-selected",!!f.state.selected),b.childNodes[1].setAttribute("aria-level",f.parents.length),this.settings.core.compute_elements_positions&&(b.childNodes[1].setAttribute("aria-setsize",p[f.parent].children.length),b.childNodes[1].setAttribute("aria-posinset",p[f.parent].children.indexOf(f.id)+1)),f.state.disabled&&b.childNodes[1].setAttribute("aria-disabled",!0),k=0,l=f.children.length;l>k;k++)if(!p[f.children[k]].state.hidden){v=!0;break}if(null!==f.parent&&p[f.parent]&&!f.state.hidden&&(k=a.inArray(f.id,p[f.parent].children),w=f.id,-1!==k))for(k++,l=p[f.parent].children.length;l>k;k++)if(p[p[f.parent].children[k]].state.hidden||(w=p[f.parent].children[k]),w!==f.id)break;f.state.hidden&&(n+=" jstree-hidden"),f.state.loading&&(n+=" jstree-loading"),f.state.loaded&&!v?n+=" jstree-leaf":(n+=f.state.opened&&f.state.loaded?" jstree-open":" jstree-closed",b.childNodes[1].setAttribute("aria-expanded",f.state.opened&&f.state.loaded)),w===f.id&&(n+=" jstree-last"),b.id=f.id,b.className=n,n=(f.state.selected?" jstree-clicked":"")+(f.state.disabled?" jstree-disabled":"");for(l in f.a_attr)if(f.a_attr.hasOwnProperty(l)){if("href"===l&&"#"===f.a_attr[l])continue;"class"!==l?b.childNodes[1].setAttribute(l,f.a_attr[l]):n+=" "+f.a_attr[l]}if(n.length&&(b.childNodes[1].className="jstree-anchor "+n),(f.icon&&f.icon!==!0||f.icon===!1)&&(f.icon===!1?b.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===f.icon.indexOf("/")&&-1===f.icon.indexOf(".")?b.childNodes[1].childNodes[0].className+=" "+f.icon+" jstree-themeicon-custom":(b.childNodes[1].childNodes[0].style.backgroundImage='url("'+f.icon+'")',b.childNodes[1].childNodes[0].style.backgroundPosition="center center",b.childNodes[1].childNodes[0].style.backgroundSize="auto",b.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?b.childNodes[1].appendChild(o.createTextNode(f.text)):b.childNodes[1].innerHTML+=f.text,c&&f.children.length&&(f.state.opened||e)&&f.state.loaded){for(m=o.createElement("UL"),m.setAttribute("role","group"),m.className="jstree-children",k=0,l=f.children.length;l>k;k++)m.appendChild(this.redraw_node(f.children[k],c,!0));b.appendChild(m)}if(j&&b.appendChild(j),!d){for(g||(g=this.element[0]),k=0,l=g.childNodes.length;l>k;k++)if(g.childNodes[k]&&g.childNodes[k].className&&-1!==g.childNodes[k].className.indexOf("jstree-children")){s=g.childNodes[k];break}s||(s=o.createElement("UL"),s.setAttribute("role","group"),s.className="jstree-children",g.appendChild(s)),g=s,h<g.childNodes.length?g.insertBefore(b,g.childNodes[h]):g.appendChild(b),q&&(t=this.element[0].scrollTop,u=this.element[0].scrollLeft,b.childNodes[1].focus(),this.element[0].scrollTop=t,this.element[0].scrollLeft=u)}return f.state.opened&&!f.state.loaded&&(f.state.opened=!1,setTimeout(function(){this.open_node(f.id,!1,0)}.bind(this),0)),b},open_node:function(c,d,e){var f,g,h,i;if(a.vakata.is_array(c)){for(c=c.slice(),f=0,g=c.length;g>f;f++)this.open_node(c[f],d,e);return!0}return c=this.get_node(c),c&&c.id!==a.jstree.root?(e=e===b?this.settings.core.animation:e,this.is_closed(c)?this.is_loaded(c)?(h=this.get_node(c,!0),i=this,h.length&&(e&&h.children(".jstree-children").length&&h.children(".jstree-children").stop(!0,!0),c.children.length&&!this._firstChild(h.children(".jstree-children")[0])&&this.draw_children(c),e?(this.trigger("before_open",{node:c}),h.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").children(".jstree-anchor").attr("aria-expanded",!0).end().children(".jstree-children").stop(!0,!0).slideDown(e,function(){this.style.display="",i.element&&i.trigger("after_open",{node:c})})):(this.trigger("before_open",{node:c}),h[0].className=h[0].className.replace("jstree-closed","jstree-open"),h[0].childNodes[1].setAttribute("aria-expanded",!0))),c.state.opened=!0,d&&d.call(this,c,!0),h.length||this.trigger("before_open",{node:c}),this.trigger("open_node",{node:c}),e&&h.length||this.trigger("after_open",{node:c}),!0):this.is_loading(c)?setTimeout(function(){this.open_node(c,d,e)}.bind(this),500):void this.load_node(c,function(a,b){return b?this.open_node(a,d,e):d?d.call(this,a,!1):!1}):(d&&d.call(this,c,!1),!1)):!1},_open_to:function(b){if(b=this.get_node(b),!b||b.id===a.jstree.root)return!1;var c,d,e=b.parents;for(c=0,d=e.length;d>c;c+=1)c!==a.jstree.root&&this.open_node(e[c],!1,0);return a("#"+b.id.replace(a.jstree.idregex,"\\$&"),this.element)},close_node:function(c,d){var e,f,g,h;if(a.vakata.is_array(c)){for(c=c.slice(),e=0,f=c.length;f>e;e++)this.close_node(c[e],d);return!0}return c=this.get_node(c),c&&c.id!==a.jstree.root?this.is_closed(c)?!1:(d=d===b?this.settings.core.animation:d,g=this,h=this.get_node(c,!0),c.state.opened=!1,this.trigger("close_node",{node:c}),void(h.length?d?h.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").children(".jstree-anchor").attr("aria-expanded",!1).end().children(".jstree-children").stop(!0,!0).slideUp(d,function(){this.style.display="",h.children(".jstree-children").remove(),g.element&&g.trigger("after_close",{node:c})}):(h[0].className=h[0].className.replace("jstree-open","jstree-closed"),h.children(".jstree-anchor").attr("aria-expanded",!1),h.children(".jstree-children").remove(),this.trigger("after_close",{node:c})):this.trigger("after_close",{node:c}))):!1},toggle_node:function(b){var c,d;if(a.vakata.is_array(b)){for(b=b.slice(),c=0,d=b.length;d>c;c++)this.toggle_node(b[c]);return!0}return this.is_closed(b)?this.open_node(b):this.is_open(b)?this.close_node(b):void 0},open_all:function(b,c,d){if(b||(b=a.jstree.root),b=this.get_node(b),!b)return!1;var e=b.id===a.jstree.root?this.get_container_ul():this.get_node(b,!0),f,g,h;if(!e.length){for(f=0,g=b.children_d.length;g>f;f++)this.is_closed(this._model.data[b.children_d[f]])&&(this._model.data[b.children_d[f]].state.opened=!0);return this.trigger("open_all",{node:b})}d=d||e,h=this,e=this.is_closed(b)?e.find(".jstree-closed").addBack():e.find(".jstree-closed"),e.each(function(){h.open_node(this,function(a,b){b&&this.is_parent(a)&&this.open_all(a,c,d)},c||0)}),0===d.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(d)})},close_all:function(b,c){if(b||(b=a.jstree.root),b=this.get_node(b),!b)return!1;var d=b.id===a.jstree.root?this.get_container_ul():this.get_node(b,!0),e=this,f,g;for(d.length&&(d=this.is_open(b)?d.find(".jstree-open").addBack():d.find(".jstree-open"),a(d.get().reverse()).each(function(){e.close_node(this,c||0)})),f=0,g=b.children_d.length;g>f;f++)this._model.data[b.children_d[f]].state.opened=!1;this.trigger("close_all",{node:b})},is_disabled:function(a){return a=this.get_node(a),a&&a.state&&a.state.disabled},enable_node:function(b){var c,d;if(a.vakata.is_array(b)){for(b=b.slice(),c=0,d=b.length;d>c;c++)this.enable_node(b[c]);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(b.state.disabled=!1,this.get_node(b,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:b})):!1},disable_node:function(b){var c,d;if(a.vakata.is_array(b)){for(b=b.slice(),c=0,d=b.length;d>c;c++)this.disable_node(b[c]);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(b.state.disabled=!0,this.get_node(b,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:b})):!1},is_hidden:function(a){return a=this.get_node(a),a.state.hidden===!0},hide_node:function(b,c){var d,e;if(a.vakata.is_array(b)){for(b=b.slice(),d=0,e=b.length;e>d;d++)this.hide_node(b[d],!0);return c||this.redraw(),!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?void(b.state.hidden||(b.state.hidden=!0,this._node_changed(b.parent),c||this.redraw(),this.trigger("hide_node",{node:b}))):!1},show_node:function(b,c){var d,e;if(a.vakata.is_array(b)){for(b=b.slice(),d=0,e=b.length;e>d;d++)this.show_node(b[d],!0);return c||this.redraw(),!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?void(b.state.hidden&&(b.state.hidden=!1,this._node_changed(b.parent),c||this.redraw(),this.trigger("show_node",{node:b}))):!1},hide_all:function(b){var c,d=this._model.data,e=[];for(c in d)d.hasOwnProperty(c)&&c!==a.jstree.root&&!d[c].state.hidden&&(d[c].state.hidden=!0,e.push(c));return this._model.force_full_redraw=!0,b||this.redraw(),this.trigger("hide_all",{nodes:e}),e},show_all:function(b){var c,d=this._model.data,e=[];for(c in d)d.hasOwnProperty(c)&&c!==a.jstree.root&&d[c].state.hidden&&(d[c].state.hidden=!1,e.push(c));return this._model.force_full_redraw=!0,b||this.redraw(),this.trigger("show_all",{nodes:e}),e},activate_node:function(a,c){if(this.is_disabled(a))return!1;if(c&&"object"==typeof c||(c={}),this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==b?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(c.metaKey||c.ctrlKey||c.shiftKey)&&(!c.shiftKey||this._data.core.last_clicked&&this.get_parent(a)&&this.get_parent(a)===this._data.core.last_clicked.parent))if(c.shiftKey){var d=this.get_node(a).id,e=this._data.core.last_clicked.id,f=this.get_node(this._data.core.last_clicked.parent).children,g=!1,h,i;for(h=0,i=f.length;i>h;h+=1)f[h]===d&&(g=!g),f[h]===e&&(g=!g),this.is_disabled(f[h])||!g&&f[h]!==d&&f[h]!==e?this.deselect_node(f[h],!0,c):this.is_hidden(f[h])||this.select_node(f[h],!0,!1,c);this.trigger("changed",{action:"select_node",node:this.get_node(a),selected:this._data.core.selected,event:c})}else this.is_selected(a)?this.deselect_node(a,!1,c):this.select_node(a,!1,!1,c);else!this.settings.core.multiple&&(c.metaKey||c.ctrlKey||c.shiftKey)&&this.is_selected(a)?this.deselect_node(a,!1,c):(this.deselect_all(!0),this.select_node(a,!1,!1,c),this._data.core.last_clicked=this.get_node(a));this.trigger("activate_node",{node:this.get_node(a),event:c})},hover_node:function(a){if(a=this.get_node(a,!0),!a||!a.length||a.children(".jstree-hovered").length)return!1;var b=this.element.find(".jstree-hovered"),c=this.element;b&&b.length&&this.dehover_node(b),a.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(a)}),setTimeout(function(){c.attr("aria-activedescendant",a[0].id)},0)},dehover_node:function(a){return a=this.get_node(a,!0),a&&a.length&&a.children(".jstree-hovered").length?(a.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(a)})):!1},select_node:function(b,c,d,e){var f,g,h,i;if(a.vakata.is_array(b)){for(b=b.slice(),g=0,h=b.length;h>g;g++)this.select_node(b[g],c,d,e);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(f=this.get_node(b,!0),void(b.state.selected||(b.state.selected=!0,this._data.core.selected.push(b.id),d||(f=this._open_to(b)),f&&f.length&&f.children(".jstree-anchor").addClass("jstree-clicked").attr("aria-selected",!0),this.trigger("select_node",{node:b,selected:this._data.core.selected,event:e}),c||this.trigger("changed",{action:"select_node",node:b,selected:this._data.core.selected,event:e})))):!1},deselect_node:function(b,c,d){var e,f,g;if(a.vakata.is_array(b)){for(b=b.slice(),e=0,f=b.length;f>e;e++)this.deselect_node(b[e],c,d);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(g=this.get_node(b,!0),void(b.state.selected&&(b.state.selected=!1,this._data.core.selected=a.vakata.array_remove_item(this._data.core.selected,b.id),g.length&&g.children(".jstree-anchor").removeClass("jstree-clicked").attr("aria-selected",!1),this.trigger("deselect_node",{node:b,selected:this._data.core.selected,event:d}),c||this.trigger("changed",{action:"deselect_node",node:b,selected:this._data.core.selected,event:d})))):!1},select_all:function(b){var c=this._data.core.selected.concat([]),d,e;for(this._data.core.selected=this._model.data[a.jstree.root].children_d.concat(),d=0,e=this._data.core.selected.length;e>d;d++)this._model.data[this._data.core.selected[d]]&&(this._model.data[this._data.core.selected[d]].state.selected=!0);this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),b||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:c})},deselect_all:function(a){var b=this._data.core.selected.concat([]),c,d;for(c=0,d=this._data.core.selected.length;d>c;c++)this._model.data[this._data.core.selected[c]]&&(this._model.data[this._data.core.selected[c]].state.selected=!1);this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:b}),a||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:b})},is_selected:function(b){return b=this.get_node(b),b&&b.id!==a.jstree.root?b.state.selected:!1},get_selected:function(b){return b?a.map(this._data.core.selected,function(a){return this.get_node(a)}.bind(this)):this._data.core.selected.slice()},get_top_selected:function(b){var c=this.get_selected(!0),d={},e,f,g,h;for(e=0,f=c.length;f>e;e++)d[c[e].id]=c[e];for(e=0,f=c.length;f>e;e++)for(g=0,h=c[e].children_d.length;h>g;g++)d[c[e].children_d[g]]&&delete d[c[e].children_d[g]];c=[];for(e in d)d.hasOwnProperty(e)&&c.push(e);return b?a.map(c,function(a){return this.get_node(a)}.bind(this)):c},get_bottom_selected:function(b){var c=this.get_selected(!0),d=[],e,f;for(e=0,f=c.length;f>e;e++)c[e].children.length||d.push(c[e].id);return b?a.map(d,function(a){return this.get_node(a)}.bind(this)):d},get_state:function(){var b={core:{open:[],loaded:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},c;for(c in this._model.data)this._model.data.hasOwnProperty(c)&&c!==a.jstree.root&&(this._model.data[c].state.loaded&&this.settings.core.loaded_state&&b.core.loaded.push(c),this._model.data[c].state.opened&&b.core.open.push(c),this._model.data[c].state.selected&&b.core.selected.push(c));return b},set_state:function(c,d){if(c){if(c.core&&c.core.selected&&c.core.initial_selection===b&&(c.core.initial_selection=this._data.core.selected.concat([]).sort().join(",")),c.core){var e,f,g,h,i;if(c.core.loaded)return this.settings.core.loaded_state&&a.vakata.is_array(c.core.loaded)&&c.core.loaded.length?this._load_nodes(c.core.loaded,function(a){delete c.core.loaded,this.set_state(c,d)}):(delete c.core.loaded,this.set_state(c,d)),!1;if(c.core.open)return a.vakata.is_array(c.core.open)&&c.core.open.length?this._load_nodes(c.core.open,function(a){this.open_node(a,!1,0),delete c.core.open,this.set_state(c,d)}):(delete c.core.open,this.set_state(c,d)),!1;if(c.core.scroll)return c.core.scroll&&c.core.scroll.left!==b&&this.element.scrollLeft(c.core.scroll.left),c.core.scroll&&c.core.scroll.top!==b&&this.element.scrollTop(c.core.scroll.top),delete c.core.scroll,this.set_state(c,d),!1;if(c.core.selected)return h=this,(c.core.initial_selection===b||c.core.initial_selection===this._data.core.selected.concat([]).sort().join(","))&&(this.deselect_all(),a.each(c.core.selected,function(a,b){h.select_node(b,!1,!0)})),delete c.core.initial_selection,delete c.core.selected,this.set_state(c,d),!1;for(i in c)c.hasOwnProperty(i)&&"core"!==i&&-1===a.inArray(i,this.settings.plugins)&&delete c[i];if(a.isEmptyObject(c.core))return delete c.core,this.set_state(c,d),!1}return a.isEmptyObject(c)?(c=null,d&&d.call(this),this.trigger("set_state"),!1):!0}return!1},refresh:function(b,c){this._data.core.state=c===!0?{}:this.get_state(),c&&a.vakata.is_function(c)&&(this._data.core.state=c.call(this,this._data.core.state)),this._cnt=0,this._model.data={},this._model.data[a.jstree.root]={id:a.jstree.root,parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}},this._data.core.selected=[],this._data.core.last_clicked=null,this._data.core.focused=null;var d=this.get_container_ul()[0].className;b||(this.element.html("<ul class='"+d+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='none' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' role='treeitem' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node(a.jstree.root,function(b,c){c&&(this.get_container_ul()[0].className=d,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(a.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(b){if(b=this.get_node(b),!b||b.id===a.jstree.root)return!1;var c=[],d=[],e=this._data.core.selected.concat([]);d.push(b.id),b.state.opened===!0&&c.push(b.id),this.get_node(b,!0).find(".jstree-open").each(function(){d.push(this.id),c.push(this.id)}),this._load_nodes(d,function(a){this.open_node(c,!1,0),this.select_node(e),this.trigger("refresh_node",{node:b,nodes:a})}.bind(this),!1,!0)},set_id:function(b,c){if(b=this.get_node(b),!b||b.id===a.jstree.root)return!1;var d,e,f=this._model.data,g=b.id;for(c=c.toString(),f[b.parent].children[a.inArray(b.id,f[b.parent].children)]=c,d=0,e=b.parents.length;e>d;d++)f[b.parents[d]].children_d[a.inArray(b.id,f[b.parents[d]].children_d)]=c;for(d=0,e=b.children.length;e>d;d++)f[b.children[d]].parent=c;for(d=0,e=b.children_d.length;e>d;d++)f[b.children_d[d]].parents[a.inArray(b.id,f[b.children_d[d]].parents)]=c;return d=a.inArray(b.id,this._data.core.selected),-1!==d&&(this._data.core.selected[d]=c),d=this.get_node(b.id,!0),d&&(d.attr("id",c),this.element.attr("aria-activedescendant")===b.id&&this.element.attr("aria-activedescendant",c)),delete f[b.id],b.id=c,b.li_attr.id=c,f[c]=b,this.trigger("set_id",{node:b,"new":b.id,old:g}),!0},get_text:function(b){return b=this.get_node(b),b&&b.id!==a.jstree.root?b.text:!1},set_text:function(b,c){var d,e;if(a.vakata.is_array(b)){for(b=b.slice(),d=0,e=b.length;e>d;d++)this.set_text(b[d],c);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(b.text=c,this.get_node(b,!0).length&&this.redraw_node(b.id),this.trigger("set_text",{obj:b,text:c}),!0):!1},get_json:function(b,c,d){if(b=this.get_node(b||a.jstree.root),!b)return!1;c&&c.flat&&!d&&(d=[]);var e={id:b.id,text:b.text,icon:this.get_icon(b),li_attr:a.extend(!0,{},b.li_attr),a_attr:a.extend(!0,{},b.a_attr),state:{},data:c&&c.no_data?!1:a.extend(!0,a.vakata.is_array(b.data)?[]:{},b.data)},f,g;if(c&&c.flat?e.parent=b.parent:e.children=[],c&&c.no_state)delete e.state;else for(f in b.state)b.state.hasOwnProperty(f)&&(e.state[f]=b.state[f]);if(c&&c.no_li_attr&&delete e.li_attr,c&&c.no_a_attr&&delete e.a_attr,c&&c.no_id&&(delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id),c&&c.flat&&b.id!==a.jstree.root&&d.push(e),!c||!c.no_children)for(f=0,g=b.children.length;g>f;f++)c&&c.flat?this.get_json(b.children[f],c,d):e.children.push(this.get_json(b.children[f],c));return c&&c.flat?d:b.id===a.jstree.root?e.children:e},create_node:function(c,d,e,f,g){if(null===c&&(c=a.jstree.root),c=this.get_node(c),!c)return!1;if(e=e===b?"last":e,!e.toString().match(/^(before|after)$/)&&!g&&!this.is_loaded(c))return this.load_node(c,function(){this.create_node(c,d,e,f,!0)});d||(d={text:this.get_string("New node")}),d="string"==typeof d?{text:d}:a.extend(!0,{},d),d.text===b&&(d.text=this.get_string("New node"));var h,i,j,k;switch(c.id===a.jstree.root&&("before"===e&&(e="first"),"after"===e&&(e="last")),e){case"before":h=this.get_node(c.parent),e=a.inArray(c.id,h.children),c=h;break;case"after":h=this.get_node(c.parent),e=a.inArray(c.id,h.children)+1,c=h;break;case"inside":case"first":e=0;break;case"last":e=c.children.length;break;default:e||(e=0)}if(e>c.children.length&&(e=c.children.length),d.id||(d.id=!0),!this.check("create_node",d,c,e))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(d.id===!0&&delete d.id,d=this._parse_model_from_json(d,c.id,c.parents.concat()),!d)return!1;for(h=this.get_node(d),i=[],i.push(d),i=i.concat(h.children_d),this.trigger("model",{nodes:i,parent:c.id}),c.children_d=c.children_d.concat(i),j=0,k=c.parents.length;k>j;j++)this._model.data[c.parents[j]].children_d=this._model.data[c.parents[j]].children_d.concat(i);for(d=h,h=[],j=0,k=c.children.length;k>j;j++)h[j>=e?j+1:j]=c.children[j];return h[e]=d.id,c.children=h,this.redraw_node(c,!0),this.trigger("create_node",{node:this.get_node(d),parent:c.id,position:e}),f&&f.call(this,this.get_node(d)),d.id},rename_node:function(b,c){var d,e,f;if(a.vakata.is_array(b)){for(b=b.slice(),d=0,e=b.length;e>d;d++)this.rename_node(b[d],c);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(f=b.text,this.check("rename_node",b,this.get_parent(b),c)?(this.set_text(b,c),this.trigger("rename_node",{node:b,text:c,old:f}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(b){var c,d,e,f,g,h,i,j,k,l,m,n;if(a.vakata.is_array(b)){for(b=b.slice(),c=0,d=b.length;d>c;c++)this.delete_node(b[c]);return!0}if(b=this.get_node(b),!b||b.id===a.jstree.root)return!1;if(e=this.get_node(b.parent),f=a.inArray(b.id,e.children),l=!1,!this.check("delete_node",b,e,f))return this.settings.core.error.call(this,this._data.core.last_error),!1;for(-1!==f&&(e.children=a.vakata.array_remove(e.children,f)),g=b.children_d.concat([]),g.push(b.id),h=0,i=b.parents.length;i>h;h++)this._model.data[b.parents[h]].children_d=a.vakata.array_filter(this._model.data[b.parents[h]].children_d,function(b){return-1===a.inArray(b,g)});for(j=0,k=g.length;k>j;j++)if(this._model.data[g[j]].state.selected){l=!0;break}for(l&&(this._data.core.selected=a.vakata.array_filter(this._data.core.selected,function(b){return-1===a.inArray(b,g)})),this.trigger("delete_node",{node:b,parent:e.id}),l&&this.trigger("changed",{action:"delete_node",node:b,selected:this._data.core.selected,parent:e.id}),j=0,k=g.length;k>j;j++)delete this._model.data[g[j]];return-1!==a.inArray(this._data.core.focused,g)&&(this._data.core.focused=null,m=this.element[0].scrollTop,n=this.element[0].scrollLeft,e.id===a.jstree.root?this._model.data[a.jstree.root].children[0]&&this.get_node(this._model.data[a.jstree.root].children[0],!0).children(".jstree-anchor").triger("focus"):this.get_node(e,!0).children(".jstree-anchor").trigger("focus"),this.element[0].scrollTop=m,this.element[0].scrollLeft=n),this.redraw_node(e,!0),!0},check:function(b,c,d,e,f){c=c&&c.id?c:this.get_node(c),d=d&&d.id?d:this.get_node(d);var g=b.match(/^move_node|copy_node|create_node$/i)?d:c,h=this.settings.core.check_callback;if("move_node"===b||"copy_node"===b){if(!(f&&f.is_multi||"move_node"!==b||a.inArray(c.id,d.children)!==e))return this._data.core.last_error={error:"check",plugin:"core",id:"core_08",reason:"Moving node to its current position",data:JSON.stringify({chk:b,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})},!1;if(!(f&&f.is_multi||c.id!==d.id&&("move_node"!==b||a.inArray(c.id,d.children)!==e)&&-1===a.inArray(d.id,c.children_d)))return this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:b,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})},!1}return g&&g.data&&(g=g.data),g&&g.functions&&(g.functions[b]===!1||g.functions[b]===!0)?(g.functions[b]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+b,data:JSON.stringify({chk:b,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})}),g.functions[b]):h===!1||a.vakata.is_function(h)&&h.call(this,b,c,d,e,f)===!1||h&&h[b]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+b,data:JSON.stringify({chk:b,pos:e,obj:c&&c.id?c.id:!1,par:d&&d.id?d.id:!1})},!1):!0},last_error:function(){return this._data.core.last_error},move_node:function(c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(d=this.get_node(d),e=e===b?0:e,!d)return!1;if(!e.toString().match(/^(before|after)$/)&&!g&&!this.is_loaded(d))return this.load_node(d,function(){this.move_node(c,d,e,f,!0,!1,i)});if(a.vakata.is_array(c)){if(1!==c.length){for(j=0,k=c.length;k>j;j++)(r=this.move_node(c[j],d,e,f,g,!1,i))&&(d=r,e="after");return this.redraw(),!0}c=c[0]}if(c=c&&c.id?c:this.get_node(c),!c||c.id===a.jstree.root)return!1;if(l=(c.parent||a.jstree.root).toString(),n=e.toString().match(/^(before|after)$/)&&d.id!==a.jstree.root?this.get_node(d.parent):d,o=i?i:this._model.data[c.id]?this:a.jstree.reference(c.id),p=!o||!o._id||this._id!==o._id,m=o&&o._id&&l&&o._model.data[l]&&o._model.data[l].children?a.inArray(c.id,o._model.data[l].children):-1,o&&o._id&&(c=o._model.data[c.id]),p)return(r=this.copy_node(c,d,e,f,g,!1,i))?(o&&o.delete_node(c),r):!1;switch(d.id===a.jstree.root&&("before"===e&&(e="first"),"after"===e&&(e="last")),e){case"before":e=a.inArray(d.id,n.children);break;case"after":e=a.inArray(d.id,n.children)+1;break;case"inside":case"first":e=0;break;case"last":e=n.children.length;break;default:e||(e=0)}if(e>n.children.length&&(e=n.children.length),!this.check("move_node",c,n,e,{core:!0,origin:i,is_multi:o&&o._id&&o._id!==this._id,is_foreign:!o||!o._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(c.parent===n.id){for(q=n.children.concat(),r=a.inArray(c.id,q),-1!==r&&(q=a.vakata.array_remove(q,r),e>r&&e--),r=[],s=0,t=q.length;t>s;s++)r[s>=e?s+1:s]=q[s];r[e]=c.id,n.children=r,this._node_changed(n.id),this.redraw(n.id===a.jstree.root)}else{for(r=c.children_d.concat(),r.push(c.id),s=0,t=c.parents.length;t>s;s++){for(q=[],w=o._model.data[c.parents[s]].children_d,u=0,v=w.length;v>u;u++)-1===a.inArray(w[u],r)&&q.push(w[u]);o._model.data[c.parents[s]].children_d=q}for(o._model.data[l].children=a.vakata.array_remove_item(o._model.data[l].children,c.id),s=0,t=n.parents.length;t>s;s++)this._model.data[n.parents[s]].children_d=this._model.data[n.parents[s]].children_d.concat(r);for(q=[],s=0,t=n.children.length;t>s;s++)q[s>=e?s+1:s]=n.children[s];for(q[e]=c.id,n.children=q,n.children_d.push(c.id),n.children_d=n.children_d.concat(c.children_d),c.parent=n.id,r=n.parents.concat(),r.unshift(n.id),w=c.parents.length,c.parents=r,r=r.concat(),s=0,t=c.children_d.length;t>s;s++)this._model.data[c.children_d[s]].parents=this._model.data[c.children_d[s]].parents.slice(0,-1*w),Array.prototype.push.apply(this._model.data[c.children_d[s]].parents,r);(l===a.jstree.root||n.id===a.jstree.root)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(l),this._node_changed(n.id)),h||this.redraw()}return f&&f.call(this,c,n,e),this.trigger("move_node",{node:c,parent:n.id,position:e,old_parent:l,old_position:m,is_multi:o&&o._id&&o._id!==this._id,is_foreign:!o||!o._id,old_instance:o,new_instance:this}),c.id},copy_node:function(c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t;if(d=this.get_node(d),e=e===b?0:e,!d)return!1;if(!e.toString().match(/^(before|after)$/)&&!g&&!this.is_loaded(d))return this.load_node(d,function(){this.copy_node(c,d,e,f,!0,!1,i)});if(a.vakata.is_array(c)){if(1!==c.length){for(j=0,k=c.length;k>j;j++)(m=this.copy_node(c[j],d,e,f,g,!0,i))&&(d=m,e="after");return this.redraw(),!0}c=c[0]}if(c=c&&c.id?c:this.get_node(c),!c||c.id===a.jstree.root)return!1;switch(q=(c.parent||a.jstree.root).toString(),r=e.toString().match(/^(before|after)$/)&&d.id!==a.jstree.root?this.get_node(d.parent):d,s=i?i:this._model.data[c.id]?this:a.jstree.reference(c.id),t=!s||!s._id||this._id!==s._id,s&&s._id&&(c=s._model.data[c.id]),d.id===a.jstree.root&&("before"===e&&(e="first"),"after"===e&&(e="last")),e){case"before":e=a.inArray(d.id,r.children);break;case"after":e=a.inArray(d.id,r.children)+1;break;case"inside":case"first":e=0;break;case"last":e=r.children.length;break;default:e||(e=0)}if(e>r.children.length&&(e=r.children.length),!this.check("copy_node",c,r,e,{core:!0,origin:i,is_multi:s&&s._id&&s._id!==this._id,is_foreign:!s||!s._id}))return this.settings.core.error.call(this,this._data.core.last_error),!1;if(p=s?s.get_json(c,{no_id:!0,no_data:!0,no_state:!0}):c,!p)return!1;if(p.id===!0&&delete p.id,p=this._parse_model_from_json(p,r.id,r.parents.concat()),
!p)return!1;for(m=this.get_node(p),c&&c.state&&c.state.loaded===!1&&(m.state.loaded=!1),l=[],l.push(p),l=l.concat(m.children_d),this.trigger("model",{nodes:l,parent:r.id}),n=0,o=r.parents.length;o>n;n++)this._model.data[r.parents[n]].children_d=this._model.data[r.parents[n]].children_d.concat(l);for(l=[],n=0,o=r.children.length;o>n;n++)l[n>=e?n+1:n]=r.children[n];return l[e]=m.id,r.children=l,r.children_d.push(m.id),r.children_d=r.children_d.concat(m.children_d),r.id===a.jstree.root&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(r.id),h||this.redraw(r.id===a.jstree.root),f&&f.call(this,m,r,e),this.trigger("copy_node",{node:m,original:c,parent:r.id,position:e,old_parent:q,old_position:s&&s._id&&q&&s._model.data[q]&&s._model.data[q].children?a.inArray(c.id,s._model.data[q].children):-1,is_multi:s&&s._id&&s._id!==this._id,is_foreign:!s||!s._id,old_instance:s,new_instance:this}),m.id},cut:function(b){if(b||(b=this._data.core.selected.concat()),a.vakata.is_array(b)||(b=[b]),!b.length)return!1;var c=[],g,h,i;for(h=0,i=b.length;i>h;h++)g=this.get_node(b[h]),g&&g.id&&g.id!==a.jstree.root&&c.push(g);return c.length?(d=c,f=this,e="move_node",void this.trigger("cut",{node:b})):!1},copy:function(b){if(b||(b=this._data.core.selected.concat()),a.vakata.is_array(b)||(b=[b]),!b.length)return!1;var c=[],g,h,i;for(h=0,i=b.length;i>h;h++)g=this.get_node(b[h]),g&&g.id&&g.id!==a.jstree.root&&c.push(g);return c.length?(d=c,f=this,e="copy_node",void this.trigger("copy",{node:b})):!1},get_buffer:function(){return{mode:e,node:d,inst:f}},can_paste:function(){return e!==!1&&d!==!1},paste:function(a,b){return a=this.get_node(a),a&&e&&e.match(/^(copy_node|move_node)$/)&&d?(this[e](d,a,b,!1,!1,!1,f)&&this.trigger("paste",{parent:a.id,node:d,mode:e}),d=!1,e=!1,void(f=!1)):!1},clear_buffer:function(){d=!1,e=!1,f=!1,this.trigger("clear_buffer")},edit:function(b,c,d){var e,f,g,h,j,k,l,m,n,o=!1;return(b=this.get_node(b))?this.check("edit",b,this.get_parent(b))?(n=b,c="string"==typeof c?c:b.text,this.set_text(b,""),b=this._open_to(b),n.text=c,e=this._data.core.rtl,f=this.element.width(),this._data.core.focused=n.id,g=b.children(".jstree-anchor").trigger("focus"),h=a("<span></span>"),j=c,k=a("<div></div>",{css:{position:"absolute",top:"-200px",left:e?"0px":"-1000px",visibility:"hidden"}}).appendTo(i.body),l=a("<input />",{value:j,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:function(c){c.stopImmediatePropagation(),c.preventDefault();var e=h.children(".jstree-rename-input"),f=e.val(),i=this.settings.core.force_text,m;""===f&&(f=j),k.remove(),h.replaceWith(g),h.remove(),j=i?j:a("<div></div>").append(a.parseHTML(j)).html(),b=this.get_node(b),this.set_text(b,j),m=!!this.rename_node(b,i?a("<div></div>").text(f).text():a("<div></div>").append(a.parseHTML(f)).html()),m||this.set_text(b,j),this._data.core.focused=n.id,setTimeout(function(){var a=this.get_node(n.id,!0);a.length&&(this._data.core.focused=n.id,a.children(".jstree-anchor").trigger("focus"))}.bind(this),0),d&&d.call(this,n,m,o,f),l=null}.bind(this),keydown:function(a){var b=a.which;27===b&&(o=!0,this.value=j),(27===b||13===b||37===b||38===b||39===b||40===b||32===b)&&a.stopImmediatePropagation(),(27===b||13===b)&&(a.preventDefault(),this.blur())},click:function(a){a.stopImmediatePropagation()},mousedown:function(a){a.stopImmediatePropagation()},keyup:function(a){l.width(Math.min(k.text("pW"+this.value).width(),f))},keypress:function(a){return 13===a.which?!1:void 0}}),m={fontFamily:g.css("fontFamily")||"",fontSize:g.css("fontSize")||"",fontWeight:g.css("fontWeight")||"",fontStyle:g.css("fontStyle")||"",fontStretch:g.css("fontStretch")||"",fontVariant:g.css("fontVariant")||"",letterSpacing:g.css("letterSpacing")||"",wordSpacing:g.css("wordSpacing")||""},h.attr("class",g.attr("class")).append(g.contents().clone()).append(l),g.replaceWith(h),k.css(m),l.css(m).width(Math.min(k.text("pW"+l[0].value).width(),f))[0].select(),void a(i).one("mousedown.jstree touchstart.jstree dnd_start.vakata",function(b){l&&b.target!==l&&a(l).trigger("blur")})):(this.settings.core.error.call(this,this._data.core.last_error),!1):!1},set_theme:function(b,c){if(!b)return!1;if(c===!0){var d=this.settings.core.themes.dir;d||(d=a.jstree.path+"/themes"),c=d+"/"+b+"/style.css"}c&&-1===a.inArray(c,g)&&(a("head").append('<link rel="stylesheet" href="'+c+'" type="text/css" />'),g.push(c)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=b,this.element.addClass("jstree-"+b),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+b+"-responsive"),this.trigger("set_theme",{theme:b})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(a){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=a,a&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped"),this.trigger("show_stripes")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped"),this.trigger("hide_stripes")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots"),this.trigger("show_dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots"),this.trigger("hide_dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons"),this.trigger("show_icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons"),this.trigger("hide_icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},show_ellipsis:function(){this._data.core.themes.ellipsis=!0,this.get_container_ul().addClass("jstree-ellipsis"),this.trigger("show_ellipsis")},hide_ellipsis:function(){this._data.core.themes.ellipsis=!1,this.get_container_ul().removeClass("jstree-ellipsis"),this.trigger("hide_ellipsis")},toggle_ellipsis:function(){this._data.core.themes.ellipsis?this.hide_ellipsis():this.show_ellipsis()},set_icon:function(c,d){var e,f,g,h;if(a.vakata.is_array(c)){for(c=c.slice(),e=0,f=c.length;f>e;e++)this.set_icon(c[e],d);return!0}return c=this.get_node(c),c&&c.id!==a.jstree.root?(h=c.icon,c.icon=d===!0||null===d||d===b||""===d?!0:d,g=this.get_node(c,!0).children(".jstree-anchor").children(".jstree-themeicon"),d===!1?(g.removeClass("jstree-themeicon-custom "+h).css("background","").removeAttr("rel"),this.hide_icon(c)):d===!0||null===d||d===b||""===d?(g.removeClass("jstree-themeicon-custom "+h).css("background","").removeAttr("rel"),h===!1&&this.show_icon(c)):-1===d.indexOf("/")&&-1===d.indexOf(".")?(g.removeClass(h).css("background",""),g.addClass(d+" jstree-themeicon-custom").attr("rel",d),h===!1&&this.show_icon(c)):(g.removeClass(h).css("background",""),g.addClass("jstree-themeicon-custom").css("background","url('"+d+"') center center no-repeat").attr("rel",d),h===!1&&this.show_icon(c)),!0):!1},get_icon:function(b){return b=this.get_node(b),b&&b.id!==a.jstree.root?b.icon:!1},hide_icon:function(b){var c,d;if(a.vakata.is_array(b)){for(b=b.slice(),c=0,d=b.length;d>c;c++)this.hide_icon(b[c]);return!0}return b=this.get_node(b),b&&b!==a.jstree.root?(b.icon=!1,this.get_node(b,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(b){var c,d,e;if(a.vakata.is_array(b)){for(b=b.slice(),c=0,d=b.length;d>c;c++)this.show_icon(b[c]);return!0}return b=this.get_node(b),b&&b!==a.jstree.root?(e=this.get_node(b,!0),b.icon=e.length?e.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,b.icon||(b.icon=!0),e.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},a.vakata={},a.vakata.attributes=function(b,c){b=a(b)[0];var d=c?{}:[];return b&&b.attributes&&a.each(b.attributes,function(b,e){-1===a.inArray(e.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==e.value&&""!==a.vakata.trim(e.value)&&(c?d[e.name]=e.value:d.push(e.name))}),d},a.vakata.array_unique=function(a){var c=[],d,e,f,g={};for(d=0,f=a.length;f>d;d++)g[a[d]]===b&&(c.push(a[d]),g[a[d]]=!0);return c},a.vakata.array_remove=function(a,b){return a.splice(b,1),a},a.vakata.array_remove_item=function(b,c){var d=a.inArray(c,b);return-1!==d?a.vakata.array_remove(b,d):b},a.vakata.array_filter=function(a,b,c,d,e){if(a.filter)return a.filter(b,c);d=[];for(e in a)~~e+""==e+""&&e>=0&&b.call(c,a[e],+e,a)&&d.push(a[e]);return d},a.vakata.trim=function(a){return String.prototype.trim?String.prototype.trim.call(a.toString()):a.toString().replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},a.vakata.is_function=function(a){return"function"==typeof a&&"number"!=typeof a.nodeType},a.vakata.is_array=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},Function.prototype.bind||(Function.prototype.bind=function(){var a=this,b=arguments[0],c=Array.prototype.slice.call(arguments,1);if("function"!=typeof a)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");return function(){var d=c.concat(Array.prototype.slice.call(arguments));return a.apply(b,d)}}),a.jstree.plugins.changed=function(a,b){var c=[];this.trigger=function(a,d){var e,f;if(d||(d={}),"changed"===a.replace(".jstree","")){d.changed={selected:[],deselected:[]};var g={};for(e=0,f=c.length;f>e;e++)g[c[e]]=1;for(e=0,f=d.selected.length;f>e;e++)g[d.selected[e]]?g[d.selected[e]]=2:d.changed.selected.push(d.selected[e]);for(e=0,f=c.length;f>e;e++)1===g[c[e]]&&d.changed.deselected.push(c[e]);c=d.selected.slice()}b.trigger.call(this,a,d)},this.refresh=function(a,d){return c=[],b.refresh.apply(this,arguments)}};var l=i.createElement("I");l.className="jstree-icon jstree-checkbox",l.setAttribute("role","presentation"),a.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0,cascade_to_disabled:!0,cascade_to_hidden:!0},a.jstree.plugins.checkbox=function(c,d){this.bind=function(){d.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")}.bind(this)).on("loading.jstree",function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()}.bind(this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(this._undetermined.bind(this),50)}.bind(this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",function(a,b){var c=this._model.data,d=c[b.parent],e=b.nodes,f,g;for(f=0,g=e.length;g>f;f++)c[e[f]].state.checked=c[e[f]].state.checked||c[e[f]].original&&c[e[f]].original.state&&c[e[f]].original.state.checked,c[e[f]].state.checked&&this._data.checkbox.selected.push(e[f])}.bind(this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",function(b,c){var d=this._model.data,e=d[c.parent],f=c.nodes,g=[],h,i,j,k,l,m,n=this.settings.checkbox.cascade,o=this.settings.checkbox.tie_selection;if(-1!==n.indexOf("down"))if(e.state[o?"selected":"checked"]){for(i=0,j=f.length;j>i;i++)d[f[i]].state[o?"selected":"checked"]=!0;this._data[o?"core":"checkbox"].selected=this._data[o?"core":"checkbox"].selected.concat(f)}else for(i=0,j=f.length;j>i;i++)if(d[f[i]].state[o?"selected":"checked"]){for(k=0,l=d[f[i]].children_d.length;l>k;k++)d[d[f[i]].children_d[k]].state[o?"selected":"checked"]=!0;this._data[o?"core":"checkbox"].selected=this._data[o?"core":"checkbox"].selected.concat(d[f[i]].children_d)}if(-1!==n.indexOf("up")){for(i=0,j=e.children_d.length;j>i;i++)d[e.children_d[i]].children.length||g.push(d[e.children_d[i]].parent);for(g=a.vakata.array_unique(g),k=0,l=g.length;l>k;k++){e=d[g[k]];while(e&&e.id!==a.jstree.root){for(h=0,i=0,j=e.children.length;j>i;i++)h+=d[e.children[i]].state[o?"selected":"checked"];if(h!==j)break;e.state[o?"selected":"checked"]=!0,this._data[o?"core":"checkbox"].selected.push(e.id),m=this.get_node(e,!0),m&&m.length&&m.attr("aria-selected",!0).children(".jstree-anchor").addClass(o?"jstree-clicked":"jstree-checked"),e=this.get_node(e.parent)}}}this._data[o?"core":"checkbox"].selected=a.vakata.array_unique(this._data[o?"core":"checkbox"].selected)}.bind(this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",function(b,c){var d=this,e=c.node,f=this._model.data,g=this.get_node(e.parent),h,i,j,k,l=this.settings.checkbox.cascade,m=this.settings.checkbox.tie_selection,n={},o=this._data[m?"core":"checkbox"].selected;for(h=0,i=o.length;i>h;h++)n[o[h]]=!0;if(-1!==l.indexOf("down")){var p=this._cascade_new_checked_state(e.id,!0),q=e.children_d.concat(e.id);for(h=0,i=q.length;i>h;h++)p.indexOf(q[h])>-1?n[q[h]]=!0:delete n[q[h]]}if(-1!==l.indexOf("up"))while(g&&g.id!==a.jstree.root){for(j=0,h=0,i=g.children.length;i>h;h++)j+=f[g.children[h]].state[m?"selected":"checked"];if(j!==i)break;g.state[m?"selected":"checked"]=!0,n[g.id]=!0,k=this.get_node(g,!0),k&&k.length&&k.attr("aria-selected",!0).children(".jstree-anchor").addClass(m?"jstree-clicked":"jstree-checked"),g=this.get_node(g.parent)}o=[];for(h in n)n.hasOwnProperty(h)&&o.push(h);this._data[m?"core":"checkbox"].selected=o}.bind(this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",function(b,c){var d=this.get_node(a.jstree.root),e=this._model.data,f,g,h;for(f=0,g=d.children_d.length;g>f;f++)h=e[d.children_d[f]],h&&h.original&&h.original.state&&h.original.state.undetermined&&(h.original.state.undetermined=!1)}.bind(this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",function(b,c){var d=this,e=c.node,f=this.get_node(e,!0),g,h,i,j=this.settings.checkbox.cascade,k=this.settings.checkbox.tie_selection,l=this._data[k?"core":"checkbox"].selected,m={},n=[],o=e.children_d.concat(e.id);if(-1!==j.indexOf("down")){var p=this._cascade_new_checked_state(e.id,!1);l=a.vakata.array_filter(l,function(a){return-1===o.indexOf(a)||p.indexOf(a)>-1})}if(-1!==j.indexOf("up")&&-1===l.indexOf(e.id)){for(g=0,h=e.parents.length;h>g;g++)i=this._model.data[e.parents[g]],i.state[k?"selected":"checked"]=!1,i&&i.original&&i.original.state&&i.original.state.undetermined&&(i.original.state.undetermined=!1),i=this.get_node(e.parents[g],!0),i&&i.length&&i.attr("aria-selected",!1).children(".jstree-anchor").removeClass(k?"jstree-clicked":"jstree-checked");l=a.vakata.array_filter(l,function(a){return-1===e.parents.indexOf(a)})}this._data[k?"core":"checkbox"].selected=l}.bind(this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",function(b,c){var d=this.get_node(c.parent),e=this._model.data,f,g,h,i,j=this.settings.checkbox.tie_selection;while(d&&d.id!==a.jstree.root&&!d.state[j?"selected":"checked"]){for(h=0,f=0,g=d.children.length;g>f;f++)h+=e[d.children[f]].state[j?"selected":"checked"];if(!(g>0&&h===g))break;d.state[j?"selected":"checked"]=!0,this._data[j?"core":"checkbox"].selected.push(d.id),i=this.get_node(d,!0),i&&i.length&&i.attr("aria-selected",!0).children(".jstree-anchor").addClass(j?"jstree-clicked":"jstree-checked"),d=this.get_node(d.parent)}}.bind(this)).on("move_node.jstree",function(b,c){var d=c.is_multi,e=c.old_parent,f=this.get_node(c.parent),g=this._model.data,h,i,j,k,l,m=this.settings.checkbox.tie_selection;if(!d){h=this.get_node(e);while(h&&h.id!==a.jstree.root&&!h.state[m?"selected":"checked"]){for(i=0,j=0,k=h.children.length;k>j;j++)i+=g[h.children[j]].state[m?"selected":"checked"];if(!(k>0&&i===k))break;h.state[m?"selected":"checked"]=!0,this._data[m?"core":"checkbox"].selected.push(h.id),l=this.get_node(h,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(m?"jstree-clicked":"jstree-checked"),h=this.get_node(h.parent)}}h=f;while(h&&h.id!==a.jstree.root){for(i=0,j=0,k=h.children.length;k>j;j++)i+=g[h.children[j]].state[m?"selected":"checked"];if(i===k)h.state[m?"selected":"checked"]||(h.state[m?"selected":"checked"]=!0,this._data[m?"core":"checkbox"].selected.push(h.id),l=this.get_node(h,!0),l&&l.length&&l.attr("aria-selected",!0).children(".jstree-anchor").addClass(m?"jstree-clicked":"jstree-checked"));else{if(!h.state[m?"selected":"checked"])break;h.state[m?"selected":"checked"]=!1,this._data[m?"core":"checkbox"].selected=a.vakata.array_remove_item(this._data[m?"core":"checkbox"].selected,h.id),l=this.get_node(h,!0),l&&l.length&&l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(m?"jstree-clicked":"jstree-checked")}h=this.get_node(h.parent)}}.bind(this))},this.get_undetermined=function(c){if(-1===this.settings.checkbox.cascade.indexOf("undetermined"))return[];var d,e,f,g,h={},i=this._model.data,j=this.settings.checkbox.tie_selection,k=this._data[j?"core":"checkbox"].selected,l=[],m=this,n=[];for(d=0,e=k.length;e>d;d++)if(i[k[d]]&&i[k[d]].parents)for(f=0,g=i[k[d]].parents.length;g>f;f++){if(h[i[k[d]].parents[f]]!==b)break;i[k[d]].parents[f]!==a.jstree.root&&(h[i[k[d]].parents[f]]=!0,l.push(i[k[d]].parents[f]))}for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var c=m.get_node(this),j;if(c)if(c.state.loaded){for(d=0,e=c.children_d.length;e>d;d++)if(j=i[c.children_d[d]],!j.state.loaded&&j.original&&j.original.state&&j.original.state.undetermined&&j.original.state.undetermined===!0)for(h[j.id]===b&&j.id!==a.jstree.root&&(h[j.id]=!0,l.push(j.id)),f=0,g=j.parents.length;g>f;f++)h[j.parents[f]]===b&&j.parents[f]!==a.jstree.root&&(h[j.parents[f]]=!0,l.push(j.parents[f]))}else if(c.original&&c.original.state&&c.original.state.undetermined&&c.original.state.undetermined===!0)for(h[c.id]===b&&c.id!==a.jstree.root&&(h[c.id]=!0,l.push(c.id)),f=0,g=c.parents.length;g>f;f++)h[c.parents[f]]===b&&c.parents[f]!==a.jstree.root&&(h[c.parents[f]]=!0,l.push(c.parents[f]))}),d=0,e=l.length;e>d;d++)i[l[d]].state[j?"selected":"checked"]||n.push(c?i[l[d]]:l[d]);return n},this._undetermined=function(){if(null!==this.element){var a=this.get_undetermined(!1),b,c,d;for(this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),b=0,c=a.length;c>b;b++)d=this.get_node(a[b],!0),d&&d.length&&d.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined")}},this.redraw_node=function(a,b,c,e){if(a=d.redraw_node.apply(this,arguments)){var f,g,h=null,i=null;for(f=0,g=a.childNodes.length;g>f;f++)if(a.childNodes[f]&&a.childNodes[f].className&&-1!==a.childNodes[f].className.indexOf("jstree-anchor")){h=a.childNodes[f];break}h&&(!this.settings.checkbox.tie_selection&&this._model.data[a.id].state.checked&&(h.className+=" jstree-checked"),i=l.cloneNode(!1),this._model.data[a.id].state.checkbox_disabled&&(i.className+=" jstree-checkbox-disabled"),h.insertBefore(i,h.childNodes[0]))}return c||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(this._undetermined.bind(this),50)),a},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(b){b=this.get_node(b);var c=this.settings.checkbox.cascade,d,e,f=this.settings.checkbox.tie_selection,g=this._data[f?"core":"checkbox"].selected,h=this._model.data;if(!b||b.state[f?"selected":"checked"]===!0||-1===c.indexOf("undetermined")||-1===c.indexOf("down")&&-1===c.indexOf("up"))return!1;if(!b.state.loaded&&b.original.state.undetermined===!0)return!0;for(d=0,e=b.children_d.length;e>d;d++)if(-1!==a.inArray(b.children_d[d],g)||!h[b.children_d[d]].state.loaded&&h[b.children_d[d]].original.state.undetermined)return!0;return!1},this.disable_checkbox=function(b){var c,d,e;if(a.vakata.is_array(b)){for(b=b.slice(),c=0,d=b.length;d>c;c++)this.disable_checkbox(b[c]);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(e=this.get_node(b,!0),void(b.state.checkbox_disabled||(b.state.checkbox_disabled=!0,e&&e.length&&e.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-checkbox-disabled"),this.trigger("disable_checkbox",{node:b})))):!1},this.enable_checkbox=function(b){var c,d,e;if(a.vakata.is_array(b)){for(b=b.slice(),c=0,d=b.length;d>c;c++)this.enable_checkbox(b[c]);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(e=this.get_node(b,!0),void(b.state.checkbox_disabled&&(b.state.checkbox_disabled=!1,e&&e.length&&e.children(".jstree-anchor").children(".jstree-checkbox").removeClass("jstree-checkbox-disabled"),this.trigger("enable_checkbox",{node:b})))):!1},this.activate_node=function(b,c){return a(c.target).hasClass("jstree-checkbox-disabled")?!1:(this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||a(c.target).hasClass("jstree-checkbox"))&&(c.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!a(c.target).hasClass("jstree-checkbox")?d.activate_node.call(this,b,c):this.is_disabled(b)?!1:(this.is_checked(b)?this.uncheck_node(b,c):this.check_node(b,c),void this.trigger("activate_node",{node:this.get_node(b)})))},this._cascade_new_checked_state=function(a,b){var c=this,d=this.settings.checkbox.tie_selection,e=this._model.data[a],f=[],g=[],h,i,j;if(!this.settings.checkbox.cascade_to_disabled&&e.state.disabled||!this.settings.checkbox.cascade_to_hidden&&e.state.hidden)j=this.get_checked_descendants(a),e.state[d?"selected":"checked"]&&j.push(e.id),f=f.concat(j);else{if(e.children)for(h=0,i=e.children.length;i>h;h++){var k=e.children[h];j=c._cascade_new_checked_state(k,b),f=f.concat(j),j.indexOf(k)>-1&&g.push(k)}var l=c.get_node(e,!0),m=g.length>0&&g.length<e.children.length;e.original&&e.original.state&&e.original.state.undetermined&&(e.original.state.undetermined=m),m?(e.state[d?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked")):b&&g.length===e.children.length?(e.state[d?"selected":"checked"]=b,f.push(e.id),l.attr("aria-selected",!0).children(".jstree-anchor").addClass(d?"jstree-clicked":"jstree-checked")):(e.state[d?"selected":"checked"]=!1,l.attr("aria-selected",!1).children(".jstree-anchor").removeClass(d?"jstree-clicked":"jstree-checked"))}return f},this.get_checked_descendants=function(b){var c=this,d=c.settings.checkbox.tie_selection,e=c._model.data[b];return a.vakata.array_filter(e.children_d,function(a){return c._model.data[a].state[d?"selected":"checked"]})},this.check_node=function(b,c){if(this.settings.checkbox.tie_selection)return this.select_node(b,!1,!0,c);var d,e,f,g;if(a.vakata.is_array(b)){for(b=b.slice(),e=0,f=b.length;f>e;e++)this.check_node(b[e],c);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(d=this.get_node(b,!0),void(b.state.checked||(b.state.checked=!0,this._data.checkbox.selected.push(b.id),d&&d.length&&d.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:b,selected:this._data.checkbox.selected,event:c})))):!1},this.uncheck_node=function(b,c){if(this.settings.checkbox.tie_selection)return this.deselect_node(b,!1,c);var d,e,f;if(a.vakata.is_array(b)){for(b=b.slice(),d=0,e=b.length;e>d;d++)this.uncheck_node(b[d],c);return!0}return b=this.get_node(b),b&&b.id!==a.jstree.root?(f=this.get_node(b,!0),void(b.state.checked&&(b.state.checked=!1,this._data.checkbox.selected=a.vakata.array_remove_item(this._data.checkbox.selected,b.id),f.length&&f.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:b,selected:this._data.checkbox.selected,event:c})))):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection)return this.select_all();var b=this._data.checkbox.selected.concat([]),c,d;for(this._data.checkbox.selected=this._model.data[a.jstree.root].children_d.concat(),c=0,d=this._data.checkbox.selected.length;d>c;c++)this._model.data[this._data.checkbox.selected[c]]&&(this._model.data[this._data.checkbox.selected[c]].state.checked=!0);this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection)return this.deselect_all();var a=this._data.checkbox.selected.concat([]),b,c;for(b=0,c=this._data.checkbox.selected.length;c>b;b++)this._model.data[this._data.checkbox.selected[b]]&&(this._model.data[this._data.checkbox.selected[b]].state.checked=!1);this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:a})},this.is_checked=function(b){return this.settings.checkbox.tie_selection?this.is_selected(b):(b=this.get_node(b),b&&b.id!==a.jstree.root?b.state.checked:!1)},this.get_checked=function(b){return this.settings.checkbox.tie_selection?this.get_selected(b):b?a.map(this._data.checkbox.selected,function(a){return this.get_node(a)}.bind(this)):this._data.checkbox.selected.slice()},this.get_top_checked=function(b){if(this.settings.checkbox.tie_selection)return this.get_top_selected(b);var c=this.get_checked(!0),d={},e,f,g,h;for(e=0,f=c.length;f>e;e++)d[c[e].id]=c[e];for(e=0,f=c.length;f>e;e++)for(g=0,h=c[e].children_d.length;h>g;g++)d[c[e].children_d[g]]&&delete d[c[e].children_d[g]];c=[];for(e in d)d.hasOwnProperty(e)&&c.push(e);return b?a.map(c,function(a){return this.get_node(a)}.bind(this)):c},this.get_bottom_checked=function(b){if(this.settings.checkbox.tie_selection)return this.get_bottom_selected(b);var c=this.get_checked(!0),d=[],e,f;for(e=0,f=c.length;f>e;e++)c[e].children.length||d.push(c[e].id);return b?a.map(d,function(a){return this.get_node(a)}.bind(this)):d},this.load_node=function(b,c){var e,f,g,h,i,j;if(!a.vakata.is_array(b)&&!this.settings.checkbox.tie_selection&&(j=this.get_node(b),j&&j.state.loaded))for(e=0,f=j.children_d.length;f>e;e++)this._model.data[j.children_d[e]].state.checked&&(i=!0,this._data.checkbox.selected=a.vakata.array_remove_item(this._data.checkbox.selected,j.children_d[e]));return d.load_node.apply(this,arguments)},this.get_state=function(){var a=d.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?a:(a.checkbox=this._data.checkbox.selected.slice(),a)},this.set_state=function(b,c){var e=d.set_state.apply(this,arguments);if(e&&b.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var f=this;a.each(b.checkbox,function(a,b){f.check_node(b)})}return delete b.checkbox,this.set_state(b,c),!1}return e},this.refresh=function(a,b){return this.settings.checkbox.tie_selection&&(this._data.checkbox.selected=[]),d.refresh.apply(this,arguments)}},a.jstree.defaults.conditionalselect=function(){return!0},a.jstree.plugins.conditionalselect=function(a,b){this.activate_node=function(a,c){return this.settings.conditionalselect.call(this,this.get_node(a),c)?b.activate_node.call(this,a,c):void 0}},a.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(b,c){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.create_node(d,{},"last",function(a){try{c.edit(a)}catch(b){setTimeout(function(){c.edit(a)},0)}})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.edit(d)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.is_selected(d)?c.delete_node(c.get_selected()):c.delete_node(d)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.is_selected(d)?c.cut(c.get_top_selected()):c.cut(d)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.is_selected(d)?c.copy(c.get_top_selected()):c.copy(d)}},paste:{separator_before:!1,icon:!1,_disabled:function(b){return!a.jstree.reference(b.reference).can_paste()},separator_after:!1,label:"Paste",action:function(b){var c=a.jstree.reference(b.reference),d=c.get_node(b.reference);c.paste(d)}}}}}}},a.jstree.plugins.contextmenu=function(c,d){this.bind=function(){d.bind.call(this);var b=0,c=null,e,f;this.element.on("init.jstree loading.jstree ready.jstree",function(){this.get_container_ul().addClass("jstree-contextmenu")}.bind(this)).on("contextmenu.jstree",".jstree-anchor",function(a,d){"input"!==a.target.tagName.toLowerCase()&&(a.preventDefault(),b=a.ctrlKey?+new Date:0,(d||c)&&(b=+new Date+1e4),c&&clearTimeout(c),this.is_loading(a.currentTarget)||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY,a))}.bind(this)).on("click.jstree",".jstree-anchor",function(c){this._data.contextmenu.visible&&(!b||+new Date-b>250)&&a.vakata.context.hide(),b=0}.bind(this)).on("touchstart.jstree",".jstree-anchor",function(b){b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(e=b.originalEvent.changedTouches[0].clientX,f=b.originalEvent.changedTouches[0].clientY,c=setTimeout(function(){a(b.currentTarget).trigger("contextmenu",!0)},750))}).on("touchmove.vakata.jstree",function(b){c&&b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(Math.abs(e-b.originalEvent.changedTouches[0].clientX)>10||Math.abs(f-b.originalEvent.changedTouches[0].clientY)>10)&&(clearTimeout(c),a.vakata.context.hide())}).on("touchend.vakata.jstree",function(a){c&&clearTimeout(c)}),a(i).on("context_hide.vakata.jstree",function(b,c){this._data.contextmenu.visible=!1,a(c.reference).removeClass("jstree-context")}.bind(this))},this.teardown=function(){this._data.contextmenu.visible&&a.vakata.context.hide(),a(i).off("context_hide.vakata.jstree"),d.teardown.call(this)},this.show_contextmenu=function(c,d,e,f){if(c=this.get_node(c),!c||c.id===a.jstree.root)return!1;var g=this.settings.contextmenu,h=this.get_node(c,!0),i=h.children(".jstree-anchor"),j=!1,k=!1;(g.show_at_node||d===b||e===b)&&(j=i.offset(),d=j.left,e=j.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(c)&&this.activate_node(c,f),k=g.items,a.vakata.is_function(k)&&(k=k.call(this,c,function(a){this._show_contextmenu(c,d,e,a)}.bind(this))),a.isPlainObject(k)&&this._show_contextmenu(c,d,e,k)},this._show_contextmenu=function(b,c,d,e){
var f=this.get_node(b,!0),g=f.children(".jstree-anchor");a(i).one("context_show.vakata.jstree",function(b,c){var d="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";a(c.element).addClass(d),g.addClass("jstree-context")}.bind(this)),this._data.contextmenu.visible=!0,a.vakata.context.show(g,{x:c,y:d},e),this.trigger("show_contextmenu",{node:b,x:c,y:d})}},function(a){var b=!1,c={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};a.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(b){a(i).triggerHandler("context_"+b+".vakata",{reference:c.reference,element:c.element,position:{x:c.position_x,y:c.position_y}})},_execute:function(b){return b=c.items[b],b&&(!b._disabled||a.vakata.is_function(b._disabled)&&!b._disabled({item:b,reference:c.reference,element:c.element}))&&b.action?b.action.call(null,{item:b,reference:c.reference,element:c.element,position:{x:c.position_x,y:c.position_y}}):!1},_parse:function(b,d){if(!b)return!1;d||(c.html="",c.items=[]);var e="",f=!1,g;return d&&(e+="<ul>"),a.each(b,function(b,d){return d?(c.items.push(d),!f&&d.separator_before&&(e+="<li class='vakata-context-separator'><a href='#' "+(a.vakata.context.settings.icons?"":'class="vakata-context-no-icons"')+">&#160;</a></li>"),f=!1,e+="<li class='"+(d._class||"")+(d._disabled===!0||a.vakata.is_function(d._disabled)&&d._disabled({item:d,reference:c.reference,element:c.element})?" vakata-contextmenu-disabled ":"")+"' "+(d.shortcut?" data-shortcut='"+d.shortcut+"' ":"")+">",e+="<a href='#' rel='"+(c.items.length-1)+"' "+(d.title?"title='"+d.title+"'":"")+">",a.vakata.context.settings.icons&&(e+="<i ",d.icon&&(e+=-1!==d.icon.indexOf("/")||-1!==d.icon.indexOf(".")?" style='background:url(\""+d.icon+"\") center center no-repeat' ":" class='"+d.icon+"' "),e+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),e+=(a.vakata.is_function(d.label)?d.label({item:b,reference:c.reference,element:c.element}):d.label)+(d.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+d.shortcut+'">'+(d.shortcut_label||"")+"</span>":"")+"</a>",d.submenu&&(g=a.vakata.context._parse(d.submenu,!0),g&&(e+=g)),e+="</li>",void(d.separator_after&&(e+="<li class='vakata-context-separator'><a href='#' "+(a.vakata.context.settings.icons?"":'class="vakata-context-no-icons"')+">&#160;</a></li>",f=!0))):!0}),e=e.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),d&&(e+="</ul>"),d||(c.html=e,a.vakata.context._trigger("parse")),e.length>10?e:!1},_show_submenu:function(c){if(c=a(c),c.length&&c.children("ul").length){var d=c.children("ul"),e=c.offset().left,f=e+c.outerWidth(),g=c.offset().top,h=d.width(),i=d.height(),j=a(window).width()+a(window).scrollLeft(),k=a(window).height()+a(window).scrollTop();b?c[f-(h+10+c.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):c[f+h>j&&e>j-f?"addClass":"removeClass"]("vakata-context-right"),g+i+10>k&&d.css("bottom","-1px"),c.hasClass("vakata-context-right")?h>e&&d.css("margin-right",e-h):h>j-f&&d.css("margin-left",j-f-h),d.show()}},show:function(d,e,f){var g,h,j,k,l,m,n,o,p=!0;switch(c.element&&c.element.length&&c.element.width(""),p){case!e&&!d:return!1;case!!e&&!!d:c.reference=d,c.position_x=e.x,c.position_y=e.y;break;case!e&&!!d:c.reference=d,g=d.offset(),c.position_x=g.left+d.outerHeight(),c.position_y=g.top;break;case!!e&&!d:c.position_x=e.x,c.position_y=e.y}d&&!f&&a(d).data("vakata_contextmenu")&&(f=a(d).data("vakata_contextmenu")),a.vakata.context._parse(f)&&c.element.html(c.html),c.items.length&&(c.element.appendTo(i.body),h=c.element,j=c.position_x,k=c.position_y,l=h.width(),m=h.height(),n=a(window).width()+a(window).scrollLeft(),o=a(window).height()+a(window).scrollTop(),b&&(j-=h.outerWidth()-a(d).outerWidth(),j<a(window).scrollLeft()+20&&(j=a(window).scrollLeft()+20)),j+l+20>n&&(j=n-(l+20)),k+m+20>o&&(k=o-(m+20)),c.element.css({left:j,top:k}).show().find("a").first().trigger("focus").parent().addClass("vakata-context-hover"),c.is_visible=!0,a.vakata.context._trigger("show"))},hide:function(){c.is_visible&&(c.element.hide().find("ul").hide().end().find(":focus").trigger("blur").end().detach(),c.is_visible=!1,a.vakata.context._trigger("hide"))}},a(function(){b="rtl"===a(i.body).css("direction");var d=!1;c.element=a("<ul class='vakata-context'></ul>"),c.element.on("mouseenter","li",function(b){b.stopImmediatePropagation(),a.contains(this,b.relatedTarget)||(d&&clearTimeout(d),c.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),a(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),a.vakata.context._show_submenu(this))}).on("mouseleave","li",function(b){a.contains(this,b.relatedTarget)||a(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(b){a(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),a.vakata.context.settings.hide_onmouseleave&&(d=setTimeout(function(b){return function(){a.vakata.context.hide()}}(this),a.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(b){b.preventDefault(),a(this).trigger("blur").parent().hasClass("vakata-context-disabled")||a.vakata.context._execute(a(this).attr("rel"))===!1||a.vakata.context.hide()}).on("keydown","a",function(b){var d=null;switch(b.which){case 13:case 32:b.type="click",b.preventDefault(),a(b.currentTarget).trigger(b);break;case 37:c.is_visible&&(c.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").trigger("focus"),b.stopImmediatePropagation(),b.preventDefault());break;case 38:c.is_visible&&(d=c.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),d.length||(d=c.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),d.addClass("vakata-context-hover").children("a").trigger("focus"),b.stopImmediatePropagation(),b.preventDefault());break;case 39:c.is_visible&&(c.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").trigger("focus"),b.stopImmediatePropagation(),b.preventDefault());break;case 40:c.is_visible&&(d=c.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),d.length||(d=c.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),d.addClass("vakata-context-hover").children("a").trigger("focus"),b.stopImmediatePropagation(),b.preventDefault());break;case 27:a.vakata.context.hide(),b.preventDefault()}}).on("keydown",function(a){a.preventDefault();var b=c.element.find(".vakata-contextmenu-shortcut-"+a.which).parent();b.parent().not(".vakata-context-disabled")&&b.trigger("click")}),a(i).on("mousedown.vakata.jstree",function(b){c.is_visible&&c.element[0]!==b.target&&!a.contains(c.element[0],b.target)&&a.vakata.context.hide()}).on("context_show.vakata.jstree",function(a,d){c.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),b&&c.element.addClass("vakata-context-rtl").css("direction","rtl"),c.element.find("ul").hide().end()})})}(a),a.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0,large_drop_target:!1,large_drag_target:!1,use_html5:!1};var m,n;a.jstree.plugins.dnd=function(b,c){this.init=function(a,b){c.init.call(this,a,b),this.settings.dnd.use_html5=this.settings.dnd.use_html5&&"draggable"in i.createElement("span")},this.bind=function(){c.bind.call(this),this.element.on(this.settings.dnd.use_html5?"dragstart.jstree":"mousedown.jstree touchstart.jstree",this.settings.dnd.large_drag_target?".jstree-node":".jstree-anchor",function(b){if(this.settings.dnd.large_drag_target&&a(b.target).closest(".jstree-node")[0]!==b.currentTarget)return!0;if("touchstart"===b.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").hasClass("jstree-clicked")))return!0;var c=this.get_node(b.target),d=this.is_selected(c)&&this.settings.dnd.drag_selection?this.get_top_selected().length:1,e=d>1?d+" "+this.get_string("nodes"):this.get_text(b.currentTarget);if(this.settings.core.force_text&&(e=a.vakata.html.escape(e)),c&&c.id&&c.id!==a.jstree.root&&(1===b.which||"touchstart"===b.type||"dragstart"===b.type)&&(this.settings.dnd.is_draggable===!0||a.vakata.is_function(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,d>1?this.get_top_selected(!0):[c],b))){if(m={jstree:!0,origin:this,obj:this.get_node(c,!0),nodes:d>1?this.get_top_selected():[c.id]},n=b.currentTarget,!this.settings.dnd.use_html5)return this.element.trigger("mousedown.jstree"),a.vakata.dnd.start(b,m,'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+e+'<ins class="jstree-copy">+</ins></div>');a.vakata.dnd._trigger("start",b,{helper:a(),element:n,data:m})}}.bind(this)),this.settings.dnd.use_html5&&this.element.on("dragover.jstree",function(b){return b.preventDefault(),a.vakata.dnd._trigger("move",b,{helper:a(),element:n,data:m}),!1}).on("drop.jstree",function(b){return b.preventDefault(),a.vakata.dnd._trigger("stop",b,{helper:a(),element:n,data:m}),!1}.bind(this))},this.redraw_node=function(a,b,d,e){if(a=c.redraw_node.apply(this,arguments),a&&this.settings.dnd.use_html5)if(this.settings.dnd.large_drag_target)a.setAttribute("draggable",!0);else{var f,g,h=null;for(f=0,g=a.childNodes.length;g>f;f++)if(a.childNodes[f]&&a.childNodes[f].className&&-1!==a.childNodes[f].className.indexOf("jstree-anchor")){h=a.childNodes[f];break}h&&h.setAttribute("draggable",!0)}return a}},a(function(){var c=!1,d=!1,e=!1,f=!1,g=a('<div id="jstree-marker">&#160;</div>').hide();a(i).on("dragover.vakata.jstree",function(b){n&&a.vakata.dnd._trigger("move",b,{helper:a(),element:n,data:m})}).on("drop.vakata.jstree",function(b){n&&(a.vakata.dnd._trigger("stop",b,{helper:a(),element:n,data:m}),n=null,m=null)}).on("dnd_start.vakata.jstree",function(a,b){c=!1,e=!1,b&&b.data&&b.data.jstree&&g.appendTo(i.body)}).on("dnd_move.vakata.jstree",function(h,i){var j=i.event.target!==e.target;if(f&&(!i.event||"dragover"!==i.event.type||j)&&clearTimeout(f),i&&i.data&&i.data.jstree&&(!i.event.target.id||"jstree-marker"!==i.event.target.id)){e=i.event;var k=a.jstree.reference(i.event.target),l=!1,m=!1,n=!1,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;if(k&&k._data&&k._data.dnd)if(g.attr("class","jstree-"+k.get_theme()+(k.settings.core.themes.responsive?" jstree-dnd-responsive":"")),D=i.data.origin&&(i.data.origin.settings.dnd.always_copy||i.data.origin.settings.dnd.copy&&(i.event.metaKey||i.event.ctrlKey)),i.helper.children().attr("class","jstree-"+k.get_theme()+" jstree-"+k.get_theme()+"-"+k.get_theme_variant()+" "+(k.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[D?"show":"hide"](),i.event.target!==k.element[0]&&i.event.target!==k.get_container_ul()[0]||0!==k.get_container_ul().children().length){if(l=k.settings.dnd.large_drop_target?a(i.event.target).closest(".jstree-node").children(".jstree-anchor"):a(i.event.target).closest(".jstree-anchor"),l&&l.length&&l.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(m=l.offset(),n=(i.event.pageY!==b?i.event.pageY:i.event.originalEvent.pageY)-m.top,r=l.outerHeight(),u=r/3>n?["b","i","a"]:n>r-r/3?["a","i","b"]:n>r/2?["i","a","b"]:["i","b","a"],a.each(u,function(b,e){switch(e){case"b":p=m.left-6,q=m.top,s=k.get_parent(l),t=l.parent().index(),F="jstree-below";break;case"i":B=k.settings.dnd.inside_pos,C=k.get_node(l.parent()),p=m.left-2,q=m.top+r/2+1,s=C.id,t="first"===B?0:"last"===B?C.children.length:Math.min(B,C.children.length),F="jstree-inside";break;case"a":p=m.left-6,q=m.top+r,s=k.get_parent(l),t=l.parent().index()+1,F="jstree-above"}for(v=!0,w=0,x=i.data.nodes.length;x>w;w++)if(y=i.data.origin&&(i.data.origin.settings.dnd.always_copy||i.data.origin.settings.dnd.copy&&(i.event.metaKey||i.event.ctrlKey))?"copy_node":"move_node",z=t,"move_node"===y&&"a"===e&&i.data.origin&&i.data.origin===k&&s===k.get_parent(i.data.nodes[w])&&(A=k.get_node(s),z>a.inArray(i.data.nodes[w],A.children)&&(z-=1)),v=v&&(k&&k.settings&&k.settings.dnd&&k.settings.dnd.check_while_dragging===!1||k.check(y,i.data.origin&&i.data.origin!==k?i.data.origin.get_node(i.data.nodes[w]):i.data.nodes[w],s,z,{dnd:!0,ref:k.get_node(l.parent()),pos:e,origin:i.data.origin,is_multi:i.data.origin&&i.data.origin!==k,is_foreign:!i.data.origin})),!v){k&&k.last_error&&(d=k.last_error());break}return"i"===e&&l.parent().is(".jstree-closed")&&k.settings.dnd.open_timeout&&(!i.event||"dragover"!==i.event.type||j)&&(f&&clearTimeout(f),f=setTimeout(function(a,b){return function(){a.open_node(b)}}(k,l),k.settings.dnd.open_timeout)),v?(E=k.get_node(s,!0),E.hasClass(".jstree-dnd-parent")||(a(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),E.addClass("jstree-dnd-parent")),c={ins:k,par:s,pos:"i"!==e||"last"!==B||0!==t||k.is_loaded(C)?t:"last"},g.css({left:p+"px",top:q+"px"}).show(),g.removeClass("jstree-above jstree-inside jstree-below").addClass(F),i.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),i.event.originalEvent&&i.event.originalEvent.dataTransfer&&(i.event.originalEvent.dataTransfer.dropEffect=D?"copy":"move"),d={},u=!0,!1):void 0}),u===!0))return}else{for(v=!0,w=0,x=i.data.nodes.length;x>w;w++)if(v=v&&k.check(i.data.origin&&(i.data.origin.settings.dnd.always_copy||i.data.origin.settings.dnd.copy&&(i.event.metaKey||i.event.ctrlKey))?"copy_node":"move_node",i.data.origin&&i.data.origin!==k?i.data.origin.get_node(i.data.nodes[w]):i.data.nodes[w],a.jstree.root,"last",{dnd:!0,ref:k.get_node(a.jstree.root),pos:"i",origin:i.data.origin,is_multi:i.data.origin&&i.data.origin!==k,is_foreign:!i.data.origin}),!v)break;if(v)return c={ins:k,par:a.jstree.root,pos:"last"},g.hide(),i.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),void(i.event.originalEvent&&i.event.originalEvent.dataTransfer&&(i.event.originalEvent.dataTransfer.dropEffect=D?"copy":"move"))}a(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),c=!1,i.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),i.event.originalEvent&&i.event.originalEvent.dataTransfer,g.hide()}}).on("dnd_scroll.vakata.jstree",function(a,b){b&&b.data&&b.data.jstree&&(g.hide(),c=!1,e=!1,b.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(b,h){if(a(".jstree-dnd-parent").removeClass("jstree-dnd-parent"),f&&clearTimeout(f),h&&h.data&&h.data.jstree){g.hide().detach();var i,j,k=[];if(c){for(i=0,j=h.data.nodes.length;j>i;i++)k[i]=h.data.origin?h.data.origin.get_node(h.data.nodes[i]):h.data.nodes[i];c.ins[h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(h.event.metaKey||h.event.ctrlKey))?"copy_node":"move_node"](k,c.par,c.pos,!1,!1,!1,h.data.origin)}else i=a(h.event.target).closest(".jstree"),i.length&&d&&d.error&&"check"===d.error&&(i=i.jstree(!0),i&&i.settings.core.error.call(this,d));e=!1,c=!1}}).on("keyup.jstree keydown.jstree",function(b,h){h=a.vakata.dnd._get(),h&&h.data&&h.data.jstree&&("keyup"===b.type&&27===b.which?(f&&clearTimeout(f),c=!1,d=!1,e=!1,f=!1,g.hide().detach(),a.vakata.dnd._clean()):(h.helper.find(".jstree-copy").first()[h.data.origin&&(h.data.origin.settings.dnd.always_copy||h.data.origin.settings.dnd.copy&&(b.metaKey||b.ctrlKey))?"show":"hide"](),e&&(e.metaKey=b.metaKey,e.ctrlKey=b.ctrlKey,a.vakata.dnd._trigger("move",e))))})}),function(a){a.vakata.html={div:a("<div></div>"),escape:function(b){return a.vakata.html.div.text(b).html()},strip:function(b){return a.vakata.html.div.empty().append(a.parseHTML(b)).text()}};var c={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};a.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:10},_trigger:function(c,d,e){e===b&&(e=a.vakata.dnd._get()),e.event=d,a(i).triggerHandler("dnd_"+c+".vakata",e)},_get:function(){return{data:c.data,element:c.element,helper:c.helper}},_clean:function(){c.helper&&c.helper.remove(),c.scroll_i&&(clearInterval(c.scroll_i),c.scroll_i=!1),c={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},n=null,a(i).off("mousemove.vakata.jstree touchmove.vakata.jstree",a.vakata.dnd.drag),a(i).off("mouseup.vakata.jstree touchend.vakata.jstree",a.vakata.dnd.stop)},_scroll:function(b){if(!c.scroll_e||!c.scroll_l&&!c.scroll_t)return c.scroll_i&&(clearInterval(c.scroll_i),c.scroll_i=!1),!1;if(!c.scroll_i)return c.scroll_i=setInterval(a.vakata.dnd._scroll,100),!1;if(b===!0)return!1;var d=c.scroll_e.scrollTop(),e=c.scroll_e.scrollLeft();c.scroll_e.scrollTop(d+c.scroll_t*a.vakata.dnd.settings.scroll_speed),c.scroll_e.scrollLeft(e+c.scroll_l*a.vakata.dnd.settings.scroll_speed),(d!==c.scroll_e.scrollTop()||e!==c.scroll_e.scrollLeft())&&a.vakata.dnd._trigger("scroll",c.scroll_e)},start:function(b,d,e){"touchstart"===b.type&&b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(b.pageX=b.originalEvent.changedTouches[0].pageX,b.pageY=b.originalEvent.changedTouches[0].pageY,b.target=i.elementFromPoint(b.originalEvent.changedTouches[0].pageX-window.pageXOffset,b.originalEvent.changedTouches[0].pageY-window.pageYOffset)),c.is_drag&&a.vakata.dnd.stop({});try{b.currentTarget.unselectable="on",b.currentTarget.onselectstart=function(){return!1},b.currentTarget.style&&(b.currentTarget.style.touchAction="none",b.currentTarget.style.msTouchAction="none",b.currentTarget.style.MozUserSelect="none")}catch(f){}return c.init_x=b.pageX,c.init_y=b.pageY,c.data=d,c.is_down=!0,c.element=b.currentTarget,c.target=b.target,c.is_touch="touchstart"===b.type,e!==!1&&(c.helper=a("<div id='vakata-dnd'></div>").html(e).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),a(i).on("mousemove.vakata.jstree touchmove.vakata.jstree",a.vakata.dnd.drag),a(i).on("mouseup.vakata.jstree touchend.vakata.jstree",a.vakata.dnd.stop),!1},drag:function(b){if("touchmove"===b.type&&b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(b.pageX=b.originalEvent.changedTouches[0].pageX,b.pageY=b.originalEvent.changedTouches[0].pageY,b.target=i.elementFromPoint(b.originalEvent.changedTouches[0].pageX-window.pageXOffset,b.originalEvent.changedTouches[0].pageY-window.pageYOffset)),c.is_down){if(!c.is_drag){if(!(Math.abs(b.pageX-c.init_x)>(c.is_touch?a.vakata.dnd.settings.threshold_touch:a.vakata.dnd.settings.threshold)||Math.abs(b.pageY-c.init_y)>(c.is_touch?a.vakata.dnd.settings.threshold_touch:a.vakata.dnd.settings.threshold)))return;c.helper&&(c.helper.appendTo(i.body),c.helper_w=c.helper.outerWidth()),c.is_drag=!0,a(c.target).one("click.vakata",!1),a.vakata.dnd._trigger("start",b)}var d=!1,e=!1,f=!1,g=!1,h=!1,j=!1,k=!1,l=!1,m=!1,n=!1;return c.scroll_t=0,c.scroll_l=0,c.scroll_e=!1,a(a(b.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(a(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var d=a(this),e=d.offset();return this.scrollHeight>this.offsetHeight&&(e.top+d.height()-b.pageY<a.vakata.dnd.settings.scroll_proximity&&(c.scroll_t=1),b.pageY-e.top<a.vakata.dnd.settings.scroll_proximity&&(c.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(e.left+d.width()-b.pageX<a.vakata.dnd.settings.scroll_proximity&&(c.scroll_l=1),b.pageX-e.left<a.vakata.dnd.settings.scroll_proximity&&(c.scroll_l=-1)),c.scroll_t||c.scroll_l?(c.scroll_e=a(this),!1):void 0}),c.scroll_e||(d=a(i),e=a(window),f=d.height(),g=e.height(),h=d.width(),j=e.width(),k=d.scrollTop(),l=d.scrollLeft(),f>g&&b.pageY-k<a.vakata.dnd.settings.scroll_proximity&&(c.scroll_t=-1),f>g&&g-(b.pageY-k)<a.vakata.dnd.settings.scroll_proximity&&(c.scroll_t=1),h>j&&b.pageX-l<a.vakata.dnd.settings.scroll_proximity&&(c.scroll_l=-1),h>j&&j-(b.pageX-l)<a.vakata.dnd.settings.scroll_proximity&&(c.scroll_l=1),(c.scroll_t||c.scroll_l)&&(c.scroll_e=d)),c.scroll_e&&a.vakata.dnd._scroll(!0),c.helper&&(m=parseInt(b.pageY+a.vakata.dnd.settings.helper_top,10),n=parseInt(b.pageX+a.vakata.dnd.settings.helper_left,10),f&&m+25>f&&(m=f-50),h&&n+c.helper_w>h&&(n=h-(c.helper_w+2)),c.helper.css({left:n+"px",top:m+"px"})),a.vakata.dnd._trigger("move",b),!1}},stop:function(b){if("touchend"===b.type&&b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(b.pageX=b.originalEvent.changedTouches[0].pageX,b.pageY=b.originalEvent.changedTouches[0].pageY,b.target=i.elementFromPoint(b.originalEvent.changedTouches[0].pageX-window.pageXOffset,b.originalEvent.changedTouches[0].pageY-window.pageYOffset)),c.is_drag)b.target!==c.target&&a(c.target).off("click.vakata"),a.vakata.dnd._trigger("stop",b);else if("touchend"===b.type&&b.target===c.target){var d=setTimeout(function(){a(b.target).trigger("click")},100);a(b.target).one("click",function(){d&&clearTimeout(d)})}return a.vakata.dnd._clean(),!1}}}(a),a.jstree.defaults.massload=null,a.jstree.plugins.massload=function(b,c){this.init=function(a,b){this._data.massload={},c.init.call(this,a,b)},this._load_nodes=function(b,d,e,f){var g=this.settings.massload,h=[],i=this._model.data,j,k,l;if(!e){for(j=0,k=b.length;k>j;j++)(!i[b[j]]||!i[b[j]].state.loaded&&!i[b[j]].state.failed||f)&&(h.push(b[j]),l=this.get_node(b[j],!0),l&&l.length&&l.addClass("jstree-loading").attr("aria-busy",!0));if(this._data.massload={},h.length){if(a.vakata.is_function(g))return g.call(this,h,function(a){var g,h;if(a)for(g in a)a.hasOwnProperty(g)&&(this._data.massload[g]=a[g]);for(g=0,h=b.length;h>g;g++)l=this.get_node(b[g],!0),l&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);c._load_nodes.call(this,b,d,e,f)}.bind(this));if("object"==typeof g&&g&&g.url)return g=a.extend(!0,{},g),a.vakata.is_function(g.url)&&(g.url=g.url.call(this,h)),a.vakata.is_function(g.data)&&(g.data=g.data.call(this,h)),a.ajax(g).done(function(a,g,h){var i,j;if(a)for(i in a)a.hasOwnProperty(i)&&(this._data.massload[i]=a[i]);for(i=0,j=b.length;j>i;i++)l=this.get_node(b[i],!0),l&&l.length&&l.removeClass("jstree-loading").attr("aria-busy",!1);c._load_nodes.call(this,b,d,e,f)}.bind(this)).fail(function(a){c._load_nodes.call(this,b,d,e,f)}.bind(this))}}return c._load_nodes.call(this,b,d,e,f)},this._load_node=function(b,d){var e=this._data.massload[b.id],f=null,g;return e?(f=this["string"==typeof e?"_append_html_data":"_append_json_data"](b,"string"==typeof e?a(a.parseHTML(e)).filter(function(){return 3!==this.nodeType}):e,function(a){d.call(this,a)}),g=this.get_node(b.id,!0),g&&g.length&&g.removeClass("jstree-loading").attr("aria-busy",!1),delete this._data.massload[b.id],f):c._load_node.call(this,b,d)}},a.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,show_only_matches_children:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},a.jstree.plugins.search=function(c,d){this.bind=function(){d.bind.call(this),this._data.search.str="",this._data.search.dom=a(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this._data.search.smc=!1,this._data.search.hdn=[],this.element.on("search.jstree",function(b,c){if(this._data.search.som&&c.res.length){var d=this._model.data,e,f,g=[],h,i;for(e=0,f=c.res.length;f>e;e++)if(d[c.res[e]]&&!d[c.res[e]].state.hidden&&(g.push(c.res[e]),g=g.concat(d[c.res[e]].parents),this._data.search.smc))for(h=0,i=d[c.res[e]].children_d.length;i>h;h++)d[d[c.res[e]].children_d[h]]&&!d[d[c.res[e]].children_d[h]].state.hidden&&g.push(d[c.res[e]].children_d[h]);g=a.vakata.array_remove_item(a.vakata.array_unique(g),a.jstree.root),this._data.search.hdn=this.hide_all(!0),this.show_node(g,!0),this.redraw(!0)}}.bind(this)).on("clear_search.jstree",function(a,b){this._data.search.som&&b.res.length&&(this.show_node(this._data.search.hdn,!0),this.redraw(!0))}.bind(this))},this.search=function(c,d,e,f,g,h){if(c===!1||""===a.vakata.trim(c.toString()))return this.clear_search();f=this.get_node(f),f=f&&f.id?f.id:null,c=c.toString();var i=this.settings.search,j=i.ajax?i.ajax:!1,k=this._model.data,l=null,m=[],n=[],o,p;if(this._data.search.res.length&&!g&&this.clear_search(),e===b&&(e=i.show_only_matches),h===b&&(h=i.show_only_matches_children),!d&&j!==!1)return a.vakata.is_function(j)?j.call(this,c,function(b){b&&b.d&&(b=b.d),this._load_nodes(a.vakata.is_array(b)?a.vakata.array_unique(b):[],function(){this.search(c,!0,e,f,g,h)})}.bind(this),f):(j=a.extend({},j),j.data||(j.data={}),j.data.str=c,f&&(j.data.inside=f),this._data.search.lastRequest&&this._data.search.lastRequest.abort(),this._data.search.lastRequest=a.ajax(j).fail(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(j)},this.settings.core.error.call(this,this._data.core.last_error)}.bind(this)).done(function(b){b&&b.d&&(b=b.d),this._load_nodes(a.vakata.is_array(b)?a.vakata.array_unique(b):[],function(){this.search(c,!0,e,f,g,h)})}.bind(this)),this._data.search.lastRequest);if(g||(this._data.search.str=c,this._data.search.dom=a(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=e,this._data.search.smc=h),l=new a.vakata.search(c,!0,{caseSensitive:i.case_sensitive,fuzzy:i.fuzzy}),a.each(k[f?f:a.jstree.root].children_d,function(a,b){var d=k[b];d.text&&!d.state.hidden&&(!i.search_leaves_only||d.state.loaded&&0===d.children.length)&&(i.search_callback&&i.search_callback.call(this,c,d)||!i.search_callback&&l.search(d.text).isMatch)&&(m.push(b),n=n.concat(d.parents))}),m.length){for(n=a.vakata.array_unique(n),o=0,p=n.length;p>o;o++)n[o]!==a.jstree.root&&k[n[o]]&&this.open_node(n[o],null,0)===!0&&this._data.search.opn.push(n[o]);g?(this._data.search.dom=this._data.search.dom.add(a(this.element[0].querySelectorAll("#"+a.map(m,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #")))),this._data.search.res=a.vakata.array_unique(this._data.search.res.concat(m))):(this._data.search.dom=a(this.element[0].querySelectorAll("#"+a.map(m,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=m),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")}this.trigger("search",{nodes:this._data.search.dom,str:c,res:this._data.search.res,show_only_matches:e})},this.clear_search=function(){this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.res.length&&(this._data.search.dom=a(this.element[0].querySelectorAll("#"+a.map(this._data.search.res,function(b){return-1!=="0123456789".indexOf(b[0])?"\\3"+b[0]+" "+b.substr(1).replace(a.jstree.idregex,"\\$&"):b.replace(a.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search")),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=a()},this.redraw_node=function(b,c,e,f){if(b=d.redraw_node.apply(this,arguments),b&&-1!==a.inArray(b.id,this._data.search.res)){var g,h,i=null;for(g=0,h=b.childNodes.length;h>g;g++)if(b.childNodes[g]&&b.childNodes[g].className&&-1!==b.childNodes[g].className.indexOf("jstree-anchor")){i=b.childNodes[g];break}i&&(i.className+=" jstree-search")}return b}},function(a){a.vakata.search=function(b,c,d){d=d||{},d=a.extend({},a.vakata.search.defaults,d),d.fuzzy!==!1&&(d.fuzzy=!0),b=d.caseSensitive?b:b.toLowerCase();var e=d.location,f=d.distance,g=d.threshold,h=b.length,i,j,k,l;return h>32&&(d.fuzzy=!1),d.fuzzy&&(i=1<<h-1,j=function(){var a={},c=0;for(c=0;h>c;c++)a[b.charAt(c)]=0;for(c=0;h>c;c++)a[b.charAt(c)]|=1<<h-c-1;return a}(),k=function(a,b){var c=a/h,d=Math.abs(e-b);return f?c+d/f:d?1:c}),l=function(a){if(a=d.caseSensitive?a:a.toLowerCase(),b===a||-1!==a.indexOf(b))return{isMatch:!0,score:0};if(!d.fuzzy)return{isMatch:!1,score:1};var c,f,l=a.length,m=g,n=a.indexOf(b,e),o,p,q=h+l,r,s,t,u,v,w=1,x=[];for(-1!==n&&(m=Math.min(k(0,n),m),n=a.lastIndexOf(b,e+h),-1!==n&&(m=Math.min(k(0,n),m))),n=-1,c=0;h>c;c++){o=0,p=q;while(p>o)k(c,e+p)<=m?o=p:q=p,p=Math.floor((q-o)/2+o);for(q=p,s=Math.max(1,e-p+1),t=Math.min(e+p,l)+h,u=new Array(t+2),u[t+1]=(1<<c)-1,f=t;f>=s;f--)if(v=j[a.charAt(f-1)],0===c?u[f]=(u[f+1]<<1|1)&v:u[f]=(u[f+1]<<1|1)&v|((r[f+1]|r[f])<<1|1)|r[f+1],u[f]&i&&(w=k(c,f-1),m>=w)){if(m=w,n=f-1,x.push(n),!(n>e))break;s=Math.max(1,2*e-n)}if(k(c+1,e)>m)break;r=u}return{isMatch:n>=0,score:w}},c===!0?{search:l}:l(c)},a.vakata.search.defaults={location:0,distance:100,threshold:.6,fuzzy:!1,caseSensitive:!1}}(a),a.jstree.defaults.sort=function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},a.jstree.plugins.sort=function(a,b){this.bind=function(){b.bind.call(this),this.element.on("model.jstree",function(a,b){this.sort(b.parent,!0)}.bind(this)).on("rename_node.jstree create_node.jstree",function(a,b){this.sort(b.parent||b.node.parent,!1),this.redraw_node(b.parent||b.node.parent,!0)}.bind(this)).on("move_node.jstree copy_node.jstree",function(a,b){this.sort(b.parent,!1),this.redraw_node(b.parent,!0)}.bind(this))},this.sort=function(a,b){var c,d;if(a=this.get_node(a),a&&a.children&&a.children.length&&(a.children.sort(this.settings.sort.bind(this)),b))for(c=0,d=a.children_d.length;d>c;c++)this.sort(a.children_d[c],!1)}};var o=!1;a.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1,preserve_loaded:!1},a.jstree.plugins.state=function(b,c){this.bind=function(){c.bind.call(this);var a=function(){this.element.on(this.settings.state.events,function(){o&&clearTimeout(o),o=setTimeout(function(){this.save_state()}.bind(this),100)}.bind(this)),this.trigger("state_ready")}.bind(this);this.element.on("ready.jstree",function(b,c){this.element.one("restore_state.jstree",a),this.restore_state()||a()}.bind(this))},this.save_state=function(){var b=this.get_state();this.settings.state.preserve_loaded||delete b.core.loaded;var c={state:b,ttl:this.settings.state.ttl,sec:+new Date};a.vakata.storage.set(this.settings.state.key,JSON.stringify(c))},this.restore_state=function(){var b=a.vakata.storage.get(this.settings.state.key);if(b)try{b=JSON.parse(b)}catch(c){return!1}return b&&b.ttl&&b.sec&&+new Date-b.sec>b.ttl?!1:(b&&b.state&&(b=b.state),b&&a.vakata.is_function(this.settings.state.filter)&&(b=this.settings.state.filter.call(this,b)),b?(this.settings.state.preserve_loaded||delete b.core.loaded,this.element.one("set_state.jstree",function(c,d){d.instance.trigger("restore_state",{state:a.extend(!0,{},b)})}),this.set_state(b),!0):!1)},this.clear_state=function(){return a.vakata.storage.del(this.settings.state.key)}},function(a,b){a.vakata.storage={set:function(a,b){return window.localStorage.setItem(a,b)},get:function(a){return window.localStorage.getItem(a)},del:function(a){return window.localStorage.removeItem(a)}}}(a),a.jstree.defaults.types={
"default":{}},a.jstree.defaults.types[a.jstree.root]={},a.jstree.plugins.types=function(c,d){this.init=function(c,e){var f,g;if(e&&e.types&&e.types["default"])for(f in e.types)if("default"!==f&&f!==a.jstree.root&&e.types.hasOwnProperty(f))for(g in e.types["default"])e.types["default"].hasOwnProperty(g)&&e.types[f][g]===b&&(e.types[f][g]=e.types["default"][g]);d.init.call(this,c,e),this._model.data[a.jstree.root].type=a.jstree.root},this.refresh=function(b,c){d.refresh.call(this,b,c),this._model.data[a.jstree.root].type=a.jstree.root},this.bind=function(){this.element.on("model.jstree",function(c,d){var e=this._model.data,f=d.nodes,g=this.settings.types,h,i,j="default",k;for(h=0,i=f.length;i>h;h++){if(j="default",e[f[h]].original&&e[f[h]].original.type&&g[e[f[h]].original.type]&&(j=e[f[h]].original.type),e[f[h]].data&&e[f[h]].data.jstree&&e[f[h]].data.jstree.type&&g[e[f[h]].data.jstree.type]&&(j=e[f[h]].data.jstree.type),e[f[h]].type=j,e[f[h]].icon===!0&&g[j].icon!==b&&(e[f[h]].icon=g[j].icon),g[j].li_attr!==b&&"object"==typeof g[j].li_attr)for(k in g[j].li_attr)if(g[j].li_attr.hasOwnProperty(k)){if("id"===k)continue;e[f[h]].li_attr[k]===b?e[f[h]].li_attr[k]=g[j].li_attr[k]:"class"===k&&(e[f[h]].li_attr["class"]=g[j].li_attr["class"]+" "+e[f[h]].li_attr["class"])}if(g[j].a_attr!==b&&"object"==typeof g[j].a_attr)for(k in g[j].a_attr)if(g[j].a_attr.hasOwnProperty(k)){if("id"===k)continue;e[f[h]].a_attr[k]===b?e[f[h]].a_attr[k]=g[j].a_attr[k]:"href"===k&&"#"===e[f[h]].a_attr[k]?e[f[h]].a_attr.href=g[j].a_attr.href:"class"===k&&(e[f[h]].a_attr["class"]=g[j].a_attr["class"]+" "+e[f[h]].a_attr["class"])}}e[a.jstree.root].type=a.jstree.root}.bind(this)),d.bind.call(this)},this.get_json=function(b,c,e){var f,g,h=this._model.data,i=c?a.extend(!0,{},c,{no_id:!1}):{},j=d.get_json.call(this,b,i,e);if(j===!1)return!1;if(a.vakata.is_array(j))for(f=0,g=j.length;g>f;f++)j[f].type=j[f].id&&h[j[f].id]&&h[j[f].id].type?h[j[f].id].type:"default",c&&c.no_id&&(delete j[f].id,j[f].li_attr&&j[f].li_attr.id&&delete j[f].li_attr.id,j[f].a_attr&&j[f].a_attr.id&&delete j[f].a_attr.id);else j.type=j.id&&h[j.id]&&h[j.id].type?h[j.id].type:"default",c&&c.no_id&&(j=this._delete_ids(j));return j},this._delete_ids=function(b){if(a.vakata.is_array(b)){for(var c=0,d=b.length;d>c;c++)b[c]=this._delete_ids(b[c]);return b}return delete b.id,b.li_attr&&b.li_attr.id&&delete b.li_attr.id,b.a_attr&&b.a_attr.id&&delete b.a_attr.id,b.children&&a.vakata.is_array(b.children)&&(b.children=this._delete_ids(b.children)),b},this.check=function(c,e,f,g,h){if(d.check.call(this,c,e,f,g,h)===!1)return!1;e=e&&e.id?e:this.get_node(e),f=f&&f.id?f:this.get_node(f);var i=e&&e.id?h&&h.origin?h.origin:a.jstree.reference(e.id):null,j,k,l,m;switch(i=i&&i._model&&i._model.data?i._model.data:null,c){case"create_node":case"move_node":case"copy_node":if("move_node"!==c||-1===a.inArray(e.id,f.children)){if(j=this.get_rules(f),j.max_children!==b&&-1!==j.max_children&&j.max_children===f.children.length)return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+c,data:JSON.stringify({chk:c,pos:g,obj:e&&e.id?e.id:!1,par:f&&f.id?f.id:!1})},!1;if(j.valid_children!==b&&-1!==j.valid_children&&-1===a.inArray(e.type||"default",j.valid_children))return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+c,data:JSON.stringify({chk:c,pos:g,obj:e&&e.id?e.id:!1,par:f&&f.id?f.id:!1})},!1;if(i&&e.children_d&&e.parents){for(k=0,l=0,m=e.children_d.length;m>l;l++)k=Math.max(k,i[e.children_d[l]].parents.length);k=k-e.parents.length+1}(0>=k||k===b)&&(k=1);do{if(j.max_depth!==b&&-1!==j.max_depth&&j.max_depth<k)return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+c,data:JSON.stringify({chk:c,pos:g,obj:e&&e.id?e.id:!1,par:f&&f.id?f.id:!1})},!1;f=this.get_node(f.parent),j=this.get_rules(f),k++}while(f)}}return!0},this.get_rules=function(a){if(a=this.get_node(a),!a)return!1;var c=this.get_type(a,!0);return c.max_depth===b&&(c.max_depth=-1),c.max_children===b&&(c.max_children=-1),c.valid_children===b&&(c.valid_children=-1),c},this.get_type=function(b,c){return b=this.get_node(b),b?c?a.extend({type:b.type},this.settings.types[b.type]):b.type:!1},this.set_type=function(c,d){var e=this._model.data,f,g,h,i,j,k,l,m;if(a.vakata.is_array(c)){for(c=c.slice(),g=0,h=c.length;h>g;g++)this.set_type(c[g],d);return!0}if(f=this.settings.types,c=this.get_node(c),!f[d]||!c)return!1;if(l=this.get_node(c,!0),l&&l.length&&(m=l.children(".jstree-anchor")),i=c.type,j=this.get_icon(c),c.type=d,(j===!0||!f[i]||f[i].icon!==b&&j===f[i].icon)&&this.set_icon(c,f[d].icon!==b?f[d].icon:!0),f[i]&&f[i].li_attr!==b&&"object"==typeof f[i].li_attr)for(k in f[i].li_attr)if(f[i].li_attr.hasOwnProperty(k)){if("id"===k)continue;"class"===k?(e[c.id].li_attr["class"]=(e[c.id].li_attr["class"]||"").replace(f[i].li_attr[k],""),l&&l.removeClass(f[i].li_attr[k])):e[c.id].li_attr[k]===f[i].li_attr[k]&&(e[c.id].li_attr[k]=null,l&&l.removeAttr(k))}if(f[i]&&f[i].a_attr!==b&&"object"==typeof f[i].a_attr)for(k in f[i].a_attr)if(f[i].a_attr.hasOwnProperty(k)){if("id"===k)continue;"class"===k?(e[c.id].a_attr["class"]=(e[c.id].a_attr["class"]||"").replace(f[i].a_attr[k],""),m&&m.removeClass(f[i].a_attr[k])):e[c.id].a_attr[k]===f[i].a_attr[k]&&("href"===k?(e[c.id].a_attr[k]="#",m&&m.attr("href","#")):(delete e[c.id].a_attr[k],m&&m.removeAttr(k)))}if(f[d].li_attr!==b&&"object"==typeof f[d].li_attr)for(k in f[d].li_attr)if(f[d].li_attr.hasOwnProperty(k)){if("id"===k)continue;e[c.id].li_attr[k]===b?(e[c.id].li_attr[k]=f[d].li_attr[k],l&&("class"===k?l.addClass(f[d].li_attr[k]):l.attr(k,f[d].li_attr[k]))):"class"===k&&(e[c.id].li_attr["class"]=f[d].li_attr[k]+" "+e[c.id].li_attr["class"],l&&l.addClass(f[d].li_attr[k]))}if(f[d].a_attr!==b&&"object"==typeof f[d].a_attr)for(k in f[d].a_attr)if(f[d].a_attr.hasOwnProperty(k)){if("id"===k)continue;e[c.id].a_attr[k]===b?(e[c.id].a_attr[k]=f[d].a_attr[k],m&&("class"===k?m.addClass(f[d].a_attr[k]):m.attr(k,f[d].a_attr[k]))):"href"===k&&"#"===e[c.id].a_attr[k]?(e[c.id].a_attr.href=f[d].a_attr.href,m&&m.attr("href",f[d].a_attr.href)):"class"===k&&(e[c.id].a_attr["class"]=f[d].a_attr["class"]+" "+e[c.id].a_attr["class"],m&&m.addClass(f[d].a_attr[k]))}return!0}},a.jstree.defaults.unique={case_sensitive:!1,trim_whitespace:!1,duplicate:function(a,b){return a+" ("+b+")"}},a.jstree.plugins.unique=function(c,d){this.check=function(b,c,e,f,g){if(d.check.call(this,b,c,e,f,g)===!1)return!1;if(c=c&&c.id?c:this.get_node(c),e=e&&e.id?e:this.get_node(e),!e||!e.children)return!0;var h="rename_node"===b?f:c.text,i=[],j=this.settings.unique.case_sensitive,k=this.settings.unique.trim_whitespace,l=this._model.data,m,n,o;for(m=0,n=e.children.length;n>m;m++)o=l[e.children[m]].text,j||(o=o.toLowerCase()),k&&(o=o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),i.push(o);switch(j||(h=h.toLowerCase()),k&&(h=h.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),b){case"delete_node":return!0;case"rename_node":return o=c.text||"",j||(o=o.toLowerCase()),k&&(o=o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),m=-1===a.inArray(h,i)||c.text&&o===h,m||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+h+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:f,obj:c&&c.id?c.id:!1,par:e&&e.id?e.id:!1})}),m;case"create_node":return m=-1===a.inArray(h,i),m||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+h+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:f,obj:c&&c.id?c.id:!1,par:e&&e.id?e.id:!1})}),m;case"copy_node":return m=-1===a.inArray(h,i),m||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+h+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:f,obj:c&&c.id?c.id:!1,par:e&&e.id?e.id:!1})}),m;case"move_node":return m=c.parent===e.id&&(!g||!g.is_multi)||-1===a.inArray(h,i),m||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+h+" already exists. Preventing: "+b,data:JSON.stringify({chk:b,pos:f,obj:c&&c.id?c.id:!1,par:e&&e.id?e.id:!1})}),m}return!0},this.create_node=function(c,e,f,g,h){if(!e||e.text===b){if(null===c&&(c=a.jstree.root),c=this.get_node(c),!c)return d.create_node.call(this,c,e,f,g,h);if(f=f===b?"last":f,!f.toString().match(/^(before|after)$/)&&!h&&!this.is_loaded(c))return d.create_node.call(this,c,e,f,g,h);e||(e={});var i,j,k,l,m,n=this._model.data,o=this.settings.unique.case_sensitive,p=this.settings.unique.trim_whitespace,q=this.settings.unique.duplicate,r;for(j=i=this.get_string("New node"),k=[],l=0,m=c.children.length;m>l;l++)r=n[c.children[l]].text,o||(r=r.toLowerCase()),p&&(r=r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")),k.push(r);l=1,r=j,o||(r=r.toLowerCase()),p&&(r=r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));while(-1!==a.inArray(r,k))j=q.call(this,i,++l).toString(),r=j,o||(r=r.toLowerCase()),p&&(r=r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""));e.text=j}return d.create_node.call(this,c,e,f,g,h)}};var p=i.createElement("DIV");if(p.setAttribute("unselectable","on"),p.setAttribute("role","presentation"),p.className="jstree-wholerow",p.innerHTML="&#160;",a.jstree.plugins.wholerow=function(b,c){this.bind=function(){c.bind.call(this),this.element.on("ready.jstree set_state.jstree",function(){this.hide_dots()}.bind(this)).on("init.jstree loading.jstree ready.jstree",function(){this.get_container_ul().addClass("jstree-wholerow-ul")}.bind(this)).on("deselect_all.jstree",function(a,b){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")}.bind(this)).on("changed.jstree",function(a,b){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var c=!1,d,e;for(d=0,e=b.selected.length;e>d;d++)c=this.get_node(b.selected[d],!0),c&&c.length&&c.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}.bind(this)).on("open_node.jstree",function(a,b){this.get_node(b.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}.bind(this)).on("hover_node.jstree dehover_node.jstree",function(a,b){"hover_node"===a.type&&this.is_disabled(b.node)||this.get_node(b.node,!0).children(".jstree-wholerow")["hover_node"===a.type?"addClass":"removeClass"]("jstree-wholerow-hovered")}.bind(this)).on("contextmenu.jstree",".jstree-wholerow",function(b){if(this._data.contextmenu){b.preventDefault();var c=a.Event("contextmenu",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey,pageX:b.pageX,pageY:b.pageY});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c)}}.bind(this)).on("click.jstree",".jstree-wholerow",function(b){b.stopImmediatePropagation();var c=a.Event("click",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c).trigger("focus")}).on("dblclick.jstree",".jstree-wholerow",function(b){b.stopImmediatePropagation();var c=a.Event("dblclick",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c).trigger("focus")}).on("click.jstree",".jstree-leaf > .jstree-ocl",function(b){b.stopImmediatePropagation();var c=a.Event("click",{metaKey:b.metaKey,ctrlKey:b.ctrlKey,altKey:b.altKey,shiftKey:b.shiftKey});a(b.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(c).trigger("focus")}.bind(this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",function(a){return a.stopImmediatePropagation(),this.is_disabled(a.currentTarget)||this.hover_node(a.currentTarget),!1}.bind(this)).on("mouseleave.jstree",".jstree-node",function(a){this.dehover_node(a.currentTarget)}.bind(this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),c.teardown.call(this)},this.redraw_node=function(b,d,e,f){if(b=c.redraw_node.apply(this,arguments)){var g=p.cloneNode(!0);-1!==a.inArray(b.id,this._data.core.selected)&&(g.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===b.id&&(g.className+=" jstree-wholerow-hovered"),b.insertBefore(g,b.childNodes[0])}return b}},window.customElements&&Object&&Object.create){var q=Object.create(HTMLElement.prototype);q.createdCallback=function(){var b={core:{},plugins:[]},c;for(c in a.jstree.plugins)a.jstree.plugins.hasOwnProperty(c)&&this.attributes[c]&&(b.plugins.push(c),this.getAttribute(c)&&JSON.parse(this.getAttribute(c))&&(b[c]=JSON.parse(this.getAttribute(c))));for(c in a.jstree.defaults.core)a.jstree.defaults.core.hasOwnProperty(c)&&this.attributes[c]&&(b.core[c]=JSON.parse(this.getAttribute(c))||this.getAttribute(c));a(this).jstree(b)};try{window.customElements.define("vakata-jstree",function(){},{prototype:q})}catch(r){}}}});

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9XZWJwYWNrQ2hpYXJhLy4vbm9kZV9tb2R1bGVzL2pzdHJlZS9kaXN0L2pzdHJlZS5taW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQSxhQUFhLGFBQWEsS0FBcUMsQ0FBQyxpQ0FBTyxDQUFDLDZFQUFRLENBQUMsb0NBQUMsQ0FBQztBQUFBO0FBQUE7QUFBQSxvR0FBQyxDQUFDLFNBQXdGLENBQUMsZUFBZSxhQUFhLGNBQWMsb0hBQW9ILHdCQUF3QixxQkFBcUIsWUFBWSwyQkFBMkIsV0FBVyxXQUFXLDJGQUEyRixXQUFXLGdCQUFnQiwrQkFBK0IsaUNBQWlDLHVCQUF1Qix5RkFBeUYsaUNBQWlDLHNDQUFzQyw2QkFBNkIsMERBQTBELDJCQUEyQixrREFBa0QsTUFBTSxRQUFRLHFDQUFxQywwQkFBMEIsMkNBQTJDLGdDQUFnQyxrQkFBa0IsZ0VBQWdFLE9BQU8sVUFBVSxxQkFBcUIsNENBQTRDLFVBQVUsMkdBQTJHLDZCQUE2QiwyQ0FBMkMsSUFBSSx5QkFBeUIsMEVBQTBFLGlEQUFpRCxnREFBZ0QsK0lBQStJLDZCQUE2Qix1REFBdUQsbUJBQW1CLHlEQUF5RCwwQkFBMEIsb0ZBQW9GLHVGQUF1RiwrSUFBK0kseUJBQXlCLDZDQUE2QyxtQkFBbUIsNkNBQTZDLGtCQUFrQixxRkFBcUYsS0FBSyx1Q0FBdUMsMEZBQTBGLGdCQUFnQixtQkFBbUIseUNBQXlDLDJEQUEyRCxtQkFBbUIsaUdBQWlHLGdFQUFnRSxFQUFFLHVDQUF1Qyx3RUFBd0UsdUVBQXVFLGtCQUFrQixtQkFBbUIseUNBQXlDLDJEQUEyRCxpQkFBaUIsZ0JBQWdCLGtCQUFrQixtQkFBbUIsbURBQW1ELHVFQUF1RSxpQkFBaUIsa0dBQWtHLGdCQUFnQixnREFBZ0QsMEJBQTBCLHFCQUFxQiwwQkFBMEIsMEJBQTBCLHNDQUFzQyxvQkFBb0IsYUFBYSxPQUFPLGtFQUFrRSw2Q0FBNkMsa0NBQWtDLHlFQUF5RSxXQUFXLHNuQkFBc25CLDBF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LjI4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyohIGpzVHJlZSAtIHYzLjMuMTIgLSAyMDIxLTA5LTAzIC0gKE1JVCkgKi9cclxuIWZ1bmN0aW9uKGEpe1widXNlIHN0cmljdFwiO1wiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW1wianF1ZXJ5XCJdLGEpOlwidW5kZWZpbmVkXCIhPXR5cGVvZiBtb2R1bGUmJm1vZHVsZS5leHBvcnRzP21vZHVsZS5leHBvcnRzPWEocmVxdWlyZShcImpxdWVyeVwiKSk6YShqUXVlcnkpfShmdW5jdGlvbihhLGIpe1widXNlIHN0cmljdFwiO2lmKCFhLmpzdHJlZSl7dmFyIGM9MCxkPSExLGU9ITEsZj0hMSxnPVtdLGg9YShcInNjcmlwdDpsYXN0XCIpLmF0dHIoXCJzcmNcIiksaT13aW5kb3cuZG9jdW1lbnQsaj13aW5kb3cuc2V0SW1tZWRpYXRlLGs9d2luZG93LlByb21pc2U7IWomJmsmJihqPWZ1bmN0aW9uKGEsYil7ay5yZXNvbHZlKGIpLnRoZW4oYSl9KSxhLmpzdHJlZT17dmVyc2lvbjpcIjMuMy4xMlwiLGRlZmF1bHRzOntwbHVnaW5zOltdfSxwbHVnaW5zOnt9LHBhdGg6aCYmLTEhPT1oLmluZGV4T2YoXCIvXCIpP2gucmVwbGFjZSgvXFwvW15cXC9dKyQvLFwiXCIpOlwiXCIsaWRyZWdleDovW1xcXFw6JiFefCgpXFxbXFxdPD5AKicrfiNcIjsuLD1cXC0gXFwvJHt9JT9gXS9nLHJvb3Q6XCIjXCJ9LGEuanN0cmVlLmNyZWF0ZT1mdW5jdGlvbihiLGQpe3ZhciBlPW5ldyBhLmpzdHJlZS5jb3JlKCsrYyksZj1kO3JldHVybiBkPWEuZXh0ZW5kKCEwLHt9LGEuanN0cmVlLmRlZmF1bHRzLGQpLGYmJmYucGx1Z2lucyYmKGQucGx1Z2lucz1mLnBsdWdpbnMpLGEuZWFjaChkLnBsdWdpbnMsZnVuY3Rpb24oYSxiKXtcImNvcmVcIiE9PWEmJihlPWUucGx1Z2luKGIsZFtiXSkpfSksYShiKS5kYXRhKFwianN0cmVlXCIsZSksZS5pbml0KGIsZCksZX0sYS5qc3RyZWUuZGVzdHJveT1mdW5jdGlvbigpe2EoXCIuanN0cmVlOmpzdHJlZVwiKS5qc3RyZWUoXCJkZXN0cm95XCIpLGEoaSkub2ZmKFwiLmpzdHJlZVwiKX0sYS5qc3RyZWUuY29yZT1mdW5jdGlvbihhKXt0aGlzLl9pZD1hLHRoaXMuX2NudD0wLHRoaXMuX3dyaz1udWxsLHRoaXMuX2RhdGE9e2NvcmU6e3RoZW1lczp7bmFtZTohMSxkb3RzOiExLGljb25zOiExLGVsbGlwc2lzOiExfSxzZWxlY3RlZDpbXSxsYXN0X2Vycm9yOnt9LHdvcmtpbmc6ITEsd29ya2VyX3F1ZXVlOltdLGZvY3VzZWQ6bnVsbH19fSxhLmpzdHJlZS5yZWZlcmVuY2U9ZnVuY3Rpb24oYil7dmFyIGM9bnVsbCxkPW51bGw7aWYoIWJ8fCFiLmlkfHxiLnRhZ05hbWUmJmIubm9kZVR5cGV8fChiPWIuaWQpLCFkfHwhZC5sZW5ndGgpdHJ5e2Q9YShiKX1jYXRjaChlKXt9aWYoIWR8fCFkLmxlbmd0aCl0cnl7ZD1hKFwiI1wiK2IucmVwbGFjZShhLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpKX1jYXRjaChlKXt9cmV0dXJuIGQmJmQubGVuZ3RoJiYoZD1kLmNsb3Nlc3QoXCIuanN0cmVlXCIpKS5sZW5ndGgmJihkPWQuZGF0YShcImpzdHJlZVwiKSk/Yz1kOmEoXCIuanN0cmVlXCIpLmVhY2goZnVuY3Rpb24oKXt2YXIgZD1hKHRoaXMpLmRhdGEoXCJqc3RyZWVcIik7cmV0dXJuIGQmJmQuX21vZGVsLmRhdGFbYl0/KGM9ZCwhMSk6dm9pZCAwfSksY30sYS5mbi5qc3RyZWU9ZnVuY3Rpb24oYyl7dmFyIGQ9XCJzdHJpbmdcIj09dHlwZW9mIGMsZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSksZj1udWxsO3JldHVybiBjIT09ITB8fHRoaXMubGVuZ3RoPyh0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgZz1hLmpzdHJlZS5yZWZlcmVuY2UodGhpcyksaD1kJiZnP2dbY106bnVsbDtyZXR1cm4gZj1kJiZoP2guYXBwbHkoZyxlKTpudWxsLGd8fGR8fGMhPT1iJiYhYS5pc1BsYWluT2JqZWN0KGMpfHxhLmpzdHJlZS5jcmVhdGUodGhpcyxjKSwoZyYmIWR8fGM9PT0hMCkmJihmPWd8fCExKSxudWxsIT09ZiYmZiE9PWI/ITE6dm9pZCAwfSksbnVsbCE9PWYmJmYhPT1iP2Y6dGhpcyk6ITF9LGEuZXhwci5wc2V1ZG9zLmpzdHJlZT1hLmV4cHIuY3JlYXRlUHNldWRvKGZ1bmN0aW9uKGMpe3JldHVybiBmdW5jdGlvbihjKXtyZXR1cm4gYShjKS5oYXNDbGFzcyhcImpzdHJlZVwiKSYmYShjKS5kYXRhKFwianN0cmVlXCIpIT09Yn19KSxhLmpzdHJlZS5kZWZhdWx0cy5jb3JlPXtkYXRhOiExLHN0cmluZ3M6ITEsY2hlY2tfY2FsbGJhY2s6ITEsZXJyb3I6YS5ub29wLGFuaW1hdGlvbjoyMDAsbXVsdGlwbGU6ITAsdGhlbWVzOntuYW1lOiExLHVybDohMSxkaXI6ITEsZG90czohMCxpY29uczohMCxlbGxpcHNpczohMSxzdHJpcGVzOiExLHZhcmlhbnQ6ITEscmVzcG9uc2l2ZTohMX0sZXhwYW5kX3NlbGVjdGVkX29ubG9hZDohMCx3b3JrZXI6ITAsZm9yY2VfdGV4dDohMSxkYmxjbGlja190b2dnbGU6ITAsbG9hZGVkX3N0YXRlOiExLHJlc3RvcmVfZm9jdXM6ITAsY29tcHV0ZV9lbGVtZW50c19wb3NpdGlvbnM6ITEsa2V5Ym9hcmQ6e1wiY3RybC1zcGFjZVwiOmZ1bmN0aW9uKGIpe2IudHlwZT1cImNsaWNrXCIsYShiLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoYil9LGVudGVyOmZ1bmN0aW9uKGIpe2IudHlwZT1cImNsaWNrXCIsYShiLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoYil9LGxlZnQ6ZnVuY3Rpb24oYil7aWYoYi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaXNfb3BlbihiLmN1cnJlbnRUYXJnZXQpKXRoaXMuY2xvc2Vfbm9kZShiLmN1cnJlbnRUYXJnZXQpO2Vsc2V7dmFyIGM9dGhpcy5nZXRfcGFyZW50KGIuY3VycmVudFRhcmdldCk7YyYmYy5pZCE9PWEuanN0cmVlLnJvb3QmJnRoaXMuZ2V0X25vZGUoYywhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIil9fSx1cDpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7dmFyIGI9dGhpcy5nZXRfcHJldl9kb20oYS5jdXJyZW50VGFyZ2V0KTtiJiZiLmxlbmd0aCYmYi5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKX0scmlnaHQ6ZnVuY3Rpb24oYil7aWYoYi5wcmV2ZW50RGVmYXVsdCgpLHRoaXMuaXNfY2xvc2VkKGIuY3VycmVudFRhcmdldCkpdGhpcy5vcGVuX25vZGUoYi5jdXJyZW50VGFyZ2V0LGZ1bmN0aW9uKGEpe3RoaXMuZ2V0X25vZGUoYSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIil9KTtlbHNlIGlmKHRoaXMuaXNfb3BlbihiLmN1cnJlbnRUYXJnZXQpKXt2YXIgYz10aGlzLmdldF9ub2RlKGIuY3VycmVudFRhcmdldCwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpWzBdO2MmJmEodGhpcy5fZmlyc3RDaGlsZChjKSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIil9fSxkb3duOmZ1bmN0aW9uKGEpe2EucHJldmVudERlZmF1bHQoKTt2YXIgYj10aGlzLmdldF9uZXh0X2RvbShhLmN1cnJlbnRUYXJnZXQpO2ImJmIubGVuZ3RoJiZiLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpfSxcIipcIjpmdW5jdGlvbihhKXt0aGlzLm9wZW5fYWxsKCl9LGhvbWU6ZnVuY3Rpb24oYil7Yi5wcmV2ZW50RGVmYXVsdCgpO3ZhciBjPXRoaXMuX2ZpcnN0Q2hpbGQodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0pO2MmJmEoYykuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS50cmlnZ2VyKFwiZm9jdXNcIil9LGVuZDpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksdGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLWFuY2hvclwiKS5maWx0ZXIoXCI6dmlzaWJsZVwiKS5sYXN0KCkudHJpZ2dlcihcImZvY3VzXCIpfSxmMjpmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCksdGhpcy5lZGl0KGEuY3VycmVudFRhcmdldCl9fX0sYS5qc3RyZWUuY29yZS5wcm90b3R5cGU9e3BsdWdpbjpmdW5jdGlvbihiLGMpe3ZhciBkPWEuanN0cmVlLnBsdWdpbnNbYl07cmV0dXJuIGQ/KHRoaXMuX2RhdGFbYl09e30sZC5wcm90b3R5cGU9dGhpcyxuZXcgZChjLHRoaXMpKTp0aGlzfSxpbml0OmZ1bmN0aW9uKGIsYyl7dGhpcy5fbW9kZWw9e2RhdGE6e30sY2hhbmdlZDpbXSxmb3JjZV9mdWxsX3JlZHJhdzohMSxyZWRyYXdfdGltZW91dDohMSxkZWZhdWx0X3N0YXRlOntsb2FkZWQ6ITAsb3BlbmVkOiExLHNlbGVjdGVkOiExLGRpc2FibGVkOiExfX0sdGhpcy5fbW9kZWwuZGF0YVthLmpzdHJlZS5yb290XT17aWQ6YS5qc3RyZWUucm9vdCxwYXJlbnQ6bnVsbCxwYXJlbnRzOltdLGNoaWxkcmVuOltdLGNoaWxkcmVuX2Q6W10sc3RhdGU6e2xvYWRlZDohMX19LHRoaXMuZWxlbWVudD1hKGIpLmFkZENsYXNzKFwianN0cmVlIGpzdHJlZS1cIit0aGlzLl9pZCksdGhpcy5zZXR0aW5ncz1jLHRoaXMuX2RhdGEuY29yZS5yZWFkeT0hMSx0aGlzLl9kYXRhLmNvcmUubG9hZGVkPSExLHRoaXMuX2RhdGEuY29yZS5ydGw9XCJydGxcIj09PXRoaXMuZWxlbWVudC5jc3MoXCJkaXJlY3Rpb25cIiksdGhpcy5lbGVtZW50W3RoaXMuX2RhdGEuY29yZS5ydGw/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3RyZWUtcnRsXCIpLHRoaXMuZWxlbWVudC5hdHRyKFwicm9sZVwiLFwidHJlZVwiKSx0aGlzLnNldHRpbmdzLmNvcmUubXVsdGlwbGUmJnRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1tdWx0aXNlbGVjdGFibGVcIiwhMCksdGhpcy5lbGVtZW50LmF0dHIoXCJ0YWJpbmRleFwiKXx8dGhpcy5lbGVtZW50LmF0dHIoXCJ0YWJpbmRleFwiLFwiMFwiKSx0aGlzLmJpbmQoKSx0aGlzLnRyaWdnZXIoXCJpbml0XCIpLHRoaXMuX2RhdGEuY29yZS5vcmlnaW5hbF9jb250YWluZXJfaHRtbD10aGlzLmVsZW1lbnQuZmluZChcIiA+IHVsID4gbGlcIikuY2xvbmUoITApLHRoaXMuX2RhdGEuY29yZS5vcmlnaW5hbF9jb250YWluZXJfaHRtbC5maW5kKFwibGlcIikuYWRkQmFjaygpLmNvbnRlbnRzKCkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDM9PT10aGlzLm5vZGVUeXBlJiYoIXRoaXMubm9kZVZhbHVlfHwvXlxccyskLy50ZXN0KHRoaXMubm9kZVZhbHVlKSl9KS5yZW1vdmUoKSx0aGlzLmVsZW1lbnQuaHRtbChcIjx1bCBjbGFzcz0nanN0cmVlLWNvbnRhaW5lci11bCBqc3RyZWUtY2hpbGRyZW4nIHJvbGU9J2dyb3VwJz48bGkgaWQ9J2pcIit0aGlzLl9pZCtcIl9sb2FkaW5nJyBjbGFzcz0nanN0cmVlLWluaXRpYWwtbm9kZSBqc3RyZWUtbG9hZGluZyBqc3RyZWUtbGVhZiBqc3RyZWUtbGFzdCcgcm9sZT0nbm9uZSc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS1vY2wnPjwvaT48YSBjbGFzcz0nanN0cmVlLWFuY2hvcicgcm9sZT0ndHJlZWl0ZW0nIGhyZWY9JyMnPjxpIGNsYXNzPSdqc3RyZWUtaWNvbiBqc3RyZWUtdGhlbWVpY29uLWhpZGRlbic+PC9pPlwiK3RoaXMuZ2V0X3N0cmluZyhcIkxvYWRpbmcgLi4uXCIpK1wiPC9hPjwvbGk+PC91bD5cIiksdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixcImpcIit0aGlzLl9pZCtcIl9sb2FkaW5nXCIpLHRoaXMuX2RhdGEuY29yZS5saV9oZWlnaHQ9dGhpcy5nZXRfY29udGFpbmVyX3VsKCkuY2hpbGRyZW4oXCJsaVwiKS5maXJzdCgpLm91dGVySGVpZ2h0KCl8fDI0LHRoaXMuX2RhdGEuY29yZS5ub2RlPXRoaXMuX2NyZWF0ZV9wcm90b3R5cGVfbm9kZSgpLHRoaXMudHJpZ2dlcihcImxvYWRpbmdcIiksdGhpcy5sb2FkX25vZGUoYS5qc3RyZWUucm9vdCl9LGRlc3Ryb3k6ZnVuY3Rpb24oYSl7aWYodGhpcy50cmlnZ2VyKFwiZGVzdHJveVwiKSx0aGlzLl93cmspdHJ5e3dpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHRoaXMuX3dyayksdGhpcy5fd3JrPW51bGx9Y2F0Y2goYil7fWF8fHRoaXMuZWxlbWVudC5lbXB0eSgpLHRoaXMudGVhcmRvd24oKX0sX2NyZWF0ZV9wcm90b3R5cGVfbm9kZTpmdW5jdGlvbigpe3ZhciBhPWkuY3JlYXRlRWxlbWVudChcIkxJXCIpLGIsYztyZXR1cm4gYS5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJub25lXCIpLGI9aS5jcmVhdGVFbGVtZW50KFwiSVwiKSxiLmNsYXNzTmFtZT1cImpzdHJlZS1pY29uIGpzdHJlZS1vY2xcIixiLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxhLmFwcGVuZENoaWxkKGIpLGI9aS5jcmVhdGVFbGVtZW50KFwiQVwiKSxiLmNsYXNzTmFtZT1cImpzdHJlZS1hbmNob3JcIixiLnNldEF0dHJpYnV0ZShcImhyZWZcIixcIiNcIiksYi5zZXRBdHRyaWJ1dGUoXCJ0YWJpbmRleFwiLFwiLTFcIiksYi5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJ0cmVlaXRlbVwiKSxjPWkuY3JlYXRlRWxlbWVudChcIklcIiksYy5jbGFzc05hbWU9XCJqc3RyZWUtaWNvbiBqc3RyZWUtdGhlbWVpY29uXCIsYy5zZXRBdHRyaWJ1dGUoXCJyb2xlXCIsXCJwcmVzZW50YXRpb25cIiksYi5hcHBlbmRDaGlsZChjKSxhLmFwcGVuZENoaWxkKGIpLGI9Yz1udWxsLGF9LF9rYmV2ZW50X3RvX2Z1bmM6ZnVuY3Rpb24oYSl7dmFyIGI9ezg6XCJCYWNrc3BhY2VcIiw5OlwiVGFiXCIsMTM6XCJFbnRlclwiLDE5OlwiUGF1c2VcIiwyNzpcIkVzY1wiLDMyOlwiU3BhY2VcIiwzMzpcIlBhZ2VVcFwiLDM0OlwiUGFnZURvd25cIiwzNTpcIkVuZFwiLDM2OlwiSG9tZVwiLDM3OlwiTGVmdFwiLDM4OlwiVXBcIiwzOTpcIlJpZ2h0XCIsNDA6XCJEb3duXCIsNDQ6XCJQcmludFwiLDQ1OlwiSW5zZXJ0XCIsNDY6XCJEZWxldGVcIiw5NjpcIk51bXBhZDBcIiw5NzpcIk51bXBhZDFcIiw5ODpcIk51bXBhZDJcIiw5OTpcIk51bXBhZDNcIiwxMDA6XCJOdW1wYWQ0XCIsMTAxOlwiTnVtcGFkNVwiLDEwMjpcIk51bXBhZDZcIiwxMDM6XCJOdW1wYWQ3XCIsMTA0OlwiTnVtcGFkOFwiLDEwNTpcIk51bXBhZDlcIixcIi0xM1wiOlwiTnVtcGFkRW50ZXJcIiwxMTI6XCJGMVwiLDExMzpcIkYyXCIsMTE0OlwiRjNcIiwxMTU6XCJGNFwiLDExNjpcIkY1XCIsMTE3OlwiRjZcIiwxMTg6XCJGN1wiLDExOTpcIkY4XCIsMTIwOlwiRjlcIiwxMjE6XCJGMTBcIiwxMjI6XCJGMTFcIiwxMjM6XCJGMTJcIiwxNDQ6XCJOdW1sb2NrXCIsMTQ1OlwiU2Nyb2xsbG9ja1wiLDE2OlwiU2hpZnRcIiwxNzpcIkN0cmxcIiwxODpcIkFsdFwiLDQ4OlwiMFwiLDQ5OlwiMVwiLDUwOlwiMlwiLDUxOlwiM1wiLDUyOlwiNFwiLDUzOlwiNVwiLDU0OlwiNlwiLDU1OlwiN1wiLDU2OlwiOFwiLDU3OlwiOVwiLDU5OlwiO1wiLDYxOlwiPVwiLDY1OlwiYVwiLDY2OlwiYlwiLDY3OlwiY1wiLDY4OlwiZFwiLDY5OlwiZVwiLDcwOlwiZlwiLDcxOlwiZ1wiLDcyOlwiaFwiLDczOlwiaVwiLDc0OlwialwiLDc1Olwia1wiLDc2OlwibFwiLDc3OlwibVwiLDc4OlwiblwiLDc5Olwib1wiLDgwOlwicFwiLDgxOlwicVwiLDgyOlwiclwiLDgzOlwic1wiLDg0OlwidFwiLDg1OlwidVwiLDg2OlwidlwiLDg3Olwid1wiLDg4OlwieFwiLDg5OlwieVwiLDkwOlwielwiLDEwNzpcIitcIiwxMDk6XCItXCIsMTEwOlwiLlwiLDE4NjpcIjtcIiwxODc6XCI9XCIsMTg4OlwiLFwiLDE4OTpcIi1cIiwxOTA6XCIuXCIsMTkxOlwiL1wiLDE5MjpcImBcIiwyMTk6XCJbXCIsMjIwOlwiXFxcXFwiLDIyMTpcIl1cIiwyMjI6XCInXCIsMTExOlwiL1wiLDEwNjpcIipcIiwxNzM6XCItXCJ9LGM9W107aWYoYS5jdHJsS2V5JiZjLnB1c2goXCJjdHJsXCIpLGEuYWx0S2V5JiZjLnB1c2goXCJhbHRcIiksYS5zaGlmdEtleSYmYy5wdXNoKFwic2hpZnRcIiksYy5wdXNoKGJbYS53aGljaF18fGEud2hpY2gpLGM9Yy5zb3J0KCkuam9pbihcIi1cIikudG9Mb3dlckNhc2UoKSxcInNoaWZ0LXNoaWZ0XCI9PT1jfHxcImN0cmwtY3RybFwiPT09Y3x8XCJhbHQtYWx0XCI9PT1jKXJldHVybiBudWxsO3ZhciBkPXRoaXMuc2V0dGluZ3MuY29yZS5rZXlib2FyZCxlLGY7Zm9yKGUgaW4gZClpZihkLmhhc093blByb3BlcnR5KGUpJiYoZj1lLFwiLVwiIT09ZiYmXCIrXCIhPT1mJiYoZj1mLnJlcGxhY2UoXCItLVwiLFwiLU1JTlVTXCIpLnJlcGxhY2UoXCIrLVwiLFwiLU1JTlVTXCIpLnJlcGxhY2UoXCIrK1wiLFwiLVBMVVNcIikucmVwbGFjZShcIi0rXCIsXCItUExVU1wiKSxmPWYuc3BsaXQoLy18XFwrLykuc29ydCgpLmpvaW4oXCItXCIpLnJlcGxhY2UoXCJNSU5VU1wiLFwiLVwiKS5yZXBsYWNlKFwiUExVU1wiLFwiK1wiKS50b0xvd2VyQ2FzZSgpKSxmPT09YykpcmV0dXJuIGRbZV07cmV0dXJuIG51bGx9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dGhpcy51bmJpbmQoKSx0aGlzLmVsZW1lbnQucmVtb3ZlQ2xhc3MoXCJqc3RyZWVcIikucmVtb3ZlRGF0YShcImpzdHJlZVwiKS5maW5kKFwiW2NsYXNzXj0nanN0cmVlJ11cIikuYWRkQmFjaygpLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY2xhc3NOYW1lLnJlcGxhY2UoL2pzdHJlZVteIF0qfCQvZ2ksXCJcIil9KSx0aGlzLmVsZW1lbnQ9bnVsbH0sYmluZDpmdW5jdGlvbigpe3ZhciBiPVwiXCIsYz1udWxsLGQ9MDt0aGlzLmVsZW1lbnQub24oXCJkYmxjbGljay5qc3RyZWVcIixmdW5jdGlvbihhKXtpZihhLnRhcmdldC50YWdOYW1lJiZcImlucHV0XCI9PT1hLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuITA7aWYoaS5zZWxlY3Rpb24mJmkuc2VsZWN0aW9uLmVtcHR5KWkuc2VsZWN0aW9uLmVtcHR5KCk7ZWxzZSBpZih3aW5kb3cuZ2V0U2VsZWN0aW9uKXt2YXIgYj13aW5kb3cuZ2V0U2VsZWN0aW9uKCk7dHJ5e2IucmVtb3ZlQWxsUmFuZ2VzKCksYi5jb2xsYXBzZSgpfWNhdGNoKGMpe319fSkub24oXCJtb3VzZWRvd24uanN0cmVlXCIsZnVuY3Rpb24oYSl7YS50YXJnZXQ9PT10aGlzLmVsZW1lbnRbMF0mJihhLnByZXZlbnREZWZhdWx0KCksZD0rbmV3IERhdGUpfS5iaW5kKHRoaXMpKS5vbihcIm1vdXNlZG93bi5qc3RyZWVcIixcIi5qc3RyZWUtb2NsXCIsZnVuY3Rpb24oYSl7YS5wcmV2ZW50RGVmYXVsdCgpfSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtb2NsXCIsZnVuY3Rpb24oYSl7dGhpcy50b2dnbGVfbm9kZShhLnRhcmdldCl9LmJpbmQodGhpcykpLm9uKFwiZGJsY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGEpe3JldHVybiBhLnRhcmdldC50YWdOYW1lJiZcImlucHV0XCI9PT1hLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCk/ITA6dm9pZCh0aGlzLnNldHRpbmdzLmNvcmUuZGJsY2xpY2tfdG9nZ2xlJiZ0aGlzLnRvZ2dsZV9ub2RlKGEudGFyZ2V0KSl9LmJpbmQodGhpcykpLm9uKFwiY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGIpe2IucHJldmVudERlZmF1bHQoKSxiLmN1cnJlbnRUYXJnZXQhPT1pLmFjdGl2ZUVsZW1lbnQmJmEoYi5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKFwiZm9jdXNcIiksdGhpcy5hY3RpdmF0ZV9ub2RlKGIuY3VycmVudFRhcmdldCxiKX0uYmluZCh0aGlzKSkub24oXCJrZXlkb3duLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihhKXtpZihhLnRhcmdldC50YWdOYW1lJiZcImlucHV0XCI9PT1hLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuITA7dGhpcy5fZGF0YS5jb3JlLnJ0bCYmKDM3PT09YS53aGljaD9hLndoaWNoPTM5OjM5PT09YS53aGljaCYmKGEud2hpY2g9MzcpKTt2YXIgYj10aGlzLl9rYmV2ZW50X3RvX2Z1bmMoYSk7aWYoYil7dmFyIGM9Yi5jYWxsKHRoaXMsYSk7aWYoYz09PSExfHxjPT09ITApcmV0dXJuIGN9fS5iaW5kKHRoaXMpKS5vbihcImxvYWRfbm9kZS5qc3RyZWVcIixmdW5jdGlvbihiLGMpe2Muc3RhdHVzJiYoYy5ub2RlLmlkIT09YS5qc3RyZWUucm9vdHx8dGhpcy5fZGF0YS5jb3JlLmxvYWRlZHx8KHRoaXMuX2RhdGEuY29yZS5sb2FkZWQ9ITAsdGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSkmJnRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsdGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSkuaWQpLHRoaXMudHJpZ2dlcihcImxvYWRlZFwiKSksdGhpcy5fZGF0YS5jb3JlLnJlYWR5fHxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYodGhpcy5lbGVtZW50JiYhdGhpcy5nZXRfY29udGFpbmVyX3VsKCkuZmluZChcIi5qc3RyZWUtbG9hZGluZ1wiKS5sZW5ndGgpe2lmKHRoaXMuX2RhdGEuY29yZS5yZWFkeT0hMCx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoKXtpZih0aGlzLnNldHRpbmdzLmNvcmUuZXhwYW5kX3NlbGVjdGVkX29ubG9hZCl7dmFyIGI9W10sYyxkO2ZvcihjPTAsZD10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoO2Q+YztjKyspYj1iLmNvbmNhdCh0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtjXV0ucGFyZW50cyk7Zm9yKGI9YS52YWthdGEuYXJyYXlfdW5pcXVlKGIpLGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspdGhpcy5vcGVuX25vZGUoYltjXSwhMSwwKX10aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcInJlYWR5XCIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkfSl9dGhpcy50cmlnZ2VyKFwicmVhZHlcIil9fS5iaW5kKHRoaXMpLDApKX0uYmluZCh0aGlzKSkub24oXCJrZXlwcmVzcy5qc3RyZWVcIixmdW5jdGlvbihkKXtpZihkLnRhcmdldC50YWdOYW1lJiZcImlucHV0XCI9PT1kLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpcmV0dXJuITA7YyYmY2xlYXJUaW1lb3V0KGMpLGM9c2V0VGltZW91dChmdW5jdGlvbigpe2I9XCJcIn0sNTAwKTt2YXIgZT1TdHJpbmcuZnJvbUNoYXJDb2RlKGQud2hpY2gpLnRvTG93ZXJDYXNlKCksZj10aGlzLmVsZW1lbnQuZmluZChcIi5qc3RyZWUtYW5jaG9yXCIpLmZpbHRlcihcIjp2aXNpYmxlXCIpLGc9Zi5pbmRleChpLmFjdGl2ZUVsZW1lbnQpfHwwLGg9ITE7aWYoYis9ZSxiLmxlbmd0aD4xKXtpZihmLnNsaWNlKGcpLmVhY2goZnVuY3Rpb24oYyxkKXtyZXR1cm4gMD09PWEoZCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihiKT8oYShkKS50cmlnZ2VyKFwiZm9jdXNcIiksaD0hMCwhMSk6dm9pZCAwfS5iaW5kKHRoaXMpKSxoKXJldHVybjtpZihmLnNsaWNlKDAsZykuZWFjaChmdW5jdGlvbihjLGQpe3JldHVybiAwPT09YShkKS50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKGIpPyhhKGQpLnRyaWdnZXIoXCJmb2N1c1wiKSxoPSEwLCExKTp2b2lkIDB9LmJpbmQodGhpcykpLGgpcmV0dXJufWlmKG5ldyBSZWdFeHAoXCJeXCIrZS5yZXBsYWNlKC9bLVxcL1xcXFxeJCorPy4oKXxbXFxde31dL2csXCJcXFxcJCZcIikrXCIrJFwiKS50ZXN0KGIpKXtpZihmLnNsaWNlKGcrMSkuZWFjaChmdW5jdGlvbihiLGMpe3JldHVybiBhKGMpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKT09PWU/KGEoYykudHJpZ2dlcihcImZvY3VzXCIpLGg9ITAsITEpOnZvaWQgMH0uYmluZCh0aGlzKSksaClyZXR1cm47aWYoZi5zbGljZSgwLGcrMSkuZWFjaChmdW5jdGlvbihiLGMpe3JldHVybiBhKGMpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmNoYXJBdCgwKT09PWU/KGEoYykudHJpZ2dlcihcImZvY3VzXCIpLGg9ITAsITEpOnZvaWQgMH0uYmluZCh0aGlzKSksaClyZXR1cm59fS5iaW5kKHRoaXMpKS5vbihcImluaXQuanN0cmVlXCIsZnVuY3Rpb24oKXt2YXIgYT10aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzO3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cz1hLmRvdHMsdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5zdHJpcGVzPWEuc3RyaXBlcyx0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zPWEuaWNvbnMsdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcz1hLmVsbGlwc2lzLHRoaXMuc2V0X3RoZW1lKGEubmFtZXx8XCJkZWZhdWx0XCIsYS51cmwpLHRoaXMuc2V0X3RoZW1lX3ZhcmlhbnQoYS52YXJpYW50KX0uYmluZCh0aGlzKSkub24oXCJsb2FkaW5nLmpzdHJlZVwiLGZ1bmN0aW9uKCl7dGhpc1t0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHM/XCJzaG93X2RvdHNcIjpcImhpZGVfZG90c1wiXSgpLHRoaXNbdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucz9cInNob3dfaWNvbnNcIjpcImhpZGVfaWNvbnNcIl0oKSx0aGlzW3RoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcz9cInNob3dfc3RyaXBlc1wiOlwiaGlkZV9zdHJpcGVzXCJdKCksdGhpc1t0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzP1wic2hvd19lbGxpcHNpc1wiOlwiaGlkZV9lbGxpcHNpc1wiXSgpfS5iaW5kKHRoaXMpKS5vbihcImJsdXIuanN0cmVlXCIsXCIuanN0cmVlLWFuY2hvclwiLGZ1bmN0aW9uKGIpe3RoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW51bGwsYShiLmN1cnJlbnRUYXJnZXQpLmZpbHRlcihcIi5qc3RyZWUtaG92ZXJlZFwiKS50cmlnZ2VyKFwibW91c2VsZWF2ZVwiKSx0aGlzLmVsZW1lbnQuYXR0cihcInRhYmluZGV4XCIsXCIwXCIpfS5iaW5kKHRoaXMpKS5vbihcImZvY3VzLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihiKXt2YXIgYz10aGlzLmdldF9ub2RlKGIuY3VycmVudFRhcmdldCk7YyYmYy5pZCYmKHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPWMuaWQpLHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1ob3ZlcmVkXCIpLm5vdChiLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoXCJtb3VzZWxlYXZlXCIpLGEoYi5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKFwibW91c2VlbnRlclwiKSx0aGlzLmVsZW1lbnQuYXR0cihcInRhYmluZGV4XCIsXCItMVwiKX0uYmluZCh0aGlzKSkub24oXCJmb2N1cy5qc3RyZWVcIixmdW5jdGlvbigpe2lmKCtuZXcgRGF0ZS1kPjUwMCYmIXRoaXMuX2RhdGEuY29yZS5mb2N1c2VkJiZ0aGlzLnNldHRpbmdzLmNvcmUucmVzdG9yZV9mb2N1cyl7ZD0wO3ZhciBhPXRoaXMuZ2V0X25vZGUodGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIiksITApO2EmJmEuZmluZChcIj4gLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpfX0uYmluZCh0aGlzKSkub24oXCJtb3VzZWVudGVyLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihhKXt0aGlzLmhvdmVyX25vZGUoYS5jdXJyZW50VGFyZ2V0KX0uYmluZCh0aGlzKSkub24oXCJtb3VzZWxlYXZlLmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihhKXt0aGlzLmRlaG92ZXJfbm9kZShhLmN1cnJlbnRUYXJnZXQpfS5iaW5kKHRoaXMpKX0sdW5iaW5kOmZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50Lm9mZihcIi5qc3RyZWVcIiksYShpKS5vZmYoXCIuanN0cmVlLVwiK3RoaXMuX2lkKX0sdHJpZ2dlcjpmdW5jdGlvbihhLGIpe2J8fChiPXt9KSxiLmluc3RhbmNlPXRoaXMsdGhpcy5lbGVtZW50LnRyaWdnZXJIYW5kbGVyKGEucmVwbGFjZShcIi5qc3RyZWVcIixcIlwiKStcIi5qc3RyZWVcIixiKX0sZ2V0X2NvbnRhaW5lcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLmVsZW1lbnR9LGdldF9jb250YWluZXJfdWw6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lbGVtZW50LmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5maXJzdCgpfSxnZXRfc3RyaW5nOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuc2V0dGluZ3MuY29yZS5zdHJpbmdzO3JldHVybiBhLnZha2F0YS5pc19mdW5jdGlvbihjKT9jLmNhbGwodGhpcyxiKTpjJiZjW2JdP2NbYl06Yn0sX2ZpcnN0Q2hpbGQ6ZnVuY3Rpb24oYSl7YT1hP2EuZmlyc3RDaGlsZDpudWxsO3doaWxlKG51bGwhPT1hJiYxIT09YS5ub2RlVHlwZSlhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9LF9uZXh0U2libGluZzpmdW5jdGlvbihhKXthPWE/YS5uZXh0U2libGluZzpudWxsO3doaWxlKG51bGwhPT1hJiYxIT09YS5ub2RlVHlwZSlhPWEubmV4dFNpYmxpbmc7cmV0dXJuIGF9LF9wcmV2aW91c1NpYmxpbmc6ZnVuY3Rpb24oYSl7YT1hP2EucHJldmlvdXNTaWJsaW5nOm51bGw7d2hpbGUobnVsbCE9PWEmJjEhPT1hLm5vZGVUeXBlKWE9YS5wcmV2aW91c1NpYmxpbmc7cmV0dXJuIGF9LGdldF9ub2RlOmZ1bmN0aW9uKGIsYyl7YiYmYi5pZCYmKGI9Yi5pZCksYiBpbnN0YW5jZW9mIGEmJmIubGVuZ3RoJiZiWzBdLmlkJiYoYj1iWzBdLmlkKTt2YXIgZDt0cnl7aWYodGhpcy5fbW9kZWwuZGF0YVtiXSliPXRoaXMuX21vZGVsLmRhdGFbYl07ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgYiYmdGhpcy5fbW9kZWwuZGF0YVtiLnJlcGxhY2UoL14jLyxcIlwiKV0pYj10aGlzLl9tb2RlbC5kYXRhW2IucmVwbGFjZSgvXiMvLFwiXCIpXTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiBiJiYoZD1hKFwiI1wiK2IucmVwbGFjZShhLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpLHRoaXMuZWxlbWVudCkpLmxlbmd0aCYmdGhpcy5fbW9kZWwuZGF0YVtkLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuYXR0cihcImlkXCIpXSliPXRoaXMuX21vZGVsLmRhdGFbZC5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmF0dHIoXCJpZFwiKV07ZWxzZSBpZigoZD10aGlzLmVsZW1lbnQuZmluZChiKSkubGVuZ3RoJiZ0aGlzLl9tb2RlbC5kYXRhW2QuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5hdHRyKFwiaWRcIildKWI9dGhpcy5fbW9kZWwuZGF0YVtkLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuYXR0cihcImlkXCIpXTtlbHNle2lmKCEoZD10aGlzLmVsZW1lbnQuZmluZChiKSkubGVuZ3RofHwhZC5oYXNDbGFzcyhcImpzdHJlZVwiKSlyZXR1cm4hMTtiPXRoaXMuX21vZGVsLmRhdGFbYS5qc3RyZWUucm9vdF19cmV0dXJuIGMmJihiPWIuaWQ9PT1hLmpzdHJlZS5yb290P3RoaXMuZWxlbWVudDphKFwiI1wiK2IuaWQucmVwbGFjZShhLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpLHRoaXMuZWxlbWVudCkpLGJ9Y2F0Y2goZSl7cmV0dXJuITF9fSxnZXRfcGF0aDpmdW5jdGlvbihiLGMsZCl7aWYoYj1iLnBhcmVudHM/Yjp0aGlzLmdldF9ub2RlKGIpLCFifHxiLmlkPT09YS5qc3RyZWUucm9vdHx8IWIucGFyZW50cylyZXR1cm4hMTt2YXIgZSxmLGc9W107Zm9yKGcucHVzaChkP2IuaWQ6Yi50ZXh0KSxlPTAsZj1iLnBhcmVudHMubGVuZ3RoO2Y+ZTtlKyspZy5wdXNoKGQ/Yi5wYXJlbnRzW2VdOnRoaXMuZ2V0X3RleHQoYi5wYXJlbnRzW2VdKSk7cmV0dXJuIGc9Zy5yZXZlcnNlKCkuc2xpY2UoMSksYz9nLmpvaW4oYyk6Z30sZ2V0X25leHRfZG9tOmZ1bmN0aW9uKGIsYyl7dmFyIGQ7aWYoYj10aGlzLmdldF9ub2RlKGIsITApLGJbMF09PT10aGlzLmVsZW1lbnRbMF0pe2Q9dGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSk7d2hpbGUoZCYmMD09PWQub2Zmc2V0SGVpZ2h0KWQ9dGhpcy5fbmV4dFNpYmxpbmcoZCk7cmV0dXJuIGQ/YShkKTohMX1pZighYnx8IWIubGVuZ3RoKXJldHVybiExO2lmKGMpe2Q9YlswXTtkbyBkPXRoaXMuX25leHRTaWJsaW5nKGQpO3doaWxlKGQmJjA9PT1kLm9mZnNldEhlaWdodCk7cmV0dXJuIGQ/YShkKTohMX1pZihiLmhhc0NsYXNzKFwianN0cmVlLW9wZW5cIikpe2Q9dGhpcy5fZmlyc3RDaGlsZChiLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKVswXSk7d2hpbGUoZCYmMD09PWQub2Zmc2V0SGVpZ2h0KWQ9dGhpcy5fbmV4dFNpYmxpbmcoZCk7aWYobnVsbCE9PWQpcmV0dXJuIGEoZCl9ZD1iWzBdO2RvIGQ9dGhpcy5fbmV4dFNpYmxpbmcoZCk7d2hpbGUoZCYmMD09PWQub2Zmc2V0SGVpZ2h0KTtyZXR1cm4gbnVsbCE9PWQ/YShkKTpiLnBhcmVudHNVbnRpbChcIi5qc3RyZWVcIixcIi5qc3RyZWUtbm9kZVwiKS5uZXh0QWxsKFwiLmpzdHJlZS1ub2RlOnZpc2libGVcIikuZmlyc3QoKX0sZ2V0X3ByZXZfZG9tOmZ1bmN0aW9uKGIsYyl7dmFyIGQ7aWYoYj10aGlzLmdldF9ub2RlKGIsITApLGJbMF09PT10aGlzLmVsZW1lbnRbMF0pe2Q9dGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0ubGFzdENoaWxkO3doaWxlKGQmJjA9PT1kLm9mZnNldEhlaWdodClkPXRoaXMuX3ByZXZpb3VzU2libGluZyhkKTtyZXR1cm4gZD9hKGQpOiExfWlmKCFifHwhYi5sZW5ndGgpcmV0dXJuITE7aWYoYyl7ZD1iWzBdO2RvIGQ9dGhpcy5fcHJldmlvdXNTaWJsaW5nKGQpO3doaWxlKGQmJjA9PT1kLm9mZnNldEhlaWdodCk7cmV0dXJuIGQ/YShkKTohMX1kPWJbMF07ZG8gZD10aGlzLl9wcmV2aW91c1NpYmxpbmcoZCk7d2hpbGUoZCYmMD09PWQub2Zmc2V0SGVpZ2h0KTtpZihudWxsIT09ZCl7Yj1hKGQpO3doaWxlKGIuaGFzQ2xhc3MoXCJqc3RyZWUtb3BlblwiKSliPWIuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmZpcnN0KCkuY2hpbGRyZW4oXCIuanN0cmVlLW5vZGU6dmlzaWJsZTpsYXN0XCIpO3JldHVybiBifXJldHVybiBkPWJbMF0ucGFyZW50Tm9kZS5wYXJlbnROb2RlLGQmJmQuY2xhc3NOYW1lJiYtMSE9PWQuY2xhc3NOYW1lLmluZGV4T2YoXCJqc3RyZWUtbm9kZVwiKT9hKGQpOiExfSxnZXRfcGFyZW50OmZ1bmN0aW9uKGIpe3JldHVybiBiPXRoaXMuZ2V0X25vZGUoYiksYiYmYi5pZCE9PWEuanN0cmVlLnJvb3Q/Yi5wYXJlbnQ6ITF9LGdldF9jaGlsZHJlbl9kb206ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5nZXRfbm9kZShhLCEwKSxhWzBdPT09dGhpcy5lbGVtZW50WzBdP3RoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlXCIpOmEmJmEubGVuZ3RoP2EuY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1ub2RlXCIpOiExfSxpc19wYXJlbnQ6ZnVuY3Rpb24oYSl7cmV0dXJuIGE9dGhpcy5nZXRfbm9kZShhKSxhJiYoYS5zdGF0ZS5sb2FkZWQ9PT0hMXx8YS5jaGlsZHJlbi5sZW5ndGg+MCl9LGlzX2xvYWRlZDpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLmdldF9ub2RlKGEpLGEmJmEuc3RhdGUubG9hZGVkfSxpc19sb2FkaW5nOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuZ2V0X25vZGUoYSksYSYmYS5zdGF0ZSYmYS5zdGF0ZS5sb2FkaW5nfSxpc19vcGVuOmZ1bmN0aW9uKGEpe3JldHVybiBhPXRoaXMuZ2V0X25vZGUoYSksYSYmYS5zdGF0ZS5vcGVuZWR9LGlzX2Nsb3NlZDpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLmdldF9ub2RlKGEpLGEmJnRoaXMuaXNfcGFyZW50KGEpJiYhYS5zdGF0ZS5vcGVuZWR9LGlzX2xlYWY6ZnVuY3Rpb24oYSl7cmV0dXJuIXRoaXMuaXNfcGFyZW50KGEpfSxsb2FkX25vZGU6ZnVuY3Rpb24oYixjKXt2YXIgZCxlLGYsZyxoO2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXJldHVybiB0aGlzLl9sb2FkX25vZGVzKGIuc2xpY2UoKSxjKSwhMDtpZihiPXRoaXMuZ2V0X25vZGUoYiksIWIpcmV0dXJuIGMmJmMuY2FsbCh0aGlzLGIsITEpLCExO2lmKGIuc3RhdGUubG9hZGVkKXtmb3IoYi5zdGF0ZS5sb2FkZWQ9ITEsZj0wLGc9Yi5wYXJlbnRzLmxlbmd0aDtnPmY7ZisrKXRoaXMuX21vZGVsLmRhdGFbYi5wYXJlbnRzW2ZdXS5jaGlsZHJlbl9kPWEudmFrYXRhLmFycmF5X2ZpbHRlcih0aGlzLl9tb2RlbC5kYXRhW2IucGFyZW50c1tmXV0uY2hpbGRyZW5fZCxmdW5jdGlvbihjKXtyZXR1cm4tMT09PWEuaW5BcnJheShjLGIuY2hpbGRyZW5fZCl9KTtmb3IoZD0wLGU9Yi5jaGlsZHJlbl9kLmxlbmd0aDtlPmQ7ZCsrKXRoaXMuX21vZGVsLmRhdGFbYi5jaGlsZHJlbl9kW2RdXS5zdGF0ZS5zZWxlY3RlZCYmKGg9ITApLGRlbGV0ZSB0aGlzLl9tb2RlbC5kYXRhW2IuY2hpbGRyZW5fZFtkXV07aCYmKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD1hLnZha2F0YS5hcnJheV9maWx0ZXIodGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGZ1bmN0aW9uKGMpe3JldHVybi0xPT09YS5pbkFycmF5KGMsYi5jaGlsZHJlbl9kKX0pKSxiLmNoaWxkcmVuPVtdLGIuY2hpbGRyZW5fZD1bXSxoJiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcImxvYWRfbm9kZVwiLG5vZGU6YixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWR9KX1yZXR1cm4gYi5zdGF0ZS5mYWlsZWQ9ITEsYi5zdGF0ZS5sb2FkaW5nPSEwLHRoaXMuZ2V0X25vZGUoYiwhMCkuYWRkQ2xhc3MoXCJqc3RyZWUtbG9hZGluZ1wiKS5hdHRyKFwiYXJpYS1idXN5XCIsITApLHRoaXMuX2xvYWRfbm9kZShiLGZ1bmN0aW9uKGEpe2I9dGhpcy5fbW9kZWwuZGF0YVtiLmlkXSxiLnN0YXRlLmxvYWRpbmc9ITEsYi5zdGF0ZS5sb2FkZWQ9YSxiLnN0YXRlLmZhaWxlZD0hYi5zdGF0ZS5sb2FkZWQ7dmFyIGQ9dGhpcy5nZXRfbm9kZShiLCEwKSxlPTAsZj0wLGc9dGhpcy5fbW9kZWwuZGF0YSxoPSExO2ZvcihlPTAsZj1iLmNoaWxkcmVuLmxlbmd0aDtmPmU7ZSsrKWlmKGdbYi5jaGlsZHJlbltlXV0mJiFnW2IuY2hpbGRyZW5bZV1dLnN0YXRlLmhpZGRlbil7aD0hMDticmVha31iLnN0YXRlLmxvYWRlZCYmZCYmZC5sZW5ndGgmJihkLnJlbW92ZUNsYXNzKFwianN0cmVlLWNsb3NlZCBqc3RyZWUtb3BlbiBqc3RyZWUtbGVhZlwiKSxoP1wiI1wiIT09Yi5pZCYmZC5hZGRDbGFzcyhiLnN0YXRlLm9wZW5lZD9cImpzdHJlZS1vcGVuXCI6XCJqc3RyZWUtY2xvc2VkXCIpOmQuYWRkQ2xhc3MoXCJqc3RyZWUtbGVhZlwiKSksZC5yZW1vdmVDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksdGhpcy50cmlnZ2VyKFwibG9hZF9ub2RlXCIse25vZGU6YixzdGF0dXM6YX0pLGMmJmMuY2FsbCh0aGlzLGIsYSl9LmJpbmQodGhpcykpLCEwfSxfbG9hZF9ub2RlczpmdW5jdGlvbihhLGIsYyxkKXt2YXIgZT0hMCxmPWZ1bmN0aW9uKCl7dGhpcy5fbG9hZF9ub2RlcyhhLGIsITApfSxnPXRoaXMuX21vZGVsLmRhdGEsaCxpLGo9W107Zm9yKGg9MCxpPWEubGVuZ3RoO2k+aDtoKyspZ1thW2hdXSYmKCFnW2FbaF1dLnN0YXRlLmxvYWRlZCYmIWdbYVtoXV0uc3RhdGUuZmFpbGVkfHwhYyYmZCkmJih0aGlzLmlzX2xvYWRpbmcoYVtoXSl8fHRoaXMubG9hZF9ub2RlKGFbaF0sZiksZT0hMSk7aWYoZSl7Zm9yKGg9MCxpPWEubGVuZ3RoO2k+aDtoKyspZ1thW2hdXSYmZ1thW2hdXS5zdGF0ZS5sb2FkZWQmJmoucHVzaChhW2hdKTtiJiYhYi5kb25lJiYoYi5jYWxsKHRoaXMsaiksYi5kb25lPSEwKX19LGxvYWRfYWxsOmZ1bmN0aW9uKGIsYyl7aWYoYnx8KGI9YS5qc3RyZWUucm9vdCksYj10aGlzLmdldF9ub2RlKGIpLCFiKXJldHVybiExO3ZhciBkPVtdLGU9dGhpcy5fbW9kZWwuZGF0YSxmPWVbYi5pZF0uY2hpbGRyZW5fZCxnLGg7Zm9yKGIuc3RhdGUmJiFiLnN0YXRlLmxvYWRlZCYmZC5wdXNoKGIuaWQpLGc9MCxoPWYubGVuZ3RoO2g+ZztnKyspZVtmW2ddXSYmZVtmW2ddXS5zdGF0ZSYmIWVbZltnXV0uc3RhdGUubG9hZGVkJiZkLnB1c2goZltnXSk7ZC5sZW5ndGg/dGhpcy5fbG9hZF9ub2RlcyhkLGZ1bmN0aW9uKCl7dGhpcy5sb2FkX2FsbChiLGMpfSk6KGMmJmMuY2FsbCh0aGlzLGIpLHRoaXMudHJpZ2dlcihcImxvYWRfYWxsXCIse25vZGU6Yn0pKX0sX2xvYWRfbm9kZTpmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMuc2V0dGluZ3MuY29yZS5kYXRhLGUsZj1mdW5jdGlvbiBnKCl7cmV0dXJuIDMhPT10aGlzLm5vZGVUeXBlJiY4IT09dGhpcy5ub2RlVHlwZX07cmV0dXJuIGQ/YS52YWthdGEuaXNfZnVuY3Rpb24oZCk/ZC5jYWxsKHRoaXMsYixmdW5jdGlvbihkKXtkPT09ITE/Yy5jYWxsKHRoaXMsITEpOnRoaXNbXCJzdHJpbmdcIj09dHlwZW9mIGQ/XCJfYXBwZW5kX2h0bWxfZGF0YVwiOlwiX2FwcGVuZF9qc29uX2RhdGFcIl0oYixcInN0cmluZ1wiPT10eXBlb2YgZD9hKGEucGFyc2VIVE1MKGQpKS5maWx0ZXIoZik6ZCxmdW5jdGlvbihhKXtjLmNhbGwodGhpcyxhKX0pfS5iaW5kKHRoaXMpKTpcIm9iamVjdFwiPT10eXBlb2YgZD9kLnVybD8oZD1hLmV4dGVuZCghMCx7fSxkKSxhLnZha2F0YS5pc19mdW5jdGlvbihkLnVybCkmJihkLnVybD1kLnVybC5jYWxsKHRoaXMsYikpLGEudmFrYXRhLmlzX2Z1bmN0aW9uKGQuZGF0YSkmJihkLmRhdGE9ZC5kYXRhLmNhbGwodGhpcyxiKSksYS5hamF4KGQpLmRvbmUoZnVuY3Rpb24oZCxlLGcpe3ZhciBoPWcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJDb250ZW50LVR5cGVcIik7cmV0dXJuIGgmJi0xIT09aC5pbmRleE9mKFwianNvblwiKXx8XCJvYmplY3RcIj09dHlwZW9mIGQ/dGhpcy5fYXBwZW5kX2pzb25fZGF0YShiLGQsZnVuY3Rpb24oYSl7Yy5jYWxsKHRoaXMsYSl9KTpoJiYtMSE9PWguaW5kZXhPZihcImh0bWxcIil8fFwic3RyaW5nXCI9PXR5cGVvZiBkP3RoaXMuX2FwcGVuZF9odG1sX2RhdGEoYixhKGEucGFyc2VIVE1MKGQpKS5maWx0ZXIoZiksZnVuY3Rpb24oYSl7Yy5jYWxsKHRoaXMsYSl9KToodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiYWpheFwiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDRcIixyZWFzb246XCJDb3VsZCBub3QgbG9hZCBub2RlXCIsZGF0YTpKU09OLnN0cmluZ2lmeSh7aWQ6Yi5pZCx4aHI6Z30pfSx0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKSxjLmNhbGwodGhpcywhMSkpfS5iaW5kKHRoaXMpKS5mYWlsKGZ1bmN0aW9uKGEpe3RoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImFqYXhcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzA0XCIscmVhc29uOlwiQ291bGQgbm90IGxvYWQgbm9kZVwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2lkOmIuaWQseGhyOmF9KX0sYy5jYWxsKHRoaXMsITEpLHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpfS5iaW5kKHRoaXMpKSk6KGU9YS52YWthdGEuaXNfYXJyYXkoZCk/YS5leHRlbmQoITAsW10sZCk6YS5pc1BsYWluT2JqZWN0KGQpP2EuZXh0ZW5kKCEwLHt9LGQpOmQsYi5pZD09PWEuanN0cmVlLnJvb3Q/dGhpcy5fYXBwZW5kX2pzb25fZGF0YShiLGUsZnVuY3Rpb24oYSl7Yy5jYWxsKHRoaXMsYSl9KToodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwibm9kYXRhXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wNVwiLHJlYXNvbjpcIkNvdWxkIG5vdCBsb2FkIG5vZGVcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDpiLmlkfSl9LHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLGMuY2FsbCh0aGlzLCExKSkpOlwic3RyaW5nXCI9PXR5cGVvZiBkP2IuaWQ9PT1hLmpzdHJlZS5yb290P3RoaXMuX2FwcGVuZF9odG1sX2RhdGEoYixhKGEucGFyc2VIVE1MKGQpKS5maWx0ZXIoZiksZnVuY3Rpb24oYSl7Yy5jYWxsKHRoaXMsYSl9KToodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwibm9kYXRhXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wNlwiLHJlYXNvbjpcIkNvdWxkIG5vdCBsb2FkIG5vZGVcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDpiLmlkfSl9LHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLGMuY2FsbCh0aGlzLCExKSk6Yy5jYWxsKHRoaXMsITEpOmIuaWQ9PT1hLmpzdHJlZS5yb290P3RoaXMuX2FwcGVuZF9odG1sX2RhdGEoYix0aGlzLl9kYXRhLmNvcmUub3JpZ2luYWxfY29udGFpbmVyX2h0bWwuY2xvbmUoITApLGZ1bmN0aW9uKGEpe2MuY2FsbCh0aGlzLGEpfSk6Yy5jYWxsKHRoaXMsITEpfSxfbm9kZV9jaGFuZ2VkOmZ1bmN0aW9uKGIpe2I9dGhpcy5nZXRfbm9kZShiKSxiJiYtMT09PWEuaW5BcnJheShiLmlkLHRoaXMuX21vZGVsLmNoYW5nZWQpJiZ0aGlzLl9tb2RlbC5jaGFuZ2VkLnB1c2goYi5pZCl9LF9hcHBlbmRfaHRtbF9kYXRhOmZ1bmN0aW9uKGIsYyxkKXtiPXRoaXMuZ2V0X25vZGUoYiksYi5jaGlsZHJlbj1bXSxiLmNoaWxkcmVuX2Q9W107dmFyIGU9Yy5pcyhcInVsXCIpP2MuY2hpbGRyZW4oKTpjLGY9Yi5pZCxnPVtdLGg9W10saT10aGlzLl9tb2RlbC5kYXRhLGo9aVtmXSxrPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5sZW5ndGgsbCxtLG47Zm9yKGUuZWFjaChmdW5jdGlvbihiLGMpe2w9dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9odG1sKGEoYyksZixqLnBhcmVudHMuY29uY2F0KCkpLGwmJihnLnB1c2gobCksaC5wdXNoKGwpLGlbbF0uY2hpbGRyZW5fZC5sZW5ndGgmJihoPWguY29uY2F0KGlbbF0uY2hpbGRyZW5fZCkpKX0uYmluZCh0aGlzKSksai5jaGlsZHJlbj1nLGouY2hpbGRyZW5fZD1oLG09MCxuPWoucGFyZW50cy5sZW5ndGg7bj5tO20rKylpW2oucGFyZW50c1ttXV0uY2hpbGRyZW5fZD1pW2oucGFyZW50c1ttXV0uY2hpbGRyZW5fZC5jb25jYXQoaCk7dGhpcy50cmlnZ2VyKFwibW9kZWxcIix7bm9kZXM6aCxwYXJlbnQ6Zn0pLGYhPT1hLmpzdHJlZS5yb290Pyh0aGlzLl9ub2RlX2NoYW5nZWQoZiksdGhpcy5yZWRyYXcoKSk6KHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKFwiLmpzdHJlZS1pbml0aWFsLW5vZGVcIikucmVtb3ZlKCksdGhpcy5yZWRyYXcoITApKSx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoIT09ayYmdGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJtb2RlbFwiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZH0pLGQuY2FsbCh0aGlzLCEwKX0sX2FwcGVuZF9qc29uX2RhdGE6ZnVuY3Rpb24oYixjLGQsZSl7aWYobnVsbCE9PXRoaXMuZWxlbWVudCl7Yj10aGlzLmdldF9ub2RlKGIpLGIuY2hpbGRyZW49W10sYi5jaGlsZHJlbl9kPVtdLGMuZCYmKGM9Yy5kLFwic3RyaW5nXCI9PXR5cGVvZiBjJiYoYz1KU09OLnBhcnNlKGMpKSksYS52YWthdGEuaXNfYXJyYXkoYyl8fChjPVtjXSk7dmFyIGY9bnVsbCxnPXtkZjp0aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlLGRhdDpjLHBhcjpiLmlkLG06dGhpcy5fbW9kZWwuZGF0YSx0X2lkOnRoaXMuX2lkLHRfY250OnRoaXMuX2NudCxzZWw6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkfSxoPXRoaXMsaT1mdW5jdGlvbihhLGIpe2EuZGF0YSYmKGE9YS5kYXRhKTt2YXIgYz1hLmRhdCxkPWEucGFyLGU9W10sZj1bXSxnPVtdLGk9YS5kZixqPWEudF9pZCxrPWEudF9jbnQsbD1hLm0sbT1sW2RdLG49YS5zZWwsbyxwLHEscixzPWZ1bmN0aW9uKGEsYyxkKXtkPWQ/ZC5jb25jYXQoKTpbXSxjJiZkLnVuc2hpZnQoYyk7dmFyIGU9YS5pZC50b1N0cmluZygpLGYsaCxqLGssbT17aWQ6ZSx0ZXh0OmEudGV4dHx8XCJcIixpY29uOmEuaWNvbiE9PWI/YS5pY29uOiEwLHBhcmVudDpjLHBhcmVudHM6ZCxjaGlsZHJlbjphLmNoaWxkcmVufHxbXSxjaGlsZHJlbl9kOmEuY2hpbGRyZW5fZHx8W10sZGF0YTphLmRhdGEsc3RhdGU6e30sbGlfYXR0cjp7aWQ6ITF9LGFfYXR0cjp7aHJlZjpcIiNcIn0sb3JpZ2luYWw6ITF9O2ZvcihmIGluIGkpaS5oYXNPd25Qcm9wZXJ0eShmKSYmKG0uc3RhdGVbZl09aVtmXSk7aWYoYSYmYS5kYXRhJiZhLmRhdGEuanN0cmVlJiZhLmRhdGEuanN0cmVlLmljb24mJihtLmljb249YS5kYXRhLmpzdHJlZS5pY29uKSwobS5pY29uPT09Ynx8bnVsbD09PW0uaWNvbnx8XCJcIj09PW0uaWNvbikmJihtLmljb249ITApLGEmJmEuZGF0YSYmKG0uZGF0YT1hLmRhdGEsYS5kYXRhLmpzdHJlZSkpZm9yKGYgaW4gYS5kYXRhLmpzdHJlZSlhLmRhdGEuanN0cmVlLmhhc093blByb3BlcnR5KGYpJiYobS5zdGF0ZVtmXT1hLmRhdGEuanN0cmVlW2ZdKTtpZihhJiZcIm9iamVjdFwiPT10eXBlb2YgYS5zdGF0ZSlmb3IoZiBpbiBhLnN0YXRlKWEuc3RhdGUuaGFzT3duUHJvcGVydHkoZikmJihtLnN0YXRlW2ZdPWEuc3RhdGVbZl0pO2lmKGEmJlwib2JqZWN0XCI9PXR5cGVvZiBhLmxpX2F0dHIpZm9yKGYgaW4gYS5saV9hdHRyKWEubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShmKSYmKG0ubGlfYXR0cltmXT1hLmxpX2F0dHJbZl0pO2lmKG0ubGlfYXR0ci5pZHx8KG0ubGlfYXR0ci5pZD1lKSxhJiZcIm9iamVjdFwiPT10eXBlb2YgYS5hX2F0dHIpZm9yKGYgaW4gYS5hX2F0dHIpYS5hX2F0dHIuaGFzT3duUHJvcGVydHkoZikmJihtLmFfYXR0cltmXT1hLmFfYXR0cltmXSk7Zm9yKGEmJmEuY2hpbGRyZW4mJmEuY2hpbGRyZW49PT0hMCYmKG0uc3RhdGUubG9hZGVkPSExLG0uY2hpbGRyZW49W10sbS5jaGlsZHJlbl9kPVtdKSxsW20uaWRdPW0sZj0wLGg9bS5jaGlsZHJlbi5sZW5ndGg7aD5mO2YrKylqPXMobFttLmNoaWxkcmVuW2ZdXSxtLmlkLGQpLGs9bFtqXSxtLmNoaWxkcmVuX2QucHVzaChqKSxrLmNoaWxkcmVuX2QubGVuZ3RoJiYobS5jaGlsZHJlbl9kPW0uY2hpbGRyZW5fZC5jb25jYXQoay5jaGlsZHJlbl9kKSk7cmV0dXJuIGRlbGV0ZSBhLmRhdGEsZGVsZXRlIGEuY2hpbGRyZW4sbFttLmlkXS5vcmlnaW5hbD1hLG0uc3RhdGUuc2VsZWN0ZWQmJmcucHVzaChtLmlkKSxtLmlkfSx0PWZ1bmN0aW9uKGEsYyxkKXtkPWQ/ZC5jb25jYXQoKTpbXSxjJiZkLnVuc2hpZnQoYyk7dmFyIGU9ITEsZixoLG0sbixvO2RvIGU9XCJqXCIraitcIl9cIisgKytrO3doaWxlKGxbZV0pO289e2lkOiExLHRleHQ6XCJzdHJpbmdcIj09dHlwZW9mIGE/YTpcIlwiLGljb246XCJvYmplY3RcIj09dHlwZW9mIGEmJmEuaWNvbiE9PWI/YS5pY29uOiEwLHBhcmVudDpjLHBhcmVudHM6ZCxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLGRhdGE6bnVsbCxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX07Zm9yKGYgaW4gaSlpLmhhc093blByb3BlcnR5KGYpJiYoby5zdGF0ZVtmXT1pW2ZdKTtpZihhJiZhLmlkJiYoby5pZD1hLmlkLnRvU3RyaW5nKCkpLGEmJmEudGV4dCYmKG8udGV4dD1hLnRleHQpLGEmJmEuZGF0YSYmYS5kYXRhLmpzdHJlZSYmYS5kYXRhLmpzdHJlZS5pY29uJiYoby5pY29uPWEuZGF0YS5qc3RyZWUuaWNvbiksKG8uaWNvbj09PWJ8fG51bGw9PT1vLmljb258fFwiXCI9PT1vLmljb24pJiYoby5pY29uPSEwKSxhJiZhLmRhdGEmJihvLmRhdGE9YS5kYXRhLGEuZGF0YS5qc3RyZWUpKWZvcihmIGluIGEuZGF0YS5qc3RyZWUpYS5kYXRhLmpzdHJlZS5oYXNPd25Qcm9wZXJ0eShmKSYmKG8uc3RhdGVbZl09YS5kYXRhLmpzdHJlZVtmXSk7aWYoYSYmXCJvYmplY3RcIj09dHlwZW9mIGEuc3RhdGUpZm9yKGYgaW4gYS5zdGF0ZSlhLnN0YXRlLmhhc093blByb3BlcnR5KGYpJiYoby5zdGF0ZVtmXT1hLnN0YXRlW2ZdKTtpZihhJiZcIm9iamVjdFwiPT10eXBlb2YgYS5saV9hdHRyKWZvcihmIGluIGEubGlfYXR0cilhLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoZikmJihvLmxpX2F0dHJbZl09YS5saV9hdHRyW2ZdKTtpZihvLmxpX2F0dHIuaWQmJiFvLmlkJiYoby5pZD1vLmxpX2F0dHIuaWQudG9TdHJpbmcoKSksby5pZHx8KG8uaWQ9ZSksby5saV9hdHRyLmlkfHwoby5saV9hdHRyLmlkPW8uaWQpLGEmJlwib2JqZWN0XCI9PXR5cGVvZiBhLmFfYXR0cilmb3IoZiBpbiBhLmFfYXR0cilhLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShmKSYmKG8uYV9hdHRyW2ZdPWEuYV9hdHRyW2ZdKTtpZihhJiZhLmNoaWxkcmVuJiZhLmNoaWxkcmVuLmxlbmd0aCl7Zm9yKGY9MCxoPWEuY2hpbGRyZW4ubGVuZ3RoO2g+ZjtmKyspbT10KGEuY2hpbGRyZW5bZl0sby5pZCxkKSxuPWxbbV0sby5jaGlsZHJlbi5wdXNoKG0pLG4uY2hpbGRyZW5fZC5sZW5ndGgmJihvLmNoaWxkcmVuX2Q9by5jaGlsZHJlbl9kLmNvbmNhdChuLmNoaWxkcmVuX2QpKTtvLmNoaWxkcmVuX2Q9by5jaGlsZHJlbl9kLmNvbmNhdChvLmNoaWxkcmVuKX1yZXR1cm4gYSYmYS5jaGlsZHJlbiYmYS5jaGlsZHJlbj09PSEwJiYoby5zdGF0ZS5sb2FkZWQ9ITEsby5jaGlsZHJlbj1bXSxvLmNoaWxkcmVuX2Q9W10pLGRlbGV0ZSBhLmRhdGEsZGVsZXRlIGEuY2hpbGRyZW4sby5vcmlnaW5hbD1hLGxbby5pZF09byxvLnN0YXRlLnNlbGVjdGVkJiZnLnB1c2goby5pZCksby5pZH07aWYoYy5sZW5ndGgmJmNbMF0uaWQhPT1iJiZjWzBdLnBhcmVudCE9PWIpe2ZvcihwPTAscT1jLmxlbmd0aDtxPnA7cCsrKWNbcF0uY2hpbGRyZW58fChjW3BdLmNoaWxkcmVuPVtdKSxjW3BdLnN0YXRlfHwoY1twXS5zdGF0ZT17fSksbFtjW3BdLmlkLnRvU3RyaW5nKCldPWNbcF07Zm9yKHA9MCxxPWMubGVuZ3RoO3E+cDtwKyspbFtjW3BdLnBhcmVudC50b1N0cmluZygpXT8obFtjW3BdLnBhcmVudC50b1N0cmluZygpXS5jaGlsZHJlbi5wdXNoKGNbcF0uaWQudG9TdHJpbmcoKSksbS5jaGlsZHJlbl9kLnB1c2goY1twXS5pZC50b1N0cmluZygpKSk6XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGgmJihoLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJwYXJzZVwiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDdcIixyZWFzb246XCJOb2RlIHdpdGggaW52YWxpZCBwYXJlbnRcIixkYXRhOkpTT04uc3RyaW5naWZ5KHtpZDpjW3BdLmlkLnRvU3RyaW5nKCkscGFyZW50OmNbcF0ucGFyZW50LnRvU3RyaW5nKCl9KX0saC5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwoaCxoLl9kYXRhLmNvcmUubGFzdF9lcnJvcikpO2ZvcihwPTAscT1tLmNoaWxkcmVuLmxlbmd0aDtxPnA7cCsrKW89cyhsW20uY2hpbGRyZW5bcF1dLGQsbS5wYXJlbnRzLmNvbmNhdCgpKSxmLnB1c2gobyksbFtvXS5jaGlsZHJlbl9kLmxlbmd0aCYmKGY9Zi5jb25jYXQobFtvXS5jaGlsZHJlbl9kKSk7Zm9yKHA9MCxxPW0ucGFyZW50cy5sZW5ndGg7cT5wO3ArKylsW20ucGFyZW50c1twXV0uY2hpbGRyZW5fZD1sW20ucGFyZW50c1twXV0uY2hpbGRyZW5fZC5jb25jYXQoZik7cj17Y250OmssbW9kOmwsc2VsOm4scGFyOmQsZHBjOmYsYWRkOmd9fWVsc2V7Zm9yKHA9MCxxPWMubGVuZ3RoO3E+cDtwKyspbz10KGNbcF0sZCxtLnBhcmVudHMuY29uY2F0KCkpLG8mJihlLnB1c2gobyksZi5wdXNoKG8pLGxbb10uY2hpbGRyZW5fZC5sZW5ndGgmJihmPWYuY29uY2F0KGxbb10uY2hpbGRyZW5fZCkpKTtmb3IobS5jaGlsZHJlbj1lLG0uY2hpbGRyZW5fZD1mLHA9MCxxPW0ucGFyZW50cy5sZW5ndGg7cT5wO3ArKylsW20ucGFyZW50c1twXV0uY2hpbGRyZW5fZD1sW20ucGFyZW50c1twXV0uY2hpbGRyZW5fZC5jb25jYXQoZik7cj17Y250OmssbW9kOmwsc2VsOm4scGFyOmQsZHBjOmYsYWRkOmd9fXJldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cuZG9jdW1lbnQ/cjp2b2lkIHBvc3RNZXNzYWdlKHIpfSxrPWZ1bmN0aW9uKGIsYyl7aWYobnVsbCE9PXRoaXMuZWxlbWVudCl7dGhpcy5fY250PWIuY250O3ZhciBlLGY9dGhpcy5fbW9kZWwuZGF0YTtmb3IoZSBpbiBmKWYuaGFzT3duUHJvcGVydHkoZSkmJmZbZV0uc3RhdGUmJmZbZV0uc3RhdGUubG9hZGluZyYmYi5tb2RbZV0mJihiLm1vZFtlXS5zdGF0ZS5sb2FkaW5nPSEwKTtpZih0aGlzLl9tb2RlbC5kYXRhPWIubW9kLGMpe3ZhciBnLGk9Yi5hZGQsaz1iLnNlbCxsPXRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5zbGljZSgpO2lmKGY9dGhpcy5fbW9kZWwuZGF0YSxrLmxlbmd0aCE9PWwubGVuZ3RofHxhLnZha2F0YS5hcnJheV91bmlxdWUoay5jb25jYXQobCkpLmxlbmd0aCE9PWsubGVuZ3RoKXtmb3IoZT0wLGc9ay5sZW5ndGg7Zz5lO2UrKyktMT09PWEuaW5BcnJheShrW2VdLGkpJiYtMT09PWEuaW5BcnJheShrW2VdLGwpJiYoZltrW2VdXS5zdGF0ZS5zZWxlY3RlZD0hMSk7Zm9yKGU9MCxnPWwubGVuZ3RoO2c+ZTtlKyspLTE9PT1hLmluQXJyYXkobFtlXSxrKSYmKGZbbFtlXV0uc3RhdGUuc2VsZWN0ZWQ9ITApfX1iLmFkZC5sZW5ndGgmJih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQ9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChiLmFkZCkpLHRoaXMudHJpZ2dlcihcIm1vZGVsXCIse25vZGVzOmIuZHBjLHBhcmVudDpiLnBhcn0pLGIucGFyIT09YS5qc3RyZWUucm9vdD8odGhpcy5fbm9kZV9jaGFuZ2VkKGIucGFyKSx0aGlzLnJlZHJhdygpKTp0aGlzLnJlZHJhdyghMCksYi5hZGQubGVuZ3RoJiZ0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcIm1vZGVsXCIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkfSksIWMmJmo/aihmdW5jdGlvbigpe2QuY2FsbChoLCEwKX0pOmQuY2FsbChoLCEwKX19O2lmKHRoaXMuc2V0dGluZ3MuY29yZS53b3JrZXImJndpbmRvdy5CbG9iJiZ3aW5kb3cuVVJMJiZ3aW5kb3cuV29ya2VyKXRyeXtudWxsPT09dGhpcy5fd3JrJiYodGhpcy5fd3JrPXdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyB3aW5kb3cuQmxvYihbXCJzZWxmLm9ubWVzc2FnZSA9IFwiK2kudG9TdHJpbmcoKV0se3R5cGU6XCJ0ZXh0L2phdmFzY3JpcHRcIn0pKSksIXRoaXMuX2RhdGEuY29yZS53b3JraW5nfHxlPyh0aGlzLl9kYXRhLmNvcmUud29ya2luZz0hMCxmPW5ldyB3aW5kb3cuV29ya2VyKHRoaXMuX3dyayksZi5vbm1lc3NhZ2U9ZnVuY3Rpb24oYSl7ay5jYWxsKHRoaXMsYS5kYXRhLCEwKTt0cnl7Zi50ZXJtaW5hdGUoKSxmPW51bGx9Y2F0Y2goYil7fXRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUubGVuZ3RoP3RoaXMuX2FwcGVuZF9qc29uX2RhdGEuYXBwbHkodGhpcyx0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLnNoaWZ0KCkpOnRoaXMuX2RhdGEuY29yZS53b3JraW5nPSExfS5iaW5kKHRoaXMpLGcucGFyP2YucG9zdE1lc3NhZ2UoZyk6dGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5sZW5ndGg/dGhpcy5fYXBwZW5kX2pzb25fZGF0YS5hcHBseSh0aGlzLHRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUuc2hpZnQoKSk6dGhpcy5fZGF0YS5jb3JlLndvcmtpbmc9ITEpOnRoaXMuX2RhdGEuY29yZS53b3JrZXJfcXVldWUucHVzaChbYixjLGQsITBdKX1jYXRjaChsKXtrLmNhbGwodGhpcyxpKGcpLCExKSx0aGlzLl9kYXRhLmNvcmUud29ya2VyX3F1ZXVlLmxlbmd0aD90aGlzLl9hcHBlbmRfanNvbl9kYXRhLmFwcGx5KHRoaXMsdGhpcy5fZGF0YS5jb3JlLndvcmtlcl9xdWV1ZS5zaGlmdCgpKTp0aGlzLl9kYXRhLmNvcmUud29ya2luZz0hMX1lbHNlIGsuY2FsbCh0aGlzLGkoZyksITEpfX0sX3BhcnNlX21vZGVsX2Zyb21faHRtbDpmdW5jdGlvbihjLGQsZSl7ZT1lP1tdLmNvbmNhdChlKTpbXSxkJiZlLnVuc2hpZnQoZCk7dmFyIGYsZyxoPXRoaXMuX21vZGVsLmRhdGEsaT17aWQ6ITEsdGV4dDohMSxpY29uOiEwLHBhcmVudDpkLHBhcmVudHM6ZSxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLGRhdGE6bnVsbCxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX0saixrLGw7Zm9yKGogaW4gdGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZSl0aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlLmhhc093blByb3BlcnR5KGopJiYoaS5zdGF0ZVtqXT10aGlzLl9tb2RlbC5kZWZhdWx0X3N0YXRlW2pdKTtpZihrPWEudmFrYXRhLmF0dHJpYnV0ZXMoYywhMCksYS5lYWNoKGssZnVuY3Rpb24oYixjKXtyZXR1cm4gYz1hLnZha2F0YS50cmltKGMpLGMubGVuZ3RoPyhpLmxpX2F0dHJbYl09Yyx2b2lkKFwiaWRcIj09PWImJihpLmlkPWMudG9TdHJpbmcoKSkpKTohMH0pLGs9Yy5jaGlsZHJlbihcImFcIikuZmlyc3QoKSxrLmxlbmd0aCYmKGs9YS52YWthdGEuYXR0cmlidXRlcyhrLCEwKSxhLmVhY2goayxmdW5jdGlvbihiLGMpe2M9YS52YWthdGEudHJpbShjKSxjLmxlbmd0aCYmKGkuYV9hdHRyW2JdPWMpfSkpLGs9Yy5jaGlsZHJlbihcImFcIikuZmlyc3QoKS5sZW5ndGg/Yy5jaGlsZHJlbihcImFcIikuZmlyc3QoKS5jbG9uZSgpOmMuY2xvbmUoKSxrLmNoaWxkcmVuKFwiaW5zLCBpLCB1bFwiKS5yZW1vdmUoKSxrPWsuaHRtbCgpLGs9YShcIjxkaXY+PC9kaXY+XCIpLmh0bWwoayksaS50ZXh0PXRoaXMuc2V0dGluZ3MuY29yZS5mb3JjZV90ZXh0P2sudGV4dCgpOmsuaHRtbCgpLGs9Yy5kYXRhKCksaS5kYXRhPWs/YS5leHRlbmQoITAse30sayk6bnVsbCxpLnN0YXRlLm9wZW5lZD1jLmhhc0NsYXNzKFwianN0cmVlLW9wZW5cIiksaS5zdGF0ZS5zZWxlY3RlZD1jLmNoaWxkcmVuKFwiYVwiKS5oYXNDbGFzcyhcImpzdHJlZS1jbGlja2VkXCIpLGkuc3RhdGUuZGlzYWJsZWQ9Yy5jaGlsZHJlbihcImFcIikuaGFzQ2xhc3MoXCJqc3RyZWUtZGlzYWJsZWRcIiksaS5kYXRhJiZpLmRhdGEuanN0cmVlKWZvcihqIGluIGkuZGF0YS5qc3RyZWUpaS5kYXRhLmpzdHJlZS5oYXNPd25Qcm9wZXJ0eShqKSYmKGkuc3RhdGVbal09aS5kYXRhLmpzdHJlZVtqXSk7az1jLmNoaWxkcmVuKFwiYVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpLGsubGVuZ3RoJiYoaS5pY29uPWsuaGFzQ2xhc3MoXCJqc3RyZWUtdGhlbWVpY29uLWhpZGRlblwiKT8hMTprLmF0dHIoXCJyZWxcIikpLGkuc3RhdGUuaWNvbiE9PWImJihpLmljb249aS5zdGF0ZS5pY29uKSwoaS5pY29uPT09Ynx8bnVsbD09PWkuaWNvbnx8XCJcIj09PWkuaWNvbikmJihpLmljb249ITApLGs9Yy5jaGlsZHJlbihcInVsXCIpLmNoaWxkcmVuKFwibGlcIik7ZG8gbD1cImpcIit0aGlzLl9pZCtcIl9cIisgKyt0aGlzLl9jbnQ7d2hpbGUoaFtsXSk7cmV0dXJuIGkuaWQ9aS5saV9hdHRyLmlkP2kubGlfYXR0ci5pZC50b1N0cmluZygpOmwsay5sZW5ndGg/KGsuZWFjaChmdW5jdGlvbihiLGMpe2Y9dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9odG1sKGEoYyksaS5pZCxlKSxnPXRoaXMuX21vZGVsLmRhdGFbZl0saS5jaGlsZHJlbi5wdXNoKGYpLGcuY2hpbGRyZW5fZC5sZW5ndGgmJihpLmNoaWxkcmVuX2Q9aS5jaGlsZHJlbl9kLmNvbmNhdChnLmNoaWxkcmVuX2QpKX0uYmluZCh0aGlzKSksaS5jaGlsZHJlbl9kPWkuY2hpbGRyZW5fZC5jb25jYXQoaS5jaGlsZHJlbikpOmMuaGFzQ2xhc3MoXCJqc3RyZWUtY2xvc2VkXCIpJiYoaS5zdGF0ZS5sb2FkZWQ9ITEpLGkubGlfYXR0cltcImNsYXNzXCJdJiYoaS5saV9hdHRyW1wiY2xhc3NcIl09aS5saV9hdHRyW1wiY2xhc3NcIl0ucmVwbGFjZShcImpzdHJlZS1jbG9zZWRcIixcIlwiKS5yZXBsYWNlKFwianN0cmVlLW9wZW5cIixcIlwiKSksaS5hX2F0dHJbXCJjbGFzc1wiXSYmKGkuYV9hdHRyW1wiY2xhc3NcIl09aS5hX2F0dHJbXCJjbGFzc1wiXS5yZXBsYWNlKFwianN0cmVlLWNsaWNrZWRcIixcIlwiKS5yZXBsYWNlKFwianN0cmVlLWRpc2FibGVkXCIsXCJcIikpLGhbaS5pZF09aSxpLnN0YXRlLnNlbGVjdGVkJiZ0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChpLmlkKSxpLmlkfSxfcGFyc2VfbW9kZWxfZnJvbV9mbGF0X2pzb246ZnVuY3Rpb24oYSxjLGQpe2Q9ZD9kLmNvbmNhdCgpOltdLGMmJmQudW5zaGlmdChjKTt2YXIgZT1hLmlkLnRvU3RyaW5nKCksZj10aGlzLl9tb2RlbC5kYXRhLGc9dGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZSxoLGksaixrLGw9e2lkOmUsdGV4dDphLnRleHR8fFwiXCIsaWNvbjphLmljb24hPT1iP2EuaWNvbjohMCxwYXJlbnQ6YyxwYXJlbnRzOmQsY2hpbGRyZW46YS5jaGlsZHJlbnx8W10sY2hpbGRyZW5fZDphLmNoaWxkcmVuX2R8fFtdLGRhdGE6YS5kYXRhLHN0YXRlOnt9LGxpX2F0dHI6e2lkOiExfSxhX2F0dHI6e2hyZWY6XCIjXCJ9LG9yaWdpbmFsOiExfTtmb3IoaCBpbiBnKWcuaGFzT3duUHJvcGVydHkoaCkmJihsLnN0YXRlW2hdPWdbaF0pO2lmKGEmJmEuZGF0YSYmYS5kYXRhLmpzdHJlZSYmYS5kYXRhLmpzdHJlZS5pY29uJiYobC5pY29uPWEuZGF0YS5qc3RyZWUuaWNvbiksKGwuaWNvbj09PWJ8fG51bGw9PT1sLmljb258fFwiXCI9PT1sLmljb24pJiYobC5pY29uPSEwKSxhJiZhLmRhdGEmJihsLmRhdGE9YS5kYXRhLGEuZGF0YS5qc3RyZWUpKWZvcihoIGluIGEuZGF0YS5qc3RyZWUpYS5kYXRhLmpzdHJlZS5oYXNPd25Qcm9wZXJ0eShoKSYmKGwuc3RhdGVbaF09YS5kYXRhLmpzdHJlZVtoXSk7aWYoYSYmXCJvYmplY3RcIj09dHlwZW9mIGEuc3RhdGUpZm9yKGggaW4gYS5zdGF0ZSlhLnN0YXRlLmhhc093blByb3BlcnR5KGgpJiYobC5zdGF0ZVtoXT1hLnN0YXRlW2hdKTtpZihhJiZcIm9iamVjdFwiPT10eXBlb2YgYS5saV9hdHRyKWZvcihoIGluIGEubGlfYXR0cilhLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoaCkmJihsLmxpX2F0dHJbaF09YS5saV9hdHRyW2hdKTtpZihsLmxpX2F0dHIuaWR8fChsLmxpX2F0dHIuaWQ9ZSksYSYmXCJvYmplY3RcIj09dHlwZW9mIGEuYV9hdHRyKWZvcihoIGluIGEuYV9hdHRyKWEuYV9hdHRyLmhhc093blByb3BlcnR5KGgpJiYobC5hX2F0dHJbaF09YS5hX2F0dHJbaF0pO2ZvcihhJiZhLmNoaWxkcmVuJiZhLmNoaWxkcmVuPT09ITAmJihsLnN0YXRlLmxvYWRlZD0hMSxsLmNoaWxkcmVuPVtdLGwuY2hpbGRyZW5fZD1bXSksZltsLmlkXT1sLGg9MCxpPWwuY2hpbGRyZW4ubGVuZ3RoO2k+aDtoKyspaj10aGlzLl9wYXJzZV9tb2RlbF9mcm9tX2ZsYXRfanNvbihmW2wuY2hpbGRyZW5baF1dLGwuaWQsZCksaz1mW2pdLGwuY2hpbGRyZW5fZC5wdXNoKGopLGsuY2hpbGRyZW5fZC5sZW5ndGgmJihsLmNoaWxkcmVuX2Q9bC5jaGlsZHJlbl9kLmNvbmNhdChrLmNoaWxkcmVuX2QpKTtyZXR1cm4gZGVsZXRlIGEuZGF0YSxkZWxldGUgYS5jaGlsZHJlbixmW2wuaWRdLm9yaWdpbmFsPWEsbC5zdGF0ZS5zZWxlY3RlZCYmdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLnB1c2gobC5pZCksbC5pZH0sX3BhcnNlX21vZGVsX2Zyb21fanNvbjpmdW5jdGlvbihhLGMsZCl7ZD1kP2QuY29uY2F0KCk6W10sYyYmZC51bnNoaWZ0KGMpO3ZhciBlPSExLGYsZyxoLGksaj10aGlzLl9tb2RlbC5kYXRhLGs9dGhpcy5fbW9kZWwuZGVmYXVsdF9zdGF0ZSxsO2RvIGU9XCJqXCIrdGhpcy5faWQrXCJfXCIrICsrdGhpcy5fY250O3doaWxlKGpbZV0pO2w9e2lkOiExLHRleHQ6XCJzdHJpbmdcIj09dHlwZW9mIGE/YTpcIlwiLGljb246XCJvYmplY3RcIj09dHlwZW9mIGEmJmEuaWNvbiE9PWI/YS5pY29uOiEwLHBhcmVudDpjLHBhcmVudHM6ZCxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLGRhdGE6bnVsbCxzdGF0ZTp7fSxsaV9hdHRyOntpZDohMX0sYV9hdHRyOntocmVmOlwiI1wifSxvcmlnaW5hbDohMX07Zm9yKGYgaW4gaylrLmhhc093blByb3BlcnR5KGYpJiYobC5zdGF0ZVtmXT1rW2ZdKTtpZihhJiZhLmlkJiYobC5pZD1hLmlkLnRvU3RyaW5nKCkpLGEmJmEudGV4dCYmKGwudGV4dD1hLnRleHQpLGEmJmEuZGF0YSYmYS5kYXRhLmpzdHJlZSYmYS5kYXRhLmpzdHJlZS5pY29uJiYobC5pY29uPWEuZGF0YS5qc3RyZWUuaWNvbiksKGwuaWNvbj09PWJ8fG51bGw9PT1sLmljb258fFwiXCI9PT1sLmljb24pJiYobC5pY29uPSEwKSxcclxuYSYmYS5kYXRhJiYobC5kYXRhPWEuZGF0YSxhLmRhdGEuanN0cmVlKSlmb3IoZiBpbiBhLmRhdGEuanN0cmVlKWEuZGF0YS5qc3RyZWUuaGFzT3duUHJvcGVydHkoZikmJihsLnN0YXRlW2ZdPWEuZGF0YS5qc3RyZWVbZl0pO2lmKGEmJlwib2JqZWN0XCI9PXR5cGVvZiBhLnN0YXRlKWZvcihmIGluIGEuc3RhdGUpYS5zdGF0ZS5oYXNPd25Qcm9wZXJ0eShmKSYmKGwuc3RhdGVbZl09YS5zdGF0ZVtmXSk7aWYoYSYmXCJvYmplY3RcIj09dHlwZW9mIGEubGlfYXR0cilmb3IoZiBpbiBhLmxpX2F0dHIpYS5saV9hdHRyLmhhc093blByb3BlcnR5KGYpJiYobC5saV9hdHRyW2ZdPWEubGlfYXR0cltmXSk7aWYobC5saV9hdHRyLmlkJiYhbC5pZCYmKGwuaWQ9bC5saV9hdHRyLmlkLnRvU3RyaW5nKCkpLGwuaWR8fChsLmlkPWUpLGwubGlfYXR0ci5pZHx8KGwubGlfYXR0ci5pZD1sLmlkKSxhJiZcIm9iamVjdFwiPT10eXBlb2YgYS5hX2F0dHIpZm9yKGYgaW4gYS5hX2F0dHIpYS5hX2F0dHIuaGFzT3duUHJvcGVydHkoZikmJihsLmFfYXR0cltmXT1hLmFfYXR0cltmXSk7aWYoYSYmYS5jaGlsZHJlbiYmYS5jaGlsZHJlbi5sZW5ndGgpe2ZvcihmPTAsZz1hLmNoaWxkcmVuLmxlbmd0aDtnPmY7ZisrKWg9dGhpcy5fcGFyc2VfbW9kZWxfZnJvbV9qc29uKGEuY2hpbGRyZW5bZl0sbC5pZCxkKSxpPWpbaF0sbC5jaGlsZHJlbi5wdXNoKGgpLGkuY2hpbGRyZW5fZC5sZW5ndGgmJihsLmNoaWxkcmVuX2Q9bC5jaGlsZHJlbl9kLmNvbmNhdChpLmNoaWxkcmVuX2QpKTtsLmNoaWxkcmVuX2Q9bC5jaGlsZHJlbi5jb25jYXQobC5jaGlsZHJlbl9kKX1yZXR1cm4gYSYmYS5jaGlsZHJlbiYmYS5jaGlsZHJlbj09PSEwJiYobC5zdGF0ZS5sb2FkZWQ9ITEsbC5jaGlsZHJlbj1bXSxsLmNoaWxkcmVuX2Q9W10pLGRlbGV0ZSBhLmRhdGEsZGVsZXRlIGEuY2hpbGRyZW4sbC5vcmlnaW5hbD1hLGpbbC5pZF09bCxsLnN0YXRlLnNlbGVjdGVkJiZ0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChsLmlkKSxsLmlkfSxfcmVkcmF3OmZ1bmN0aW9uKCl7dmFyIGI9dGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc/dGhpcy5fbW9kZWwuZGF0YVthLmpzdHJlZS5yb290XS5jaGlsZHJlbi5jb25jYXQoW10pOnRoaXMuX21vZGVsLmNoYW5nZWQuY29uY2F0KFtdKSxjPWkuY3JlYXRlRWxlbWVudChcIlVMXCIpLGQsZSxmLGc9dGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ7Zm9yKGU9MCxmPWIubGVuZ3RoO2Y+ZTtlKyspZD10aGlzLnJlZHJhd19ub2RlKGJbZV0sITAsdGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXcpLGQmJnRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3JiZjLmFwcGVuZENoaWxkKGQpO3RoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3JiYoYy5jbGFzc05hbWU9dGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0uY2xhc3NOYW1lLGMuc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JvdXBcIiksdGhpcy5lbGVtZW50LmVtcHR5KCkuYXBwZW5kKGMpKSxudWxsIT09ZyYmdGhpcy5zZXR0aW5ncy5jb3JlLnJlc3RvcmVfZm9jdXMmJihkPXRoaXMuZ2V0X25vZGUoZywhMCksZCYmZC5sZW5ndGgmJmQuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKVswXSE9PWkuYWN0aXZlRWxlbWVudD9kLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikudHJpZ2dlcihcImZvY3VzXCIpOnRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW51bGwpLHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3PSExLHRoaXMuX21vZGVsLmNoYW5nZWQ9W10sdGhpcy50cmlnZ2VyKFwicmVkcmF3XCIse25vZGVzOmJ9KX0scmVkcmF3OmZ1bmN0aW9uKGEpe2EmJih0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdz0hMCksdGhpcy5fcmVkcmF3KCl9LGRyYXdfY2hpbGRyZW46ZnVuY3Rpb24oYil7dmFyIGM9dGhpcy5nZXRfbm9kZShiKSxkPSExLGU9ITEsZj0hMSxnPWk7aWYoIWMpcmV0dXJuITE7aWYoYy5pZD09PWEuanN0cmVlLnJvb3QpcmV0dXJuIHRoaXMucmVkcmF3KCEwKTtpZihiPXRoaXMuZ2V0X25vZGUoYiwhMCksIWJ8fCFiLmxlbmd0aClyZXR1cm4hMTtpZihiLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGlsZHJlblwiKS5yZW1vdmUoKSxiPWJbMF0sYy5jaGlsZHJlbi5sZW5ndGgmJmMuc3RhdGUubG9hZGVkKXtmb3IoZj1nLmNyZWF0ZUVsZW1lbnQoXCJVTFwiKSxmLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyb3VwXCIpLGYuY2xhc3NOYW1lPVwianN0cmVlLWNoaWxkcmVuXCIsZD0wLGU9Yy5jaGlsZHJlbi5sZW5ndGg7ZT5kO2QrKylmLmFwcGVuZENoaWxkKHRoaXMucmVkcmF3X25vZGUoYy5jaGlsZHJlbltkXSwhMCwhMCkpO2IuYXBwZW5kQ2hpbGQoZil9fSxyZWRyYXdfbm9kZTpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZj10aGlzLmdldF9ub2RlKGIpLGc9ITEsaD0hMSxqPSExLGs9ITEsbD0hMSxtPSExLG49XCJcIixvPWkscD10aGlzLl9tb2RlbC5kYXRhLHE9ITEscj0hMSxzPW51bGwsdD0wLHU9MCx2PSExLHc9ITE7aWYoIWYpcmV0dXJuITE7aWYoZi5pZD09PWEuanN0cmVlLnJvb3QpcmV0dXJuIHRoaXMucmVkcmF3KCEwKTtpZihjPWN8fDA9PT1mLmNoaWxkcmVuLmxlbmd0aCxiPWkucXVlcnlTZWxlY3Rvcj90aGlzLmVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihcIiNcIisoLTEhPT1cIjAxMjM0NTY3ODlcIi5pbmRleE9mKGYuaWRbMF0pP1wiXFxcXDNcIitmLmlkWzBdK1wiIFwiK2YuaWQuc3Vic3RyKDEpLnJlcGxhY2UoYS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKTpmLmlkLnJlcGxhY2UoYS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSkpOmkuZ2V0RWxlbWVudEJ5SWQoZi5pZCkpYj1hKGIpLGR8fChnPWIucGFyZW50KCkucGFyZW50KClbMF0sZz09PXRoaXMuZWxlbWVudFswXSYmKGc9bnVsbCksaD1iLmluZGV4KCkpLGN8fCFmLmNoaWxkcmVuLmxlbmd0aHx8Yi5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikubGVuZ3RofHwoYz0hMCksY3x8KGo9Yi5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIilbMF0pLHE9Yi5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpWzBdPT09aS5hY3RpdmVFbGVtZW50LGIucmVtb3ZlKCk7ZWxzZSBpZihjPSEwLCFkKXtpZihnPWYucGFyZW50IT09YS5qc3RyZWUucm9vdD9hKFwiI1wiK2YucGFyZW50LnJlcGxhY2UoYS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSx0aGlzLmVsZW1lbnQpWzBdOm51bGwsIShudWxsPT09Z3x8ZyYmcFtmLnBhcmVudF0uc3RhdGUub3BlbmVkKSlyZXR1cm4hMTtoPWEuaW5BcnJheShmLmlkLG51bGw9PT1nP3BbYS5qc3RyZWUucm9vdF0uY2hpbGRyZW46cFtmLnBhcmVudF0uY2hpbGRyZW4pfWI9dGhpcy5fZGF0YS5jb3JlLm5vZGUuY2xvbmVOb2RlKCEwKSxuPVwianN0cmVlLW5vZGUgXCI7Zm9yKGsgaW4gZi5saV9hdHRyKWlmKGYubGlfYXR0ci5oYXNPd25Qcm9wZXJ0eShrKSl7aWYoXCJpZFwiPT09ayljb250aW51ZTtcImNsYXNzXCIhPT1rP2Iuc2V0QXR0cmlidXRlKGssZi5saV9hdHRyW2tdKTpuKz1mLmxpX2F0dHJba119Zm9yKGYuYV9hdHRyLmlkfHwoZi5hX2F0dHIuaWQ9Zi5pZCtcIl9hbmNob3JcIiksYi5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtc2VsZWN0ZWRcIiwhIWYuc3RhdGUuc2VsZWN0ZWQpLGIuY2hpbGROb2Rlc1sxXS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWxldmVsXCIsZi5wYXJlbnRzLmxlbmd0aCksdGhpcy5zZXR0aW5ncy5jb3JlLmNvbXB1dGVfZWxlbWVudHNfcG9zaXRpb25zJiYoYi5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtc2V0c2l6ZVwiLHBbZi5wYXJlbnRdLmNoaWxkcmVuLmxlbmd0aCksYi5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtcG9zaW5zZXRcIixwW2YucGFyZW50XS5jaGlsZHJlbi5pbmRleE9mKGYuaWQpKzEpKSxmLnN0YXRlLmRpc2FibGVkJiZiLmNoaWxkTm9kZXNbMV0uc2V0QXR0cmlidXRlKFwiYXJpYS1kaXNhYmxlZFwiLCEwKSxrPTAsbD1mLmNoaWxkcmVuLmxlbmd0aDtsPms7aysrKWlmKCFwW2YuY2hpbGRyZW5ba11dLnN0YXRlLmhpZGRlbil7dj0hMDticmVha31pZihudWxsIT09Zi5wYXJlbnQmJnBbZi5wYXJlbnRdJiYhZi5zdGF0ZS5oaWRkZW4mJihrPWEuaW5BcnJheShmLmlkLHBbZi5wYXJlbnRdLmNoaWxkcmVuKSx3PWYuaWQsLTEhPT1rKSlmb3IoaysrLGw9cFtmLnBhcmVudF0uY2hpbGRyZW4ubGVuZ3RoO2w+aztrKyspaWYocFtwW2YucGFyZW50XS5jaGlsZHJlbltrXV0uc3RhdGUuaGlkZGVufHwodz1wW2YucGFyZW50XS5jaGlsZHJlbltrXSksdyE9PWYuaWQpYnJlYWs7Zi5zdGF0ZS5oaWRkZW4mJihuKz1cIiBqc3RyZWUtaGlkZGVuXCIpLGYuc3RhdGUubG9hZGluZyYmKG4rPVwiIGpzdHJlZS1sb2FkaW5nXCIpLGYuc3RhdGUubG9hZGVkJiYhdj9uKz1cIiBqc3RyZWUtbGVhZlwiOihuKz1mLnN0YXRlLm9wZW5lZCYmZi5zdGF0ZS5sb2FkZWQ/XCIganN0cmVlLW9wZW5cIjpcIiBqc3RyZWUtY2xvc2VkXCIsYi5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShcImFyaWEtZXhwYW5kZWRcIixmLnN0YXRlLm9wZW5lZCYmZi5zdGF0ZS5sb2FkZWQpKSx3PT09Zi5pZCYmKG4rPVwiIGpzdHJlZS1sYXN0XCIpLGIuaWQ9Zi5pZCxiLmNsYXNzTmFtZT1uLG49KGYuc3RhdGUuc2VsZWN0ZWQ/XCIganN0cmVlLWNsaWNrZWRcIjpcIlwiKSsoZi5zdGF0ZS5kaXNhYmxlZD9cIiBqc3RyZWUtZGlzYWJsZWRcIjpcIlwiKTtmb3IobCBpbiBmLmFfYXR0cilpZihmLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShsKSl7aWYoXCJocmVmXCI9PT1sJiZcIiNcIj09PWYuYV9hdHRyW2xdKWNvbnRpbnVlO1wiY2xhc3NcIiE9PWw/Yi5jaGlsZE5vZGVzWzFdLnNldEF0dHJpYnV0ZShsLGYuYV9hdHRyW2xdKTpuKz1cIiBcIitmLmFfYXR0cltsXX1pZihuLmxlbmd0aCYmKGIuY2hpbGROb2Rlc1sxXS5jbGFzc05hbWU9XCJqc3RyZWUtYW5jaG9yIFwiK24pLChmLmljb24mJmYuaWNvbiE9PSEwfHxmLmljb249PT0hMSkmJihmLmljb249PT0hMT9iLmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXS5jbGFzc05hbWUrPVwiIGpzdHJlZS10aGVtZWljb24taGlkZGVuXCI6LTE9PT1mLmljb24uaW5kZXhPZihcIi9cIikmJi0xPT09Zi5pY29uLmluZGV4T2YoXCIuXCIpP2IuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLmNsYXNzTmFtZSs9XCIgXCIrZi5pY29uK1wiIGpzdHJlZS10aGVtZWljb24tY3VzdG9tXCI6KGIuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRJbWFnZT0ndXJsKFwiJytmLmljb24rJ1wiKScsYi5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMF0uc3R5bGUuYmFja2dyb3VuZFBvc2l0aW9uPVwiY2VudGVyIGNlbnRlclwiLGIuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLnN0eWxlLmJhY2tncm91bmRTaXplPVwiYXV0b1wiLGIuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzBdLmNsYXNzTmFtZSs9XCIganN0cmVlLXRoZW1laWNvbi1jdXN0b21cIikpLHRoaXMuc2V0dGluZ3MuY29yZS5mb3JjZV90ZXh0P2IuY2hpbGROb2Rlc1sxXS5hcHBlbmRDaGlsZChvLmNyZWF0ZVRleHROb2RlKGYudGV4dCkpOmIuY2hpbGROb2Rlc1sxXS5pbm5lckhUTUwrPWYudGV4dCxjJiZmLmNoaWxkcmVuLmxlbmd0aCYmKGYuc3RhdGUub3BlbmVkfHxlKSYmZi5zdGF0ZS5sb2FkZWQpe2ZvcihtPW8uY3JlYXRlRWxlbWVudChcIlVMXCIpLG0uc2V0QXR0cmlidXRlKFwicm9sZVwiLFwiZ3JvdXBcIiksbS5jbGFzc05hbWU9XCJqc3RyZWUtY2hpbGRyZW5cIixrPTAsbD1mLmNoaWxkcmVuLmxlbmd0aDtsPms7aysrKW0uYXBwZW5kQ2hpbGQodGhpcy5yZWRyYXdfbm9kZShmLmNoaWxkcmVuW2tdLGMsITApKTtiLmFwcGVuZENoaWxkKG0pfWlmKGomJmIuYXBwZW5kQ2hpbGQoaiksIWQpe2ZvcihnfHwoZz10aGlzLmVsZW1lbnRbMF0pLGs9MCxsPWcuY2hpbGROb2Rlcy5sZW5ndGg7bD5rO2srKylpZihnLmNoaWxkTm9kZXNba10mJmcuY2hpbGROb2Rlc1trXS5jbGFzc05hbWUmJi0xIT09Zy5jaGlsZE5vZGVzW2tdLmNsYXNzTmFtZS5pbmRleE9mKFwianN0cmVlLWNoaWxkcmVuXCIpKXtzPWcuY2hpbGROb2Rlc1trXTticmVha31zfHwocz1vLmNyZWF0ZUVsZW1lbnQoXCJVTFwiKSxzLnNldEF0dHJpYnV0ZShcInJvbGVcIixcImdyb3VwXCIpLHMuY2xhc3NOYW1lPVwianN0cmVlLWNoaWxkcmVuXCIsZy5hcHBlbmRDaGlsZChzKSksZz1zLGg8Zy5jaGlsZE5vZGVzLmxlbmd0aD9nLmluc2VydEJlZm9yZShiLGcuY2hpbGROb2Rlc1toXSk6Zy5hcHBlbmRDaGlsZChiKSxxJiYodD10aGlzLmVsZW1lbnRbMF0uc2Nyb2xsVG9wLHU9dGhpcy5lbGVtZW50WzBdLnNjcm9sbExlZnQsYi5jaGlsZE5vZGVzWzFdLmZvY3VzKCksdGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcD10LHRoaXMuZWxlbWVudFswXS5zY3JvbGxMZWZ0PXUpfXJldHVybiBmLnN0YXRlLm9wZW5lZCYmIWYuc3RhdGUubG9hZGVkJiYoZi5zdGF0ZS5vcGVuZWQ9ITEsc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMub3Blbl9ub2RlKGYuaWQsITEsMCl9LmJpbmQodGhpcyksMCkpLGJ9LG9wZW5fbm9kZTpmdW5jdGlvbihjLGQsZSl7dmFyIGYsZyxoLGk7aWYoYS52YWthdGEuaXNfYXJyYXkoYykpe2ZvcihjPWMuc2xpY2UoKSxmPTAsZz1jLmxlbmd0aDtnPmY7ZisrKXRoaXMub3Blbl9ub2RlKGNbZl0sZCxlKTtyZXR1cm4hMH1yZXR1cm4gYz10aGlzLmdldF9ub2RlKGMpLGMmJmMuaWQhPT1hLmpzdHJlZS5yb290PyhlPWU9PT1iP3RoaXMuc2V0dGluZ3MuY29yZS5hbmltYXRpb246ZSx0aGlzLmlzX2Nsb3NlZChjKT90aGlzLmlzX2xvYWRlZChjKT8oaD10aGlzLmdldF9ub2RlKGMsITApLGk9dGhpcyxoLmxlbmd0aCYmKGUmJmguY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmxlbmd0aCYmaC5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuc3RvcCghMCwhMCksYy5jaGlsZHJlbi5sZW5ndGgmJiF0aGlzLl9maXJzdENoaWxkKGguY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpWzBdKSYmdGhpcy5kcmF3X2NoaWxkcmVuKGMpLGU/KHRoaXMudHJpZ2dlcihcImJlZm9yZV9vcGVuXCIse25vZGU6Y30pLGguY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLmNzcyhcImRpc3BsYXlcIixcIm5vbmVcIikuZW5kKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2xvc2VkXCIpLmFkZENsYXNzKFwianN0cmVlLW9wZW5cIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCEwKS5lbmQoKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuc3RvcCghMCwhMCkuc2xpZGVEb3duKGUsZnVuY3Rpb24oKXt0aGlzLnN0eWxlLmRpc3BsYXk9XCJcIixpLmVsZW1lbnQmJmkudHJpZ2dlcihcImFmdGVyX29wZW5cIix7bm9kZTpjfSl9KSk6KHRoaXMudHJpZ2dlcihcImJlZm9yZV9vcGVuXCIse25vZGU6Y30pLGhbMF0uY2xhc3NOYW1lPWhbMF0uY2xhc3NOYW1lLnJlcGxhY2UoXCJqc3RyZWUtY2xvc2VkXCIsXCJqc3RyZWUtb3BlblwiKSxoWzBdLmNoaWxkTm9kZXNbMV0uc2V0QXR0cmlidXRlKFwiYXJpYS1leHBhbmRlZFwiLCEwKSkpLGMuc3RhdGUub3BlbmVkPSEwLGQmJmQuY2FsbCh0aGlzLGMsITApLGgubGVuZ3RofHx0aGlzLnRyaWdnZXIoXCJiZWZvcmVfb3BlblwiLHtub2RlOmN9KSx0aGlzLnRyaWdnZXIoXCJvcGVuX25vZGVcIix7bm9kZTpjfSksZSYmaC5sZW5ndGh8fHRoaXMudHJpZ2dlcihcImFmdGVyX29wZW5cIix7bm9kZTpjfSksITApOnRoaXMuaXNfbG9hZGluZyhjKT9zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5vcGVuX25vZGUoYyxkLGUpfS5iaW5kKHRoaXMpLDUwMCk6dm9pZCB0aGlzLmxvYWRfbm9kZShjLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGI/dGhpcy5vcGVuX25vZGUoYSxkLGUpOmQ/ZC5jYWxsKHRoaXMsYSwhMSk6ITF9KTooZCYmZC5jYWxsKHRoaXMsYywhMSksITEpKTohMX0sX29wZW5fdG86ZnVuY3Rpb24oYil7aWYoYj10aGlzLmdldF9ub2RlKGIpLCFifHxiLmlkPT09YS5qc3RyZWUucm9vdClyZXR1cm4hMTt2YXIgYyxkLGU9Yi5wYXJlbnRzO2ZvcihjPTAsZD1lLmxlbmd0aDtkPmM7Yys9MSljIT09YS5qc3RyZWUucm9vdCYmdGhpcy5vcGVuX25vZGUoZVtjXSwhMSwwKTtyZXR1cm4gYShcIiNcIitiLmlkLnJlcGxhY2UoYS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKSx0aGlzLmVsZW1lbnQpfSxjbG9zZV9ub2RlOmZ1bmN0aW9uKGMsZCl7dmFyIGUsZixnLGg7aWYoYS52YWthdGEuaXNfYXJyYXkoYykpe2ZvcihjPWMuc2xpY2UoKSxlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKXRoaXMuY2xvc2Vfbm9kZShjW2VdLGQpO3JldHVybiEwfXJldHVybiBjPXRoaXMuZ2V0X25vZGUoYyksYyYmYy5pZCE9PWEuanN0cmVlLnJvb3Q/dGhpcy5pc19jbG9zZWQoYyk/ITE6KGQ9ZD09PWI/dGhpcy5zZXR0aW5ncy5jb3JlLmFuaW1hdGlvbjpkLGc9dGhpcyxoPXRoaXMuZ2V0X25vZGUoYywhMCksYy5zdGF0ZS5vcGVuZWQ9ITEsdGhpcy50cmlnZ2VyKFwiY2xvc2Vfbm9kZVwiLHtub2RlOmN9KSx2b2lkKGgubGVuZ3RoP2Q/aC5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuYXR0cihcInN0eWxlXCIsXCJkaXNwbGF5OmJsb2NrICFpbXBvcnRhbnRcIikuZW5kKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtb3BlblwiKS5hZGRDbGFzcyhcImpzdHJlZS1jbG9zZWRcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hdHRyKFwiYXJpYS1leHBhbmRlZFwiLCExKS5lbmQoKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikuc3RvcCghMCwhMCkuc2xpZGVVcChkLGZ1bmN0aW9uKCl7dGhpcy5zdHlsZS5kaXNwbGF5PVwiXCIsaC5jaGlsZHJlbihcIi5qc3RyZWUtY2hpbGRyZW5cIikucmVtb3ZlKCksZy5lbGVtZW50JiZnLnRyaWdnZXIoXCJhZnRlcl9jbG9zZVwiLHtub2RlOmN9KX0pOihoWzBdLmNsYXNzTmFtZT1oWzBdLmNsYXNzTmFtZS5yZXBsYWNlKFwianN0cmVlLW9wZW5cIixcImpzdHJlZS1jbG9zZWRcIiksaC5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmF0dHIoXCJhcmlhLWV4cGFuZGVkXCIsITEpLGguY2hpbGRyZW4oXCIuanN0cmVlLWNoaWxkcmVuXCIpLnJlbW92ZSgpLHRoaXMudHJpZ2dlcihcImFmdGVyX2Nsb3NlXCIse25vZGU6Y30pKTp0aGlzLnRyaWdnZXIoXCJhZnRlcl9jbG9zZVwiLHtub2RlOmN9KSkpOiExfSx0b2dnbGVfbm9kZTpmdW5jdGlvbihiKXt2YXIgYyxkO2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXtmb3IoYj1iLnNsaWNlKCksYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzLnRvZ2dsZV9ub2RlKGJbY10pO3JldHVybiEwfXJldHVybiB0aGlzLmlzX2Nsb3NlZChiKT90aGlzLm9wZW5fbm9kZShiKTp0aGlzLmlzX29wZW4oYik/dGhpcy5jbG9zZV9ub2RlKGIpOnZvaWQgMH0sb3Blbl9hbGw6ZnVuY3Rpb24oYixjLGQpe2lmKGJ8fChiPWEuanN0cmVlLnJvb3QpLGI9dGhpcy5nZXRfbm9kZShiKSwhYilyZXR1cm4hMTt2YXIgZT1iLmlkPT09YS5qc3RyZWUucm9vdD90aGlzLmdldF9jb250YWluZXJfdWwoKTp0aGlzLmdldF9ub2RlKGIsITApLGYsZyxoO2lmKCFlLmxlbmd0aCl7Zm9yKGY9MCxnPWIuY2hpbGRyZW5fZC5sZW5ndGg7Zz5mO2YrKyl0aGlzLmlzX2Nsb3NlZCh0aGlzLl9tb2RlbC5kYXRhW2IuY2hpbGRyZW5fZFtmXV0pJiYodGhpcy5fbW9kZWwuZGF0YVtiLmNoaWxkcmVuX2RbZl1dLnN0YXRlLm9wZW5lZD0hMCk7cmV0dXJuIHRoaXMudHJpZ2dlcihcIm9wZW5fYWxsXCIse25vZGU6Yn0pfWQ9ZHx8ZSxoPXRoaXMsZT10aGlzLmlzX2Nsb3NlZChiKT9lLmZpbmQoXCIuanN0cmVlLWNsb3NlZFwiKS5hZGRCYWNrKCk6ZS5maW5kKFwiLmpzdHJlZS1jbG9zZWRcIiksZS5lYWNoKGZ1bmN0aW9uKCl7aC5vcGVuX25vZGUodGhpcyxmdW5jdGlvbihhLGIpe2ImJnRoaXMuaXNfcGFyZW50KGEpJiZ0aGlzLm9wZW5fYWxsKGEsYyxkKX0sY3x8MCl9KSwwPT09ZC5maW5kKFwiLmpzdHJlZS1jbG9zZWRcIikubGVuZ3RoJiZ0aGlzLnRyaWdnZXIoXCJvcGVuX2FsbFwiLHtub2RlOnRoaXMuZ2V0X25vZGUoZCl9KX0sY2xvc2VfYWxsOmZ1bmN0aW9uKGIsYyl7aWYoYnx8KGI9YS5qc3RyZWUucm9vdCksYj10aGlzLmdldF9ub2RlKGIpLCFiKXJldHVybiExO3ZhciBkPWIuaWQ9PT1hLmpzdHJlZS5yb290P3RoaXMuZ2V0X2NvbnRhaW5lcl91bCgpOnRoaXMuZ2V0X25vZGUoYiwhMCksZT10aGlzLGYsZztmb3IoZC5sZW5ndGgmJihkPXRoaXMuaXNfb3BlbihiKT9kLmZpbmQoXCIuanN0cmVlLW9wZW5cIikuYWRkQmFjaygpOmQuZmluZChcIi5qc3RyZWUtb3BlblwiKSxhKGQuZ2V0KCkucmV2ZXJzZSgpKS5lYWNoKGZ1bmN0aW9uKCl7ZS5jbG9zZV9ub2RlKHRoaXMsY3x8MCl9KSksZj0wLGc9Yi5jaGlsZHJlbl9kLmxlbmd0aDtnPmY7ZisrKXRoaXMuX21vZGVsLmRhdGFbYi5jaGlsZHJlbl9kW2ZdXS5zdGF0ZS5vcGVuZWQ9ITE7dGhpcy50cmlnZ2VyKFwiY2xvc2VfYWxsXCIse25vZGU6Yn0pfSxpc19kaXNhYmxlZDpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLmdldF9ub2RlKGEpLGEmJmEuc3RhdGUmJmEuc3RhdGUuZGlzYWJsZWR9LGVuYWJsZV9ub2RlOmZ1bmN0aW9uKGIpe3ZhciBjLGQ7aWYoYS52YWthdGEuaXNfYXJyYXkoYikpe2ZvcihiPWIuc2xpY2UoKSxjPTAsZD1iLmxlbmd0aDtkPmM7YysrKXRoaXMuZW5hYmxlX25vZGUoYltjXSk7cmV0dXJuITB9cmV0dXJuIGI9dGhpcy5nZXRfbm9kZShiKSxiJiZiLmlkIT09YS5qc3RyZWUucm9vdD8oYi5zdGF0ZS5kaXNhYmxlZD0hMSx0aGlzLmdldF9ub2RlKGIsITApLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtZGlzYWJsZWRcIikuYXR0cihcImFyaWEtZGlzYWJsZWRcIiwhMSksdm9pZCB0aGlzLnRyaWdnZXIoXCJlbmFibGVfbm9kZVwiLHtub2RlOmJ9KSk6ITF9LGRpc2FibGVfbm9kZTpmdW5jdGlvbihiKXt2YXIgYyxkO2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXtmb3IoYj1iLnNsaWNlKCksYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzLmRpc2FibGVfbm9kZShiW2NdKTtyZXR1cm4hMH1yZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGImJmIuaWQhPT1hLmpzdHJlZS5yb290PyhiLnN0YXRlLmRpc2FibGVkPSEwLHRoaXMuZ2V0X25vZGUoYiwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hZGRDbGFzcyhcImpzdHJlZS1kaXNhYmxlZFwiKS5hdHRyKFwiYXJpYS1kaXNhYmxlZFwiLCEwKSx2b2lkIHRoaXMudHJpZ2dlcihcImRpc2FibGVfbm9kZVwiLHtub2RlOmJ9KSk6ITF9LGlzX2hpZGRlbjpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLmdldF9ub2RlKGEpLGEuc3RhdGUuaGlkZGVuPT09ITB9LGhpZGVfbm9kZTpmdW5jdGlvbihiLGMpe3ZhciBkLGU7aWYoYS52YWthdGEuaXNfYXJyYXkoYikpe2ZvcihiPWIuc2xpY2UoKSxkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKXRoaXMuaGlkZV9ub2RlKGJbZF0sITApO3JldHVybiBjfHx0aGlzLnJlZHJhdygpLCEwfXJldHVybiBiPXRoaXMuZ2V0X25vZGUoYiksYiYmYi5pZCE9PWEuanN0cmVlLnJvb3Q/dm9pZChiLnN0YXRlLmhpZGRlbnx8KGIuc3RhdGUuaGlkZGVuPSEwLHRoaXMuX25vZGVfY2hhbmdlZChiLnBhcmVudCksY3x8dGhpcy5yZWRyYXcoKSx0aGlzLnRyaWdnZXIoXCJoaWRlX25vZGVcIix7bm9kZTpifSkpKTohMX0sc2hvd19ub2RlOmZ1bmN0aW9uKGIsYyl7dmFyIGQsZTtpZihhLnZha2F0YS5pc19hcnJheShiKSl7Zm9yKGI9Yi5zbGljZSgpLGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspdGhpcy5zaG93X25vZGUoYltkXSwhMCk7cmV0dXJuIGN8fHRoaXMucmVkcmF3KCksITB9cmV0dXJuIGI9dGhpcy5nZXRfbm9kZShiKSxiJiZiLmlkIT09YS5qc3RyZWUucm9vdD92b2lkKGIuc3RhdGUuaGlkZGVuJiYoYi5zdGF0ZS5oaWRkZW49ITEsdGhpcy5fbm9kZV9jaGFuZ2VkKGIucGFyZW50KSxjfHx0aGlzLnJlZHJhdygpLHRoaXMudHJpZ2dlcihcInNob3dfbm9kZVwiLHtub2RlOmJ9KSkpOiExfSxoaWRlX2FsbDpmdW5jdGlvbihiKXt2YXIgYyxkPXRoaXMuX21vZGVsLmRhdGEsZT1bXTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmMhPT1hLmpzdHJlZS5yb290JiYhZFtjXS5zdGF0ZS5oaWRkZW4mJihkW2NdLnN0YXRlLmhpZGRlbj0hMCxlLnB1c2goYykpO3JldHVybiB0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhdz0hMCxifHx0aGlzLnJlZHJhdygpLHRoaXMudHJpZ2dlcihcImhpZGVfYWxsXCIse25vZGVzOmV9KSxlfSxzaG93X2FsbDpmdW5jdGlvbihiKXt2YXIgYyxkPXRoaXMuX21vZGVsLmRhdGEsZT1bXTtmb3IoYyBpbiBkKWQuaGFzT3duUHJvcGVydHkoYykmJmMhPT1hLmpzdHJlZS5yb290JiZkW2NdLnN0YXRlLmhpZGRlbiYmKGRbY10uc3RhdGUuaGlkZGVuPSExLGUucHVzaChjKSk7cmV0dXJuIHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3PSEwLGJ8fHRoaXMucmVkcmF3KCksdGhpcy50cmlnZ2VyKFwic2hvd19hbGxcIix7bm9kZXM6ZX0pLGV9LGFjdGl2YXRlX25vZGU6ZnVuY3Rpb24oYSxjKXtpZih0aGlzLmlzX2Rpc2FibGVkKGEpKXJldHVybiExO2lmKGMmJlwib2JqZWN0XCI9PXR5cGVvZiBjfHwoYz17fSksdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD10aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkJiZ0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLmlkIT09Yj90aGlzLmdldF9ub2RlKHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQuaWQpOm51bGwsdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZCYmIXRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQuc3RhdGUuc2VsZWN0ZWQmJih0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkPW51bGwpLCF0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkJiZ0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoJiYodGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD10aGlzLmdldF9ub2RlKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoLTFdKSksdGhpcy5zZXR0aW5ncy5jb3JlLm11bHRpcGxlJiYoYy5tZXRhS2V5fHxjLmN0cmxLZXl8fGMuc2hpZnRLZXkpJiYoIWMuc2hpZnRLZXl8fHRoaXMuX2RhdGEuY29yZS5sYXN0X2NsaWNrZWQmJnRoaXMuZ2V0X3BhcmVudChhKSYmdGhpcy5nZXRfcGFyZW50KGEpPT09dGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZC5wYXJlbnQpKWlmKGMuc2hpZnRLZXkpe3ZhciBkPXRoaXMuZ2V0X25vZGUoYSkuaWQsZT10aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLmlkLGY9dGhpcy5nZXRfbm9kZSh0aGlzLl9kYXRhLmNvcmUubGFzdF9jbGlja2VkLnBhcmVudCkuY2hpbGRyZW4sZz0hMSxoLGk7Zm9yKGg9MCxpPWYubGVuZ3RoO2k+aDtoKz0xKWZbaF09PT1kJiYoZz0hZyksZltoXT09PWUmJihnPSFnKSx0aGlzLmlzX2Rpc2FibGVkKGZbaF0pfHwhZyYmZltoXSE9PWQmJmZbaF0hPT1lP3RoaXMuZGVzZWxlY3Rfbm9kZShmW2hdLCEwLGMpOnRoaXMuaXNfaGlkZGVuKGZbaF0pfHx0aGlzLnNlbGVjdF9ub2RlKGZbaF0sITAsITEsYyk7dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJzZWxlY3Rfbm9kZVwiLG5vZGU6dGhpcy5nZXRfbm9kZShhKSxzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZXZlbnQ6Y30pfWVsc2UgdGhpcy5pc19zZWxlY3RlZChhKT90aGlzLmRlc2VsZWN0X25vZGUoYSwhMSxjKTp0aGlzLnNlbGVjdF9ub2RlKGEsITEsITEsYyk7ZWxzZSF0aGlzLnNldHRpbmdzLmNvcmUubXVsdGlwbGUmJihjLm1ldGFLZXl8fGMuY3RybEtleXx8Yy5zaGlmdEtleSkmJnRoaXMuaXNfc2VsZWN0ZWQoYSk/dGhpcy5kZXNlbGVjdF9ub2RlKGEsITEsYyk6KHRoaXMuZGVzZWxlY3RfYWxsKCEwKSx0aGlzLnNlbGVjdF9ub2RlKGEsITEsITEsYyksdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD10aGlzLmdldF9ub2RlKGEpKTt0aGlzLnRyaWdnZXIoXCJhY3RpdmF0ZV9ub2RlXCIse25vZGU6dGhpcy5nZXRfbm9kZShhKSxldmVudDpjfSl9LGhvdmVyX25vZGU6ZnVuY3Rpb24oYSl7aWYoYT10aGlzLmdldF9ub2RlKGEsITApLCFhfHwhYS5sZW5ndGh8fGEuY2hpbGRyZW4oXCIuanN0cmVlLWhvdmVyZWRcIikubGVuZ3RoKXJldHVybiExO3ZhciBiPXRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1ob3ZlcmVkXCIpLGM9dGhpcy5lbGVtZW50O2ImJmIubGVuZ3RoJiZ0aGlzLmRlaG92ZXJfbm9kZShiKSxhLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3MoXCJqc3RyZWUtaG92ZXJlZFwiKSx0aGlzLnRyaWdnZXIoXCJob3Zlcl9ub2RlXCIse25vZGU6dGhpcy5nZXRfbm9kZShhKX0pLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtjLmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIixhWzBdLmlkKX0sMCl9LGRlaG92ZXJfbm9kZTpmdW5jdGlvbihhKXtyZXR1cm4gYT10aGlzLmdldF9ub2RlKGEsITApLGEmJmEubGVuZ3RoJiZhLmNoaWxkcmVuKFwiLmpzdHJlZS1ob3ZlcmVkXCIpLmxlbmd0aD8oYS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWhvdmVyZWRcIiksdm9pZCB0aGlzLnRyaWdnZXIoXCJkZWhvdmVyX25vZGVcIix7bm9kZTp0aGlzLmdldF9ub2RlKGEpfSkpOiExfSxzZWxlY3Rfbm9kZTpmdW5jdGlvbihiLGMsZCxlKXt2YXIgZixnLGgsaTtpZihhLnZha2F0YS5pc19hcnJheShiKSl7Zm9yKGI9Yi5zbGljZSgpLGc9MCxoPWIubGVuZ3RoO2g+ZztnKyspdGhpcy5zZWxlY3Rfbm9kZShiW2ddLGMsZCxlKTtyZXR1cm4hMH1yZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGImJmIuaWQhPT1hLmpzdHJlZS5yb290PyhmPXRoaXMuZ2V0X25vZGUoYiwhMCksdm9pZChiLnN0YXRlLnNlbGVjdGVkfHwoYi5zdGF0ZS5zZWxlY3RlZD0hMCx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQucHVzaChiLmlkKSxkfHwoZj10aGlzLl9vcGVuX3RvKGIpKSxmJiZmLmxlbmd0aCYmZi5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKFwianN0cmVlLWNsaWNrZWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMCksdGhpcy50cmlnZ2VyKFwic2VsZWN0X25vZGVcIix7bm9kZTpiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxldmVudDplfSksY3x8dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJzZWxlY3Rfbm9kZVwiLG5vZGU6YixzZWxlY3RlZDp0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZXZlbnQ6ZX0pKSkpOiExfSxkZXNlbGVjdF9ub2RlOmZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGc7aWYoYS52YWthdGEuaXNfYXJyYXkoYikpe2ZvcihiPWIuc2xpY2UoKSxlPTAsZj1iLmxlbmd0aDtmPmU7ZSsrKXRoaXMuZGVzZWxlY3Rfbm9kZShiW2VdLGMsZCk7cmV0dXJuITB9cmV0dXJuIGI9dGhpcy5nZXRfbm9kZShiKSxiJiZiLmlkIT09YS5qc3RyZWUucm9vdD8oZz10aGlzLmdldF9ub2RlKGIsITApLHZvaWQoYi5zdGF0ZS5zZWxlY3RlZCYmKGIuc3RhdGUuc2VsZWN0ZWQ9ITEsdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkPWEudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxiLmlkKSxnLmxlbmd0aCYmZy5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNsaWNrZWRcIikuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSksdGhpcy50cmlnZ2VyKFwiZGVzZWxlY3Rfbm9kZVwiLHtub2RlOmIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGV2ZW50OmR9KSxjfHx0aGlzLnRyaWdnZXIoXCJjaGFuZ2VkXCIse2FjdGlvbjpcImRlc2VsZWN0X25vZGVcIixub2RlOmIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLGV2ZW50OmR9KSkpKTohMX0sc2VsZWN0X2FsbDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKSxkLGU7Zm9yKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZD10aGlzLl9tb2RlbC5kYXRhW2EuanN0cmVlLnJvb3RdLmNoaWxkcmVuX2QuY29uY2F0KCksZD0wLGU9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmxlbmd0aDtlPmQ7ZCsrKXRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkW2RdXSYmKHRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkW2RdXS5zdGF0ZS5zZWxlY3RlZD0hMCk7dGhpcy5yZWRyYXcoITApLHRoaXMudHJpZ2dlcihcInNlbGVjdF9hbGxcIix7c2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkfSksYnx8dGhpcy50cmlnZ2VyKFwiY2hhbmdlZFwiLHthY3Rpb246XCJzZWxlY3RfYWxsXCIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLG9sZF9zZWxlY3Rpb246Y30pfSxkZXNlbGVjdF9hbGw6ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSksYyxkO2ZvcihjPTAsZD10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQubGVuZ3RoO2Q+YztjKyspdGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbY11dJiYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWRbY11dLnN0YXRlLnNlbGVjdGVkPSExKTt0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQ9W10sdGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLWNsaWNrZWRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2xpY2tlZFwiKS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKSx0aGlzLnRyaWdnZXIoXCJkZXNlbGVjdF9hbGxcIix7c2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLG5vZGU6Yn0pLGF8fHRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwiZGVzZWxlY3RfYWxsXCIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLG9sZF9zZWxlY3Rpb246Yn0pfSxpc19zZWxlY3RlZDpmdW5jdGlvbihiKXtyZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGImJmIuaWQhPT1hLmpzdHJlZS5yb290P2Iuc3RhdGUuc2VsZWN0ZWQ6ITF9LGdldF9zZWxlY3RlZDpmdW5jdGlvbihiKXtyZXR1cm4gYj9hLm1hcCh0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQsZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuZ2V0X25vZGUoYSl9LmJpbmQodGhpcykpOnRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZC5zbGljZSgpfSxnZXRfdG9wX3NlbGVjdGVkOmZ1bmN0aW9uKGIpe3ZhciBjPXRoaXMuZ2V0X3NlbGVjdGVkKCEwKSxkPXt9LGUsZixnLGg7Zm9yKGU9MCxmPWMubGVuZ3RoO2Y+ZTtlKyspZFtjW2VdLmlkXT1jW2VdO2ZvcihlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWZvcihnPTAsaD1jW2VdLmNoaWxkcmVuX2QubGVuZ3RoO2g+ZztnKyspZFtjW2VdLmNoaWxkcmVuX2RbZ11dJiZkZWxldGUgZFtjW2VdLmNoaWxkcmVuX2RbZ11dO2M9W107Zm9yKGUgaW4gZClkLmhhc093blByb3BlcnR5KGUpJiZjLnB1c2goZSk7cmV0dXJuIGI/YS5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShhKX0uYmluZCh0aGlzKSk6Y30sZ2V0X2JvdHRvbV9zZWxlY3RlZDpmdW5jdGlvbihiKXt2YXIgYz10aGlzLmdldF9zZWxlY3RlZCghMCksZD1bXSxlLGY7Zm9yKGU9MCxmPWMubGVuZ3RoO2Y+ZTtlKyspY1tlXS5jaGlsZHJlbi5sZW5ndGh8fGQucHVzaChjW2VdLmlkKTtyZXR1cm4gYj9hLm1hcChkLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldF9ub2RlKGEpfS5iaW5kKHRoaXMpKTpkfSxnZXRfc3RhdGU6ZnVuY3Rpb24oKXt2YXIgYj17Y29yZTp7b3BlbjpbXSxsb2FkZWQ6W10sc2Nyb2xsOntsZWZ0OnRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0KCksdG9wOnRoaXMuZWxlbWVudC5zY3JvbGxUb3AoKX0sc2VsZWN0ZWQ6W119fSxjO2ZvcihjIGluIHRoaXMuX21vZGVsLmRhdGEpdGhpcy5fbW9kZWwuZGF0YS5oYXNPd25Qcm9wZXJ0eShjKSYmYyE9PWEuanN0cmVlLnJvb3QmJih0aGlzLl9tb2RlbC5kYXRhW2NdLnN0YXRlLmxvYWRlZCYmdGhpcy5zZXR0aW5ncy5jb3JlLmxvYWRlZF9zdGF0ZSYmYi5jb3JlLmxvYWRlZC5wdXNoKGMpLHRoaXMuX21vZGVsLmRhdGFbY10uc3RhdGUub3BlbmVkJiZiLmNvcmUub3Blbi5wdXNoKGMpLHRoaXMuX21vZGVsLmRhdGFbY10uc3RhdGUuc2VsZWN0ZWQmJmIuY29yZS5zZWxlY3RlZC5wdXNoKGMpKTtyZXR1cm4gYn0sc2V0X3N0YXRlOmZ1bmN0aW9uKGMsZCl7aWYoYyl7aWYoYy5jb3JlJiZjLmNvcmUuc2VsZWN0ZWQmJmMuY29yZS5pbml0aWFsX3NlbGVjdGlvbj09PWImJihjLmNvcmUuaW5pdGlhbF9zZWxlY3Rpb249dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdChbXSkuc29ydCgpLmpvaW4oXCIsXCIpKSxjLmNvcmUpe3ZhciBlLGYsZyxoLGk7aWYoYy5jb3JlLmxvYWRlZClyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb3JlLmxvYWRlZF9zdGF0ZSYmYS52YWthdGEuaXNfYXJyYXkoYy5jb3JlLmxvYWRlZCkmJmMuY29yZS5sb2FkZWQubGVuZ3RoP3RoaXMuX2xvYWRfbm9kZXMoYy5jb3JlLmxvYWRlZCxmdW5jdGlvbihhKXtkZWxldGUgYy5jb3JlLmxvYWRlZCx0aGlzLnNldF9zdGF0ZShjLGQpfSk6KGRlbGV0ZSBjLmNvcmUubG9hZGVkLHRoaXMuc2V0X3N0YXRlKGMsZCkpLCExO2lmKGMuY29yZS5vcGVuKXJldHVybiBhLnZha2F0YS5pc19hcnJheShjLmNvcmUub3BlbikmJmMuY29yZS5vcGVuLmxlbmd0aD90aGlzLl9sb2FkX25vZGVzKGMuY29yZS5vcGVuLGZ1bmN0aW9uKGEpe3RoaXMub3Blbl9ub2RlKGEsITEsMCksZGVsZXRlIGMuY29yZS5vcGVuLHRoaXMuc2V0X3N0YXRlKGMsZCl9KTooZGVsZXRlIGMuY29yZS5vcGVuLHRoaXMuc2V0X3N0YXRlKGMsZCkpLCExO2lmKGMuY29yZS5zY3JvbGwpcmV0dXJuIGMuY29yZS5zY3JvbGwmJmMuY29yZS5zY3JvbGwubGVmdCE9PWImJnRoaXMuZWxlbWVudC5zY3JvbGxMZWZ0KGMuY29yZS5zY3JvbGwubGVmdCksYy5jb3JlLnNjcm9sbCYmYy5jb3JlLnNjcm9sbC50b3AhPT1iJiZ0aGlzLmVsZW1lbnQuc2Nyb2xsVG9wKGMuY29yZS5zY3JvbGwudG9wKSxkZWxldGUgYy5jb3JlLnNjcm9sbCx0aGlzLnNldF9zdGF0ZShjLGQpLCExO2lmKGMuY29yZS5zZWxlY3RlZClyZXR1cm4gaD10aGlzLChjLmNvcmUuaW5pdGlhbF9zZWxlY3Rpb249PT1ifHxjLmNvcmUuaW5pdGlhbF9zZWxlY3Rpb249PT10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKS5zb3J0KCkuam9pbihcIixcIikpJiYodGhpcy5kZXNlbGVjdF9hbGwoKSxhLmVhY2goYy5jb3JlLnNlbGVjdGVkLGZ1bmN0aW9uKGEsYil7aC5zZWxlY3Rfbm9kZShiLCExLCEwKX0pKSxkZWxldGUgYy5jb3JlLmluaXRpYWxfc2VsZWN0aW9uLGRlbGV0ZSBjLmNvcmUuc2VsZWN0ZWQsdGhpcy5zZXRfc3RhdGUoYyxkKSwhMTtmb3IoaSBpbiBjKWMuaGFzT3duUHJvcGVydHkoaSkmJlwiY29yZVwiIT09aSYmLTE9PT1hLmluQXJyYXkoaSx0aGlzLnNldHRpbmdzLnBsdWdpbnMpJiZkZWxldGUgY1tpXTtpZihhLmlzRW1wdHlPYmplY3QoYy5jb3JlKSlyZXR1cm4gZGVsZXRlIGMuY29yZSx0aGlzLnNldF9zdGF0ZShjLGQpLCExfXJldHVybiBhLmlzRW1wdHlPYmplY3QoYyk/KGM9bnVsbCxkJiZkLmNhbGwodGhpcyksdGhpcy50cmlnZ2VyKFwic2V0X3N0YXRlXCIpLCExKTohMH1yZXR1cm4hMX0scmVmcmVzaDpmdW5jdGlvbihiLGMpe3RoaXMuX2RhdGEuY29yZS5zdGF0ZT1jPT09ITA/e306dGhpcy5nZXRfc3RhdGUoKSxjJiZhLnZha2F0YS5pc19mdW5jdGlvbihjKSYmKHRoaXMuX2RhdGEuY29yZS5zdGF0ZT1jLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUuc3RhdGUpKSx0aGlzLl9jbnQ9MCx0aGlzLl9tb2RlbC5kYXRhPXt9LHRoaXMuX21vZGVsLmRhdGFbYS5qc3RyZWUucm9vdF09e2lkOmEuanN0cmVlLnJvb3QscGFyZW50Om51bGwscGFyZW50czpbXSxjaGlsZHJlbjpbXSxjaGlsZHJlbl9kOltdLHN0YXRlOntsb2FkZWQ6ITF9fSx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQ9W10sdGhpcy5fZGF0YS5jb3JlLmxhc3RfY2xpY2tlZD1udWxsLHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW51bGw7dmFyIGQ9dGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0uY2xhc3NOYW1lO2J8fCh0aGlzLmVsZW1lbnQuaHRtbChcIjx1bCBjbGFzcz0nXCIrZCtcIicgcm9sZT0nZ3JvdXAnPjxsaSBjbGFzcz0nanN0cmVlLWluaXRpYWwtbm9kZSBqc3RyZWUtbG9hZGluZyBqc3RyZWUtbGVhZiBqc3RyZWUtbGFzdCcgcm9sZT0nbm9uZScgaWQ9J2pcIit0aGlzLl9pZCtcIl9sb2FkaW5nJz48aSBjbGFzcz0nanN0cmVlLWljb24ganN0cmVlLW9jbCc+PC9pPjxhIGNsYXNzPSdqc3RyZWUtYW5jaG9yJyByb2xlPSd0cmVlaXRlbScgaHJlZj0nIyc+PGkgY2xhc3M9J2pzdHJlZS1pY29uIGpzdHJlZS10aGVtZWljb24taGlkZGVuJz48L2k+XCIrdGhpcy5nZXRfc3RyaW5nKFwiTG9hZGluZyAuLi5cIikrXCI8L2E+PC9saT48L3VsPlwiKSx0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLFwialwiK3RoaXMuX2lkK1wiX2xvYWRpbmdcIikpLHRoaXMubG9hZF9ub2RlKGEuanN0cmVlLnJvb3QsZnVuY3Rpb24oYixjKXtjJiYodGhpcy5nZXRfY29udGFpbmVyX3VsKClbMF0uY2xhc3NOYW1lPWQsdGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSkmJnRoaXMuZWxlbWVudC5hdHRyKFwiYXJpYS1hY3RpdmVkZXNjZW5kYW50XCIsdGhpcy5fZmlyc3RDaGlsZCh0aGlzLmdldF9jb250YWluZXJfdWwoKVswXSkuaWQpLHRoaXMuc2V0X3N0YXRlKGEuZXh0ZW5kKCEwLHt9LHRoaXMuX2RhdGEuY29yZS5zdGF0ZSksZnVuY3Rpb24oKXt0aGlzLnRyaWdnZXIoXCJyZWZyZXNoXCIpfSkpLHRoaXMuX2RhdGEuY29yZS5zdGF0ZT1udWxsfSl9LHJlZnJlc2hfbm9kZTpmdW5jdGlvbihiKXtpZihiPXRoaXMuZ2V0X25vZGUoYiksIWJ8fGIuaWQ9PT1hLmpzdHJlZS5yb290KXJldHVybiExO3ZhciBjPVtdLGQ9W10sZT10aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQuY29uY2F0KFtdKTtkLnB1c2goYi5pZCksYi5zdGF0ZS5vcGVuZWQ9PT0hMCYmYy5wdXNoKGIuaWQpLHRoaXMuZ2V0X25vZGUoYiwhMCkuZmluZChcIi5qc3RyZWUtb3BlblwiKS5lYWNoKGZ1bmN0aW9uKCl7ZC5wdXNoKHRoaXMuaWQpLGMucHVzaCh0aGlzLmlkKX0pLHRoaXMuX2xvYWRfbm9kZXMoZCxmdW5jdGlvbihhKXt0aGlzLm9wZW5fbm9kZShjLCExLDApLHRoaXMuc2VsZWN0X25vZGUoZSksdGhpcy50cmlnZ2VyKFwicmVmcmVzaF9ub2RlXCIse25vZGU6Yixub2RlczphfSl9LmJpbmQodGhpcyksITEsITApfSxzZXRfaWQ6ZnVuY3Rpb24oYixjKXtpZihiPXRoaXMuZ2V0X25vZGUoYiksIWJ8fGIuaWQ9PT1hLmpzdHJlZS5yb290KXJldHVybiExO3ZhciBkLGUsZj10aGlzLl9tb2RlbC5kYXRhLGc9Yi5pZDtmb3IoYz1jLnRvU3RyaW5nKCksZltiLnBhcmVudF0uY2hpbGRyZW5bYS5pbkFycmF5KGIuaWQsZltiLnBhcmVudF0uY2hpbGRyZW4pXT1jLGQ9MCxlPWIucGFyZW50cy5sZW5ndGg7ZT5kO2QrKylmW2IucGFyZW50c1tkXV0uY2hpbGRyZW5fZFthLmluQXJyYXkoYi5pZCxmW2IucGFyZW50c1tkXV0uY2hpbGRyZW5fZCldPWM7Zm9yKGQ9MCxlPWIuY2hpbGRyZW4ubGVuZ3RoO2U+ZDtkKyspZltiLmNoaWxkcmVuW2RdXS5wYXJlbnQ9Yztmb3IoZD0wLGU9Yi5jaGlsZHJlbl9kLmxlbmd0aDtlPmQ7ZCsrKWZbYi5jaGlsZHJlbl9kW2RdXS5wYXJlbnRzW2EuaW5BcnJheShiLmlkLGZbYi5jaGlsZHJlbl9kW2RdXS5wYXJlbnRzKV09YztyZXR1cm4gZD1hLmluQXJyYXkoYi5pZCx0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQpLC0xIT09ZCYmKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZFtkXT1jKSxkPXRoaXMuZ2V0X25vZGUoYi5pZCwhMCksZCYmKGQuYXR0cihcImlkXCIsYyksdGhpcy5lbGVtZW50LmF0dHIoXCJhcmlhLWFjdGl2ZWRlc2NlbmRhbnRcIik9PT1iLmlkJiZ0aGlzLmVsZW1lbnQuYXR0cihcImFyaWEtYWN0aXZlZGVzY2VuZGFudFwiLGMpKSxkZWxldGUgZltiLmlkXSxiLmlkPWMsYi5saV9hdHRyLmlkPWMsZltjXT1iLHRoaXMudHJpZ2dlcihcInNldF9pZFwiLHtub2RlOmIsXCJuZXdcIjpiLmlkLG9sZDpnfSksITB9LGdldF90ZXh0OmZ1bmN0aW9uKGIpe3JldHVybiBiPXRoaXMuZ2V0X25vZGUoYiksYiYmYi5pZCE9PWEuanN0cmVlLnJvb3Q/Yi50ZXh0OiExfSxzZXRfdGV4dDpmdW5jdGlvbihiLGMpe3ZhciBkLGU7aWYoYS52YWthdGEuaXNfYXJyYXkoYikpe2ZvcihiPWIuc2xpY2UoKSxkPTAsZT1iLmxlbmd0aDtlPmQ7ZCsrKXRoaXMuc2V0X3RleHQoYltkXSxjKTtyZXR1cm4hMH1yZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGImJmIuaWQhPT1hLmpzdHJlZS5yb290PyhiLnRleHQ9Yyx0aGlzLmdldF9ub2RlKGIsITApLmxlbmd0aCYmdGhpcy5yZWRyYXdfbm9kZShiLmlkKSx0aGlzLnRyaWdnZXIoXCJzZXRfdGV4dFwiLHtvYmo6Yix0ZXh0OmN9KSwhMCk6ITF9LGdldF9qc29uOmZ1bmN0aW9uKGIsYyxkKXtpZihiPXRoaXMuZ2V0X25vZGUoYnx8YS5qc3RyZWUucm9vdCksIWIpcmV0dXJuITE7YyYmYy5mbGF0JiYhZCYmKGQ9W10pO3ZhciBlPXtpZDpiLmlkLHRleHQ6Yi50ZXh0LGljb246dGhpcy5nZXRfaWNvbihiKSxsaV9hdHRyOmEuZXh0ZW5kKCEwLHt9LGIubGlfYXR0ciksYV9hdHRyOmEuZXh0ZW5kKCEwLHt9LGIuYV9hdHRyKSxzdGF0ZTp7fSxkYXRhOmMmJmMubm9fZGF0YT8hMTphLmV4dGVuZCghMCxhLnZha2F0YS5pc19hcnJheShiLmRhdGEpP1tdOnt9LGIuZGF0YSl9LGYsZztpZihjJiZjLmZsYXQ/ZS5wYXJlbnQ9Yi5wYXJlbnQ6ZS5jaGlsZHJlbj1bXSxjJiZjLm5vX3N0YXRlKWRlbGV0ZSBlLnN0YXRlO2Vsc2UgZm9yKGYgaW4gYi5zdGF0ZSliLnN0YXRlLmhhc093blByb3BlcnR5KGYpJiYoZS5zdGF0ZVtmXT1iLnN0YXRlW2ZdKTtpZihjJiZjLm5vX2xpX2F0dHImJmRlbGV0ZSBlLmxpX2F0dHIsYyYmYy5ub19hX2F0dHImJmRlbGV0ZSBlLmFfYXR0cixjJiZjLm5vX2lkJiYoZGVsZXRlIGUuaWQsZS5saV9hdHRyJiZlLmxpX2F0dHIuaWQmJmRlbGV0ZSBlLmxpX2F0dHIuaWQsZS5hX2F0dHImJmUuYV9hdHRyLmlkJiZkZWxldGUgZS5hX2F0dHIuaWQpLGMmJmMuZmxhdCYmYi5pZCE9PWEuanN0cmVlLnJvb3QmJmQucHVzaChlKSwhY3x8IWMubm9fY2hpbGRyZW4pZm9yKGY9MCxnPWIuY2hpbGRyZW4ubGVuZ3RoO2c+ZjtmKyspYyYmYy5mbGF0P3RoaXMuZ2V0X2pzb24oYi5jaGlsZHJlbltmXSxjLGQpOmUuY2hpbGRyZW4ucHVzaCh0aGlzLmdldF9qc29uKGIuY2hpbGRyZW5bZl0sYykpO3JldHVybiBjJiZjLmZsYXQ/ZDpiLmlkPT09YS5qc3RyZWUucm9vdD9lLmNoaWxkcmVuOmV9LGNyZWF0ZV9ub2RlOmZ1bmN0aW9uKGMsZCxlLGYsZyl7aWYobnVsbD09PWMmJihjPWEuanN0cmVlLnJvb3QpLGM9dGhpcy5nZXRfbm9kZShjKSwhYylyZXR1cm4hMTtpZihlPWU9PT1iP1wibGFzdFwiOmUsIWUudG9TdHJpbmcoKS5tYXRjaCgvXihiZWZvcmV8YWZ0ZXIpJC8pJiYhZyYmIXRoaXMuaXNfbG9hZGVkKGMpKXJldHVybiB0aGlzLmxvYWRfbm9kZShjLGZ1bmN0aW9uKCl7dGhpcy5jcmVhdGVfbm9kZShjLGQsZSxmLCEwKX0pO2R8fChkPXt0ZXh0OnRoaXMuZ2V0X3N0cmluZyhcIk5ldyBub2RlXCIpfSksZD1cInN0cmluZ1wiPT10eXBlb2YgZD97dGV4dDpkfTphLmV4dGVuZCghMCx7fSxkKSxkLnRleHQ9PT1iJiYoZC50ZXh0PXRoaXMuZ2V0X3N0cmluZyhcIk5ldyBub2RlXCIpKTt2YXIgaCxpLGosaztzd2l0Y2goYy5pZD09PWEuanN0cmVlLnJvb3QmJihcImJlZm9yZVwiPT09ZSYmKGU9XCJmaXJzdFwiKSxcImFmdGVyXCI9PT1lJiYoZT1cImxhc3RcIikpLGUpe2Nhc2VcImJlZm9yZVwiOmg9dGhpcy5nZXRfbm9kZShjLnBhcmVudCksZT1hLmluQXJyYXkoYy5pZCxoLmNoaWxkcmVuKSxjPWg7YnJlYWs7Y2FzZVwiYWZ0ZXJcIjpoPXRoaXMuZ2V0X25vZGUoYy5wYXJlbnQpLGU9YS5pbkFycmF5KGMuaWQsaC5jaGlsZHJlbikrMSxjPWg7YnJlYWs7Y2FzZVwiaW5zaWRlXCI6Y2FzZVwiZmlyc3RcIjplPTA7YnJlYWs7Y2FzZVwibGFzdFwiOmU9Yy5jaGlsZHJlbi5sZW5ndGg7YnJlYWs7ZGVmYXVsdDplfHwoZT0wKX1pZihlPmMuY2hpbGRyZW4ubGVuZ3RoJiYoZT1jLmNoaWxkcmVuLmxlbmd0aCksZC5pZHx8KGQuaWQ9ITApLCF0aGlzLmNoZWNrKFwiY3JlYXRlX25vZGVcIixkLGMsZSkpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2lmKGQuaWQ9PT0hMCYmZGVsZXRlIGQuaWQsZD10aGlzLl9wYXJzZV9tb2RlbF9mcm9tX2pzb24oZCxjLmlkLGMucGFyZW50cy5jb25jYXQoKSksIWQpcmV0dXJuITE7Zm9yKGg9dGhpcy5nZXRfbm9kZShkKSxpPVtdLGkucHVzaChkKSxpPWkuY29uY2F0KGguY2hpbGRyZW5fZCksdGhpcy50cmlnZ2VyKFwibW9kZWxcIix7bm9kZXM6aSxwYXJlbnQ6Yy5pZH0pLGMuY2hpbGRyZW5fZD1jLmNoaWxkcmVuX2QuY29uY2F0KGkpLGo9MCxrPWMucGFyZW50cy5sZW5ndGg7az5qO2orKyl0aGlzLl9tb2RlbC5kYXRhW2MucGFyZW50c1tqXV0uY2hpbGRyZW5fZD10aGlzLl9tb2RlbC5kYXRhW2MucGFyZW50c1tqXV0uY2hpbGRyZW5fZC5jb25jYXQoaSk7Zm9yKGQ9aCxoPVtdLGo9MCxrPWMuY2hpbGRyZW4ubGVuZ3RoO2s+ajtqKyspaFtqPj1lP2orMTpqXT1jLmNoaWxkcmVuW2pdO3JldHVybiBoW2VdPWQuaWQsYy5jaGlsZHJlbj1oLHRoaXMucmVkcmF3X25vZGUoYywhMCksdGhpcy50cmlnZ2VyKFwiY3JlYXRlX25vZGVcIix7bm9kZTp0aGlzLmdldF9ub2RlKGQpLHBhcmVudDpjLmlkLHBvc2l0aW9uOmV9KSxmJiZmLmNhbGwodGhpcyx0aGlzLmdldF9ub2RlKGQpKSxkLmlkfSxyZW5hbWVfbm9kZTpmdW5jdGlvbihiLGMpe3ZhciBkLGUsZjtpZihhLnZha2F0YS5pc19hcnJheShiKSl7Zm9yKGI9Yi5zbGljZSgpLGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspdGhpcy5yZW5hbWVfbm9kZShiW2RdLGMpO3JldHVybiEwfXJldHVybiBiPXRoaXMuZ2V0X25vZGUoYiksYiYmYi5pZCE9PWEuanN0cmVlLnJvb3Q/KGY9Yi50ZXh0LHRoaXMuY2hlY2soXCJyZW5hbWVfbm9kZVwiLGIsdGhpcy5nZXRfcGFyZW50KGIpLGMpPyh0aGlzLnNldF90ZXh0KGIsYyksdGhpcy50cmlnZ2VyKFwicmVuYW1lX25vZGVcIix7bm9kZTpiLHRleHQ6YyxvbGQ6Zn0pLCEwKToodGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITEpKTohMX0sZGVsZXRlX25vZGU6ZnVuY3Rpb24oYil7dmFyIGMsZCxlLGYsZyxoLGksaixrLGwsbSxuO2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXtmb3IoYj1iLnNsaWNlKCksYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzLmRlbGV0ZV9ub2RlKGJbY10pO3JldHVybiEwfWlmKGI9dGhpcy5nZXRfbm9kZShiKSwhYnx8Yi5pZD09PWEuanN0cmVlLnJvb3QpcmV0dXJuITE7aWYoZT10aGlzLmdldF9ub2RlKGIucGFyZW50KSxmPWEuaW5BcnJheShiLmlkLGUuY2hpbGRyZW4pLGw9ITEsIXRoaXMuY2hlY2soXCJkZWxldGVfbm9kZVwiLGIsZSxmKSlyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyx0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvciksITE7Zm9yKC0xIT09ZiYmKGUuY2hpbGRyZW49YS52YWthdGEuYXJyYXlfcmVtb3ZlKGUuY2hpbGRyZW4sZikpLGc9Yi5jaGlsZHJlbl9kLmNvbmNhdChbXSksZy5wdXNoKGIuaWQpLGg9MCxpPWIucGFyZW50cy5sZW5ndGg7aT5oO2grKyl0aGlzLl9tb2RlbC5kYXRhW2IucGFyZW50c1toXV0uY2hpbGRyZW5fZD1hLnZha2F0YS5hcnJheV9maWx0ZXIodGhpcy5fbW9kZWwuZGF0YVtiLnBhcmVudHNbaF1dLmNoaWxkcmVuX2QsZnVuY3Rpb24oYil7cmV0dXJuLTE9PT1hLmluQXJyYXkoYixnKX0pO2ZvcihqPTAsaz1nLmxlbmd0aDtrPmo7aisrKWlmKHRoaXMuX21vZGVsLmRhdGFbZ1tqXV0uc3RhdGUuc2VsZWN0ZWQpe2w9ITA7YnJlYWt9Zm9yKGwmJih0aGlzLl9kYXRhLmNvcmUuc2VsZWN0ZWQ9YS52YWthdGEuYXJyYXlfZmlsdGVyKHRoaXMuX2RhdGEuY29yZS5zZWxlY3RlZCxmdW5jdGlvbihiKXtyZXR1cm4tMT09PWEuaW5BcnJheShiLGcpfSkpLHRoaXMudHJpZ2dlcihcImRlbGV0ZV9ub2RlXCIse25vZGU6YixwYXJlbnQ6ZS5pZH0pLGwmJnRoaXMudHJpZ2dlcihcImNoYW5nZWRcIix7YWN0aW9uOlwiZGVsZXRlX25vZGVcIixub2RlOmIsc2VsZWN0ZWQ6dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLHBhcmVudDplLmlkfSksaj0wLGs9Zy5sZW5ndGg7az5qO2orKylkZWxldGUgdGhpcy5fbW9kZWwuZGF0YVtnW2pdXTtyZXR1cm4tMSE9PWEuaW5BcnJheSh0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCxnKSYmKHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW51bGwsbT10aGlzLmVsZW1lbnRbMF0uc2Nyb2xsVG9wLG49dGhpcy5lbGVtZW50WzBdLnNjcm9sbExlZnQsZS5pZD09PWEuanN0cmVlLnJvb3Q/dGhpcy5fbW9kZWwuZGF0YVthLmpzdHJlZS5yb290XS5jaGlsZHJlblswXSYmdGhpcy5nZXRfbm9kZSh0aGlzLl9tb2RlbC5kYXRhW2EuanN0cmVlLnJvb3RdLmNoaWxkcmVuWzBdLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdlcihcImZvY3VzXCIpOnRoaXMuZ2V0X25vZGUoZSwhMCkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIiksdGhpcy5lbGVtZW50WzBdLnNjcm9sbFRvcD1tLHRoaXMuZWxlbWVudFswXS5zY3JvbGxMZWZ0PW4pLHRoaXMucmVkcmF3X25vZGUoZSwhMCksITB9LGNoZWNrOmZ1bmN0aW9uKGIsYyxkLGUsZil7Yz1jJiZjLmlkP2M6dGhpcy5nZXRfbm9kZShjKSxkPWQmJmQuaWQ/ZDp0aGlzLmdldF9ub2RlKGQpO3ZhciBnPWIubWF0Y2goL15tb3ZlX25vZGV8Y29weV9ub2RlfGNyZWF0ZV9ub2RlJC9pKT9kOmMsaD10aGlzLnNldHRpbmdzLmNvcmUuY2hlY2tfY2FsbGJhY2s7aWYoXCJtb3ZlX25vZGVcIj09PWJ8fFwiY29weV9ub2RlXCI9PT1iKXtpZighKGYmJmYuaXNfbXVsdGl8fFwibW92ZV9ub2RlXCIhPT1ifHxhLmluQXJyYXkoYy5pZCxkLmNoaWxkcmVuKSE9PWUpKXJldHVybiB0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcImNvcmVcIixpZDpcImNvcmVfMDhcIixyZWFzb246XCJNb3Zpbmcgbm9kZSB0byBpdHMgY3VycmVudCBwb3NpdGlvblwiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazpiLHBvczplLG9iajpjJiZjLmlkP2MuaWQ6ITEscGFyOmQmJmQuaWQ/ZC5pZDohMX0pfSwhMTtpZighKGYmJmYuaXNfbXVsdGl8fGMuaWQhPT1kLmlkJiYoXCJtb3ZlX25vZGVcIiE9PWJ8fGEuaW5BcnJheShjLmlkLGQuY2hpbGRyZW4pIT09ZSkmJi0xPT09YS5pbkFycmF5KGQuaWQsYy5jaGlsZHJlbl9kKSkpcmV0dXJuIHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wMVwiLHJlYXNvbjpcIk1vdmluZyBwYXJlbnQgaW5zaWRlIGNoaWxkXCIsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmIscG9zOmUsb2JqOmMmJmMuaWQ/Yy5pZDohMSxwYXI6ZCYmZC5pZD9kLmlkOiExfSl9LCExfXJldHVybiBnJiZnLmRhdGEmJihnPWcuZGF0YSksZyYmZy5mdW5jdGlvbnMmJihnLmZ1bmN0aW9uc1tiXT09PSExfHxnLmZ1bmN0aW9uc1tiXT09PSEwKT8oZy5mdW5jdGlvbnNbYl09PT0hMSYmKHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwiY29yZVwiLGlkOlwiY29yZV8wMlwiLHJlYXNvbjpcIk5vZGUgZGF0YSBwcmV2ZW50cyBmdW5jdGlvbjogXCIrYixkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6Yixwb3M6ZSxvYmo6YyYmYy5pZD9jLmlkOiExLHBhcjpkJiZkLmlkP2QuaWQ6ITF9KX0pLGcuZnVuY3Rpb25zW2JdKTpoPT09ITF8fGEudmFrYXRhLmlzX2Z1bmN0aW9uKGgpJiZoLmNhbGwodGhpcyxiLGMsZCxlLGYpPT09ITF8fGgmJmhbYl09PT0hMT8odGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJjb3JlXCIsaWQ6XCJjb3JlXzAzXCIscmVhc29uOlwiVXNlciBjb25maWcgZm9yIGNvcmUuY2hlY2tfY2FsbGJhY2sgcHJldmVudHMgZnVuY3Rpb246IFwiK2IsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmIscG9zOmUsb2JqOmMmJmMuaWQ/Yy5pZDohMSxwYXI6ZCYmZC5pZD9kLmlkOiExfSl9LCExKTohMH0sbGFzdF9lcnJvcjpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcn0sbW92ZV9ub2RlOmZ1bmN0aW9uKGMsZCxlLGYsZyxoLGkpe3ZhciBqLGssbCxtLG4sbyxwLHEscixzLHQsdSx2LHc7aWYoZD10aGlzLmdldF9ub2RlKGQpLGU9ZT09PWI/MDplLCFkKXJldHVybiExO2lmKCFlLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmIWcmJiF0aGlzLmlzX2xvYWRlZChkKSlyZXR1cm4gdGhpcy5sb2FkX25vZGUoZCxmdW5jdGlvbigpe3RoaXMubW92ZV9ub2RlKGMsZCxlLGYsITAsITEsaSl9KTtpZihhLnZha2F0YS5pc19hcnJheShjKSl7aWYoMSE9PWMubGVuZ3RoKXtmb3Ioaj0wLGs9Yy5sZW5ndGg7az5qO2orKykocj10aGlzLm1vdmVfbm9kZShjW2pdLGQsZSxmLGcsITEsaSkpJiYoZD1yLGU9XCJhZnRlclwiKTtyZXR1cm4gdGhpcy5yZWRyYXcoKSwhMH1jPWNbMF19aWYoYz1jJiZjLmlkP2M6dGhpcy5nZXRfbm9kZShjKSwhY3x8Yy5pZD09PWEuanN0cmVlLnJvb3QpcmV0dXJuITE7aWYobD0oYy5wYXJlbnR8fGEuanN0cmVlLnJvb3QpLnRvU3RyaW5nKCksbj1lLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmZC5pZCE9PWEuanN0cmVlLnJvb3Q/dGhpcy5nZXRfbm9kZShkLnBhcmVudCk6ZCxvPWk/aTp0aGlzLl9tb2RlbC5kYXRhW2MuaWRdP3RoaXM6YS5qc3RyZWUucmVmZXJlbmNlKGMuaWQpLHA9IW98fCFvLl9pZHx8dGhpcy5faWQhPT1vLl9pZCxtPW8mJm8uX2lkJiZsJiZvLl9tb2RlbC5kYXRhW2xdJiZvLl9tb2RlbC5kYXRhW2xdLmNoaWxkcmVuP2EuaW5BcnJheShjLmlkLG8uX21vZGVsLmRhdGFbbF0uY2hpbGRyZW4pOi0xLG8mJm8uX2lkJiYoYz1vLl9tb2RlbC5kYXRhW2MuaWRdKSxwKXJldHVybihyPXRoaXMuY29weV9ub2RlKGMsZCxlLGYsZywhMSxpKSk/KG8mJm8uZGVsZXRlX25vZGUoYykscik6ITE7c3dpdGNoKGQuaWQ9PT1hLmpzdHJlZS5yb290JiYoXCJiZWZvcmVcIj09PWUmJihlPVwiZmlyc3RcIiksXCJhZnRlclwiPT09ZSYmKGU9XCJsYXN0XCIpKSxlKXtjYXNlXCJiZWZvcmVcIjplPWEuaW5BcnJheShkLmlkLG4uY2hpbGRyZW4pO2JyZWFrO2Nhc2VcImFmdGVyXCI6ZT1hLmluQXJyYXkoZC5pZCxuLmNoaWxkcmVuKSsxO2JyZWFrO2Nhc2VcImluc2lkZVwiOmNhc2VcImZpcnN0XCI6ZT0wO2JyZWFrO2Nhc2VcImxhc3RcIjplPW4uY2hpbGRyZW4ubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6ZXx8KGU9MCl9aWYoZT5uLmNoaWxkcmVuLmxlbmd0aCYmKGU9bi5jaGlsZHJlbi5sZW5ndGgpLCF0aGlzLmNoZWNrKFwibW92ZV9ub2RlXCIsYyxuLGUse2NvcmU6ITAsb3JpZ2luOmksaXNfbXVsdGk6byYmby5faWQmJm8uX2lkIT09dGhpcy5faWQsaXNfZm9yZWlnbjohb3x8IW8uX2lkfSkpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2lmKGMucGFyZW50PT09bi5pZCl7Zm9yKHE9bi5jaGlsZHJlbi5jb25jYXQoKSxyPWEuaW5BcnJheShjLmlkLHEpLC0xIT09ciYmKHE9YS52YWthdGEuYXJyYXlfcmVtb3ZlKHEsciksZT5yJiZlLS0pLHI9W10scz0wLHQ9cS5sZW5ndGg7dD5zO3MrKylyW3M+PWU/cysxOnNdPXFbc107cltlXT1jLmlkLG4uY2hpbGRyZW49cix0aGlzLl9ub2RlX2NoYW5nZWQobi5pZCksdGhpcy5yZWRyYXcobi5pZD09PWEuanN0cmVlLnJvb3QpfWVsc2V7Zm9yKHI9Yy5jaGlsZHJlbl9kLmNvbmNhdCgpLHIucHVzaChjLmlkKSxzPTAsdD1jLnBhcmVudHMubGVuZ3RoO3Q+cztzKyspe2ZvcihxPVtdLHc9by5fbW9kZWwuZGF0YVtjLnBhcmVudHNbc11dLmNoaWxkcmVuX2QsdT0wLHY9dy5sZW5ndGg7dj51O3UrKyktMT09PWEuaW5BcnJheSh3W3VdLHIpJiZxLnB1c2god1t1XSk7by5fbW9kZWwuZGF0YVtjLnBhcmVudHNbc11dLmNoaWxkcmVuX2Q9cX1mb3Ioby5fbW9kZWwuZGF0YVtsXS5jaGlsZHJlbj1hLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbShvLl9tb2RlbC5kYXRhW2xdLmNoaWxkcmVuLGMuaWQpLHM9MCx0PW4ucGFyZW50cy5sZW5ndGg7dD5zO3MrKyl0aGlzLl9tb2RlbC5kYXRhW24ucGFyZW50c1tzXV0uY2hpbGRyZW5fZD10aGlzLl9tb2RlbC5kYXRhW24ucGFyZW50c1tzXV0uY2hpbGRyZW5fZC5jb25jYXQocik7Zm9yKHE9W10scz0wLHQ9bi5jaGlsZHJlbi5sZW5ndGg7dD5zO3MrKylxW3M+PWU/cysxOnNdPW4uY2hpbGRyZW5bc107Zm9yKHFbZV09Yy5pZCxuLmNoaWxkcmVuPXEsbi5jaGlsZHJlbl9kLnB1c2goYy5pZCksbi5jaGlsZHJlbl9kPW4uY2hpbGRyZW5fZC5jb25jYXQoYy5jaGlsZHJlbl9kKSxjLnBhcmVudD1uLmlkLHI9bi5wYXJlbnRzLmNvbmNhdCgpLHIudW5zaGlmdChuLmlkKSx3PWMucGFyZW50cy5sZW5ndGgsYy5wYXJlbnRzPXIscj1yLmNvbmNhdCgpLHM9MCx0PWMuY2hpbGRyZW5fZC5sZW5ndGg7dD5zO3MrKyl0aGlzLl9tb2RlbC5kYXRhW2MuY2hpbGRyZW5fZFtzXV0ucGFyZW50cz10aGlzLl9tb2RlbC5kYXRhW2MuY2hpbGRyZW5fZFtzXV0ucGFyZW50cy5zbGljZSgwLC0xKncpLEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KHRoaXMuX21vZGVsLmRhdGFbYy5jaGlsZHJlbl9kW3NdXS5wYXJlbnRzLHIpOyhsPT09YS5qc3RyZWUucm9vdHx8bi5pZD09PWEuanN0cmVlLnJvb3QpJiYodGhpcy5fbW9kZWwuZm9yY2VfZnVsbF9yZWRyYXc9ITApLHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3fHwodGhpcy5fbm9kZV9jaGFuZ2VkKGwpLHRoaXMuX25vZGVfY2hhbmdlZChuLmlkKSksaHx8dGhpcy5yZWRyYXcoKX1yZXR1cm4gZiYmZi5jYWxsKHRoaXMsYyxuLGUpLHRoaXMudHJpZ2dlcihcIm1vdmVfbm9kZVwiLHtub2RlOmMscGFyZW50Om4uaWQscG9zaXRpb246ZSxvbGRfcGFyZW50Omwsb2xkX3Bvc2l0aW9uOm0saXNfbXVsdGk6byYmby5faWQmJm8uX2lkIT09dGhpcy5faWQsaXNfZm9yZWlnbjohb3x8IW8uX2lkLG9sZF9pbnN0YW5jZTpvLG5ld19pbnN0YW5jZTp0aGlzfSksYy5pZH0sY29weV9ub2RlOmZ1bmN0aW9uKGMsZCxlLGYsZyxoLGkpe3ZhciBqLGssbCxtLG4sbyxwLHEscixzLHQ7aWYoZD10aGlzLmdldF9ub2RlKGQpLGU9ZT09PWI/MDplLCFkKXJldHVybiExO2lmKCFlLnRvU3RyaW5nKCkubWF0Y2goL14oYmVmb3JlfGFmdGVyKSQvKSYmIWcmJiF0aGlzLmlzX2xvYWRlZChkKSlyZXR1cm4gdGhpcy5sb2FkX25vZGUoZCxmdW5jdGlvbigpe3RoaXMuY29weV9ub2RlKGMsZCxlLGYsITAsITEsaSl9KTtpZihhLnZha2F0YS5pc19hcnJheShjKSl7aWYoMSE9PWMubGVuZ3RoKXtmb3Ioaj0wLGs9Yy5sZW5ndGg7az5qO2orKykobT10aGlzLmNvcHlfbm9kZShjW2pdLGQsZSxmLGcsITAsaSkpJiYoZD1tLGU9XCJhZnRlclwiKTtyZXR1cm4gdGhpcy5yZWRyYXcoKSwhMH1jPWNbMF19aWYoYz1jJiZjLmlkP2M6dGhpcy5nZXRfbm9kZShjKSwhY3x8Yy5pZD09PWEuanN0cmVlLnJvb3QpcmV0dXJuITE7c3dpdGNoKHE9KGMucGFyZW50fHxhLmpzdHJlZS5yb290KS50b1N0cmluZygpLHI9ZS50b1N0cmluZygpLm1hdGNoKC9eKGJlZm9yZXxhZnRlcikkLykmJmQuaWQhPT1hLmpzdHJlZS5yb290P3RoaXMuZ2V0X25vZGUoZC5wYXJlbnQpOmQscz1pP2k6dGhpcy5fbW9kZWwuZGF0YVtjLmlkXT90aGlzOmEuanN0cmVlLnJlZmVyZW5jZShjLmlkKSx0PSFzfHwhcy5faWR8fHRoaXMuX2lkIT09cy5faWQscyYmcy5faWQmJihjPXMuX21vZGVsLmRhdGFbYy5pZF0pLGQuaWQ9PT1hLmpzdHJlZS5yb290JiYoXCJiZWZvcmVcIj09PWUmJihlPVwiZmlyc3RcIiksXCJhZnRlclwiPT09ZSYmKGU9XCJsYXN0XCIpKSxlKXtjYXNlXCJiZWZvcmVcIjplPWEuaW5BcnJheShkLmlkLHIuY2hpbGRyZW4pO2JyZWFrO2Nhc2VcImFmdGVyXCI6ZT1hLmluQXJyYXkoZC5pZCxyLmNoaWxkcmVuKSsxO2JyZWFrO2Nhc2VcImluc2lkZVwiOmNhc2VcImZpcnN0XCI6ZT0wO2JyZWFrO2Nhc2VcImxhc3RcIjplPXIuY2hpbGRyZW4ubGVuZ3RoO2JyZWFrO2RlZmF1bHQ6ZXx8KGU9MCl9aWYoZT5yLmNoaWxkcmVuLmxlbmd0aCYmKGU9ci5jaGlsZHJlbi5sZW5ndGgpLCF0aGlzLmNoZWNrKFwiY29weV9ub2RlXCIsYyxyLGUse2NvcmU6ITAsb3JpZ2luOmksaXNfbXVsdGk6cyYmcy5faWQmJnMuX2lkIT09dGhpcy5faWQsaXNfZm9yZWlnbjohc3x8IXMuX2lkfSkpcmV0dXJuIHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExO2lmKHA9cz9zLmdldF9qc29uKGMse25vX2lkOiEwLG5vX2RhdGE6ITAsbm9fc3RhdGU6ITB9KTpjLCFwKXJldHVybiExO2lmKHAuaWQ9PT0hMCYmZGVsZXRlIHAuaWQscD10aGlzLl9wYXJzZV9tb2RlbF9mcm9tX2pzb24ocCxyLmlkLHIucGFyZW50cy5jb25jYXQoKSksXHJcbiFwKXJldHVybiExO2ZvcihtPXRoaXMuZ2V0X25vZGUocCksYyYmYy5zdGF0ZSYmYy5zdGF0ZS5sb2FkZWQ9PT0hMSYmKG0uc3RhdGUubG9hZGVkPSExKSxsPVtdLGwucHVzaChwKSxsPWwuY29uY2F0KG0uY2hpbGRyZW5fZCksdGhpcy50cmlnZ2VyKFwibW9kZWxcIix7bm9kZXM6bCxwYXJlbnQ6ci5pZH0pLG49MCxvPXIucGFyZW50cy5sZW5ndGg7bz5uO24rKyl0aGlzLl9tb2RlbC5kYXRhW3IucGFyZW50c1tuXV0uY2hpbGRyZW5fZD10aGlzLl9tb2RlbC5kYXRhW3IucGFyZW50c1tuXV0uY2hpbGRyZW5fZC5jb25jYXQobCk7Zm9yKGw9W10sbj0wLG89ci5jaGlsZHJlbi5sZW5ndGg7bz5uO24rKylsW24+PWU/bisxOm5dPXIuY2hpbGRyZW5bbl07cmV0dXJuIGxbZV09bS5pZCxyLmNoaWxkcmVuPWwsci5jaGlsZHJlbl9kLnB1c2gobS5pZCksci5jaGlsZHJlbl9kPXIuY2hpbGRyZW5fZC5jb25jYXQobS5jaGlsZHJlbl9kKSxyLmlkPT09YS5qc3RyZWUucm9vdCYmKHRoaXMuX21vZGVsLmZvcmNlX2Z1bGxfcmVkcmF3PSEwKSx0aGlzLl9tb2RlbC5mb3JjZV9mdWxsX3JlZHJhd3x8dGhpcy5fbm9kZV9jaGFuZ2VkKHIuaWQpLGh8fHRoaXMucmVkcmF3KHIuaWQ9PT1hLmpzdHJlZS5yb290KSxmJiZmLmNhbGwodGhpcyxtLHIsZSksdGhpcy50cmlnZ2VyKFwiY29weV9ub2RlXCIse25vZGU6bSxvcmlnaW5hbDpjLHBhcmVudDpyLmlkLHBvc2l0aW9uOmUsb2xkX3BhcmVudDpxLG9sZF9wb3NpdGlvbjpzJiZzLl9pZCYmcSYmcy5fbW9kZWwuZGF0YVtxXSYmcy5fbW9kZWwuZGF0YVtxXS5jaGlsZHJlbj9hLmluQXJyYXkoYy5pZCxzLl9tb2RlbC5kYXRhW3FdLmNoaWxkcmVuKTotMSxpc19tdWx0aTpzJiZzLl9pZCYmcy5faWQhPT10aGlzLl9pZCxpc19mb3JlaWduOiFzfHwhcy5faWQsb2xkX2luc3RhbmNlOnMsbmV3X2luc3RhbmNlOnRoaXN9KSxtLmlkfSxjdXQ6ZnVuY3Rpb24oYil7aWYoYnx8KGI9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdCgpKSxhLnZha2F0YS5pc19hcnJheShiKXx8KGI9W2JdKSwhYi5sZW5ndGgpcmV0dXJuITE7dmFyIGM9W10sZyxoLGk7Zm9yKGg9MCxpPWIubGVuZ3RoO2k+aDtoKyspZz10aGlzLmdldF9ub2RlKGJbaF0pLGcmJmcuaWQmJmcuaWQhPT1hLmpzdHJlZS5yb290JiZjLnB1c2goZyk7cmV0dXJuIGMubGVuZ3RoPyhkPWMsZj10aGlzLGU9XCJtb3ZlX25vZGVcIix2b2lkIHRoaXMudHJpZ2dlcihcImN1dFwiLHtub2RlOmJ9KSk6ITF9LGNvcHk6ZnVuY3Rpb24oYil7aWYoYnx8KGI9dGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkLmNvbmNhdCgpKSxhLnZha2F0YS5pc19hcnJheShiKXx8KGI9W2JdKSwhYi5sZW5ndGgpcmV0dXJuITE7dmFyIGM9W10sZyxoLGk7Zm9yKGg9MCxpPWIubGVuZ3RoO2k+aDtoKyspZz10aGlzLmdldF9ub2RlKGJbaF0pLGcmJmcuaWQmJmcuaWQhPT1hLmpzdHJlZS5yb290JiZjLnB1c2goZyk7cmV0dXJuIGMubGVuZ3RoPyhkPWMsZj10aGlzLGU9XCJjb3B5X25vZGVcIix2b2lkIHRoaXMudHJpZ2dlcihcImNvcHlcIix7bm9kZTpifSkpOiExfSxnZXRfYnVmZmVyOmZ1bmN0aW9uKCl7cmV0dXJue21vZGU6ZSxub2RlOmQsaW5zdDpmfX0sY2FuX3Bhc3RlOmZ1bmN0aW9uKCl7cmV0dXJuIGUhPT0hMSYmZCE9PSExfSxwYXN0ZTpmdW5jdGlvbihhLGIpe3JldHVybiBhPXRoaXMuZ2V0X25vZGUoYSksYSYmZSYmZS5tYXRjaCgvXihjb3B5X25vZGV8bW92ZV9ub2RlKSQvKSYmZD8odGhpc1tlXShkLGEsYiwhMSwhMSwhMSxmKSYmdGhpcy50cmlnZ2VyKFwicGFzdGVcIix7cGFyZW50OmEuaWQsbm9kZTpkLG1vZGU6ZX0pLGQ9ITEsZT0hMSx2b2lkKGY9ITEpKTohMX0sY2xlYXJfYnVmZmVyOmZ1bmN0aW9uKCl7ZD0hMSxlPSExLGY9ITEsdGhpcy50cmlnZ2VyKFwiY2xlYXJfYnVmZmVyXCIpfSxlZGl0OmZ1bmN0aW9uKGIsYyxkKXt2YXIgZSxmLGcsaCxqLGssbCxtLG4sbz0hMTtyZXR1cm4oYj10aGlzLmdldF9ub2RlKGIpKT90aGlzLmNoZWNrKFwiZWRpdFwiLGIsdGhpcy5nZXRfcGFyZW50KGIpKT8obj1iLGM9XCJzdHJpbmdcIj09dHlwZW9mIGM/YzpiLnRleHQsdGhpcy5zZXRfdGV4dChiLFwiXCIpLGI9dGhpcy5fb3Blbl90byhiKSxuLnRleHQ9YyxlPXRoaXMuX2RhdGEuY29yZS5ydGwsZj10aGlzLmVsZW1lbnQud2lkdGgoKSx0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD1uLmlkLGc9Yi5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSxoPWEoXCI8c3Bhbj48L3NwYW4+XCIpLGo9YyxrPWEoXCI8ZGl2PjwvZGl2PlwiLHtjc3M6e3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItMjAwcHhcIixsZWZ0OmU/XCIwcHhcIjpcIi0xMDAwcHhcIix2aXNpYmlsaXR5OlwiaGlkZGVuXCJ9fSkuYXBwZW5kVG8oaS5ib2R5KSxsPWEoXCI8aW5wdXQgLz5cIix7dmFsdWU6aixcImNsYXNzXCI6XCJqc3RyZWUtcmVuYW1lLWlucHV0XCIsY3NzOntwYWRkaW5nOlwiMFwiLGJvcmRlcjpcIjFweCBzb2xpZCBzaWx2ZXJcIixcImJveC1zaXppbmdcIjpcImJvcmRlci1ib3hcIixkaXNwbGF5OlwiaW5saW5lLWJsb2NrXCIsaGVpZ2h0OnRoaXMuX2RhdGEuY29yZS5saV9oZWlnaHQrXCJweFwiLGxpbmVIZWlnaHQ6dGhpcy5fZGF0YS5jb3JlLmxpX2hlaWdodCtcInB4XCIsd2lkdGg6XCIxNTBweFwifSxibHVyOmZ1bmN0aW9uKGMpe2Muc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYy5wcmV2ZW50RGVmYXVsdCgpO3ZhciBlPWguY2hpbGRyZW4oXCIuanN0cmVlLXJlbmFtZS1pbnB1dFwiKSxmPWUudmFsKCksaT10aGlzLnNldHRpbmdzLmNvcmUuZm9yY2VfdGV4dCxtO1wiXCI9PT1mJiYoZj1qKSxrLnJlbW92ZSgpLGgucmVwbGFjZVdpdGgoZyksaC5yZW1vdmUoKSxqPWk/ajphKFwiPGRpdj48L2Rpdj5cIikuYXBwZW5kKGEucGFyc2VIVE1MKGopKS5odG1sKCksYj10aGlzLmdldF9ub2RlKGIpLHRoaXMuc2V0X3RleHQoYixqKSxtPSEhdGhpcy5yZW5hbWVfbm9kZShiLGk/YShcIjxkaXY+PC9kaXY+XCIpLnRleHQoZikudGV4dCgpOmEoXCI8ZGl2PjwvZGl2PlwiKS5hcHBlbmQoYS5wYXJzZUhUTUwoZikpLmh0bWwoKSksbXx8dGhpcy5zZXRfdGV4dChiLGopLHRoaXMuX2RhdGEuY29yZS5mb2N1c2VkPW4uaWQsc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0X25vZGUobi5pZCwhMCk7YS5sZW5ndGgmJih0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZD1uLmlkLGEuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS50cmlnZ2VyKFwiZm9jdXNcIikpfS5iaW5kKHRoaXMpLDApLGQmJmQuY2FsbCh0aGlzLG4sbSxvLGYpLGw9bnVsbH0uYmluZCh0aGlzKSxrZXlkb3duOmZ1bmN0aW9uKGEpe3ZhciBiPWEud2hpY2g7Mjc9PT1iJiYobz0hMCx0aGlzLnZhbHVlPWopLCgyNz09PWJ8fDEzPT09Ynx8Mzc9PT1ifHwzOD09PWJ8fDM5PT09Ynx8NDA9PT1ifHwzMj09PWIpJiZhLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLCgyNz09PWJ8fDEzPT09YikmJihhLnByZXZlbnREZWZhdWx0KCksdGhpcy5ibHVyKCkpfSxjbGljazpmdW5jdGlvbihhKXthLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpfSxtb3VzZWRvd246ZnVuY3Rpb24oYSl7YS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKX0sa2V5dXA6ZnVuY3Rpb24oYSl7bC53aWR0aChNYXRoLm1pbihrLnRleHQoXCJwV1wiK3RoaXMudmFsdWUpLndpZHRoKCksZikpfSxrZXlwcmVzczpmdW5jdGlvbihhKXtyZXR1cm4gMTM9PT1hLndoaWNoPyExOnZvaWQgMH19KSxtPXtmb250RmFtaWx5OmcuY3NzKFwiZm9udEZhbWlseVwiKXx8XCJcIixmb250U2l6ZTpnLmNzcyhcImZvbnRTaXplXCIpfHxcIlwiLGZvbnRXZWlnaHQ6Zy5jc3MoXCJmb250V2VpZ2h0XCIpfHxcIlwiLGZvbnRTdHlsZTpnLmNzcyhcImZvbnRTdHlsZVwiKXx8XCJcIixmb250U3RyZXRjaDpnLmNzcyhcImZvbnRTdHJldGNoXCIpfHxcIlwiLGZvbnRWYXJpYW50OmcuY3NzKFwiZm9udFZhcmlhbnRcIil8fFwiXCIsbGV0dGVyU3BhY2luZzpnLmNzcyhcImxldHRlclNwYWNpbmdcIil8fFwiXCIsd29yZFNwYWNpbmc6Zy5jc3MoXCJ3b3JkU3BhY2luZ1wiKXx8XCJcIn0saC5hdHRyKFwiY2xhc3NcIixnLmF0dHIoXCJjbGFzc1wiKSkuYXBwZW5kKGcuY29udGVudHMoKS5jbG9uZSgpKS5hcHBlbmQobCksZy5yZXBsYWNlV2l0aChoKSxrLmNzcyhtKSxsLmNzcyhtKS53aWR0aChNYXRoLm1pbihrLnRleHQoXCJwV1wiK2xbMF0udmFsdWUpLndpZHRoKCksZikpWzBdLnNlbGVjdCgpLHZvaWQgYShpKS5vbmUoXCJtb3VzZWRvd24uanN0cmVlIHRvdWNoc3RhcnQuanN0cmVlIGRuZF9zdGFydC52YWthdGFcIixmdW5jdGlvbihiKXtsJiZiLnRhcmdldCE9PWwmJmEobCkudHJpZ2dlcihcImJsdXJcIil9KSk6KHRoaXMuc2V0dGluZ3MuY29yZS5lcnJvci5jYWxsKHRoaXMsdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3IpLCExKTohMX0sc2V0X3RoZW1lOmZ1bmN0aW9uKGIsYyl7aWYoIWIpcmV0dXJuITE7aWYoYz09PSEwKXt2YXIgZD10aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzLmRpcjtkfHwoZD1hLmpzdHJlZS5wYXRoK1wiL3RoZW1lc1wiKSxjPWQrXCIvXCIrYitcIi9zdHlsZS5jc3NcIn1jJiYtMT09PWEuaW5BcnJheShjLGcpJiYoYShcImhlYWRcIikuYXBwZW5kKCc8bGluayByZWw9XCJzdHlsZXNoZWV0XCIgaHJlZj1cIicrYysnXCIgdHlwZT1cInRleHQvY3NzXCIgLz4nKSxnLnB1c2goYykpLHRoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZSYmdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwianN0cmVlLVwiK3RoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZSksdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5uYW1lPWIsdGhpcy5lbGVtZW50LmFkZENsYXNzKFwianN0cmVlLVwiK2IpLHRoaXMuZWxlbWVudFt0aGlzLnNldHRpbmdzLmNvcmUudGhlbWVzLnJlc3BvbnNpdmU/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3RyZWUtXCIrYitcIi1yZXNwb25zaXZlXCIpLHRoaXMudHJpZ2dlcihcInNldF90aGVtZVwiLHt0aGVtZTpifSl9LGdldF90aGVtZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWV9LHNldF90aGVtZV92YXJpYW50OmZ1bmN0aW9uKGEpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMudmFyaWFudCYmdGhpcy5lbGVtZW50LnJlbW92ZUNsYXNzKFwianN0cmVlLVwiK3RoaXMuX2RhdGEuY29yZS50aGVtZXMubmFtZStcIi1cIit0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnZhcmlhbnQpLHRoaXMuX2RhdGEuY29yZS50aGVtZXMudmFyaWFudD1hLGEmJnRoaXMuZWxlbWVudC5hZGRDbGFzcyhcImpzdHJlZS1cIit0aGlzLl9kYXRhLmNvcmUudGhlbWVzLm5hbWUrXCItXCIrdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50KX0sZ2V0X3RoZW1lX3ZhcmlhbnQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YS5jb3JlLnRoZW1lcy52YXJpYW50fSxzaG93X3N0cmlwZXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnN0cmlwZXM9ITAsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtc3RyaXBlZFwiKSx0aGlzLnRyaWdnZXIoXCJzaG93X3N0cmlwZXNcIil9LGhpZGVfc3RyaXBlczpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuc3RyaXBlcz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1zdHJpcGVkXCIpLHRoaXMudHJpZ2dlcihcImhpZGVfc3RyaXBlc1wiKX0sdG9nZ2xlX3N0cmlwZXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLnN0cmlwZXM/dGhpcy5oaWRlX3N0cmlwZXMoKTp0aGlzLnNob3dfc3RyaXBlcygpfSxzaG93X2RvdHM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHM9ITAsdGhpcy5nZXRfY29udGFpbmVyX3VsKCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtbm8tZG90c1wiKSx0aGlzLnRyaWdnZXIoXCJzaG93X2RvdHNcIil9LGhpZGVfZG90czpmdW5jdGlvbigpe3RoaXMuX2RhdGEuY29yZS50aGVtZXMuZG90cz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1uby1kb3RzXCIpLHRoaXMudHJpZ2dlcihcImhpZGVfZG90c1wiKX0sdG9nZ2xlX2RvdHM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmRvdHM/dGhpcy5oaWRlX2RvdHMoKTp0aGlzLnNob3dfZG90cygpfSxzaG93X2ljb25zOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucz0hMCx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1uby1pY29uc1wiKSx0aGlzLnRyaWdnZXIoXCJzaG93X2ljb25zXCIpfSxoaWRlX2ljb25zOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5pY29ucz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1uby1pY29uc1wiKSx0aGlzLnRyaWdnZXIoXCJoaWRlX2ljb25zXCIpfSx0b2dnbGVfaWNvbnM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmljb25zP3RoaXMuaGlkZV9pY29ucygpOnRoaXMuc2hvd19pY29ucygpfSxzaG93X2VsbGlwc2lzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcz0hMCx0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1lbGxpcHNpc1wiKSx0aGlzLnRyaWdnZXIoXCJzaG93X2VsbGlwc2lzXCIpfSxoaWRlX2VsbGlwc2lzOmZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5lbGxpcHNpcz0hMSx0aGlzLmdldF9jb250YWluZXJfdWwoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1lbGxpcHNpc1wiKSx0aGlzLnRyaWdnZXIoXCJoaWRlX2VsbGlwc2lzXCIpfSx0b2dnbGVfZWxsaXBzaXM6ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmVsbGlwc2lzP3RoaXMuaGlkZV9lbGxpcHNpcygpOnRoaXMuc2hvd19lbGxpcHNpcygpfSxzZXRfaWNvbjpmdW5jdGlvbihjLGQpe3ZhciBlLGYsZyxoO2lmKGEudmFrYXRhLmlzX2FycmF5KGMpKXtmb3IoYz1jLnNsaWNlKCksZT0wLGY9Yy5sZW5ndGg7Zj5lO2UrKyl0aGlzLnNldF9pY29uKGNbZV0sZCk7cmV0dXJuITB9cmV0dXJuIGM9dGhpcy5nZXRfbm9kZShjKSxjJiZjLmlkIT09YS5qc3RyZWUucm9vdD8oaD1jLmljb24sYy5pY29uPWQ9PT0hMHx8bnVsbD09PWR8fGQ9PT1ifHxcIlwiPT09ZD8hMDpkLGc9dGhpcy5nZXRfbm9kZShjLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIiksZD09PSExPyhnLnJlbW92ZUNsYXNzKFwianN0cmVlLXRoZW1laWNvbi1jdXN0b20gXCIraCkuY3NzKFwiYmFja2dyb3VuZFwiLFwiXCIpLnJlbW92ZUF0dHIoXCJyZWxcIiksdGhpcy5oaWRlX2ljb24oYykpOmQ9PT0hMHx8bnVsbD09PWR8fGQ9PT1ifHxcIlwiPT09ZD8oZy5yZW1vdmVDbGFzcyhcImpzdHJlZS10aGVtZWljb24tY3VzdG9tIFwiK2gpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKS5yZW1vdmVBdHRyKFwicmVsXCIpLGg9PT0hMSYmdGhpcy5zaG93X2ljb24oYykpOi0xPT09ZC5pbmRleE9mKFwiL1wiKSYmLTE9PT1kLmluZGV4T2YoXCIuXCIpPyhnLnJlbW92ZUNsYXNzKGgpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKSxnLmFkZENsYXNzKGQrXCIganN0cmVlLXRoZW1laWNvbi1jdXN0b21cIikuYXR0cihcInJlbFwiLGQpLGg9PT0hMSYmdGhpcy5zaG93X2ljb24oYykpOihnLnJlbW92ZUNsYXNzKGgpLmNzcyhcImJhY2tncm91bmRcIixcIlwiKSxnLmFkZENsYXNzKFwianN0cmVlLXRoZW1laWNvbi1jdXN0b21cIikuY3NzKFwiYmFja2dyb3VuZFwiLFwidXJsKCdcIitkK1wiJykgY2VudGVyIGNlbnRlciBuby1yZXBlYXRcIikuYXR0cihcInJlbFwiLGQpLGg9PT0hMSYmdGhpcy5zaG93X2ljb24oYykpLCEwKTohMX0sZ2V0X2ljb246ZnVuY3Rpb24oYil7cmV0dXJuIGI9dGhpcy5nZXRfbm9kZShiKSxiJiZiLmlkIT09YS5qc3RyZWUucm9vdD9iLmljb246ITF9LGhpZGVfaWNvbjpmdW5jdGlvbihiKXt2YXIgYyxkO2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXtmb3IoYj1iLnNsaWNlKCksYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzLmhpZGVfaWNvbihiW2NdKTtyZXR1cm4hMH1yZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGImJmIhPT1hLmpzdHJlZS5yb290PyhiLmljb249ITEsdGhpcy5nZXRfbm9kZShiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIikuYWRkQ2xhc3MoXCJqc3RyZWUtdGhlbWVpY29uLWhpZGRlblwiKSwhMCk6ITF9LHNob3dfaWNvbjpmdW5jdGlvbihiKXt2YXIgYyxkLGU7aWYoYS52YWthdGEuaXNfYXJyYXkoYikpe2ZvcihiPWIuc2xpY2UoKSxjPTAsZD1iLmxlbmd0aDtkPmM7YysrKXRoaXMuc2hvd19pY29uKGJbY10pO3JldHVybiEwfXJldHVybiBiPXRoaXMuZ2V0X25vZGUoYiksYiYmYiE9PWEuanN0cmVlLnJvb3Q/KGU9dGhpcy5nZXRfbm9kZShiLCEwKSxiLmljb249ZS5sZW5ndGg/ZS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS10aGVtZWljb25cIikuYXR0cihcInJlbFwiKTohMCxiLmljb258fChiLmljb249ITApLGUuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtdGhlbWVpY29uXCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLXRoZW1laWNvbi1oaWRkZW5cIiksITApOiExfX0sYS52YWthdGE9e30sYS52YWthdGEuYXR0cmlidXRlcz1mdW5jdGlvbihiLGMpe2I9YShiKVswXTt2YXIgZD1jP3t9OltdO3JldHVybiBiJiZiLmF0dHJpYnV0ZXMmJmEuZWFjaChiLmF0dHJpYnV0ZXMsZnVuY3Rpb24oYixlKXstMT09PWEuaW5BcnJheShlLm5hbWUudG9Mb3dlckNhc2UoKSxbXCJzdHlsZVwiLFwiY29udGVudGVkaXRhYmxlXCIsXCJoYXNmb2N1c1wiLFwidGFiaW5kZXhcIl0pJiZudWxsIT09ZS52YWx1ZSYmXCJcIiE9PWEudmFrYXRhLnRyaW0oZS52YWx1ZSkmJihjP2RbZS5uYW1lXT1lLnZhbHVlOmQucHVzaChlLm5hbWUpKX0pLGR9LGEudmFrYXRhLmFycmF5X3VuaXF1ZT1mdW5jdGlvbihhKXt2YXIgYz1bXSxkLGUsZixnPXt9O2ZvcihkPTAsZj1hLmxlbmd0aDtmPmQ7ZCsrKWdbYVtkXV09PT1iJiYoYy5wdXNoKGFbZF0pLGdbYVtkXV09ITApO3JldHVybiBjfSxhLnZha2F0YS5hcnJheV9yZW1vdmU9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gYS5zcGxpY2UoYiwxKSxhfSxhLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbT1mdW5jdGlvbihiLGMpe3ZhciBkPWEuaW5BcnJheShjLGIpO3JldHVybi0xIT09ZD9hLnZha2F0YS5hcnJheV9yZW1vdmUoYixkKTpifSxhLnZha2F0YS5hcnJheV9maWx0ZXI9ZnVuY3Rpb24oYSxiLGMsZCxlKXtpZihhLmZpbHRlcilyZXR1cm4gYS5maWx0ZXIoYixjKTtkPVtdO2ZvcihlIGluIGEpfn5lK1wiXCI9PWUrXCJcIiYmZT49MCYmYi5jYWxsKGMsYVtlXSwrZSxhKSYmZC5wdXNoKGFbZV0pO3JldHVybiBkfSxhLnZha2F0YS50cmltPWZ1bmN0aW9uKGEpe3JldHVybiBTdHJpbmcucHJvdG90eXBlLnRyaW0/U3RyaW5nLnByb3RvdHlwZS50cmltLmNhbGwoYS50b1N0cmluZygpKTphLnRvU3RyaW5nKCkucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIil9LGEudmFrYXRhLmlzX2Z1bmN0aW9uPWZ1bmN0aW9uKGEpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGEmJlwibnVtYmVyXCIhPXR5cGVvZiBhLm5vZGVUeXBlfSxhLnZha2F0YS5pc19hcnJheT1BcnJheS5pc0FycmF5fHxmdW5jdGlvbihhKXtyZXR1cm5cIltvYmplY3QgQXJyYXldXCI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSl9LEZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9YXJndW1lbnRzWzBdLGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGEpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kIC0gd2hhdCBpcyB0cnlpbmcgdG8gYmUgYm91bmQgaXMgbm90IGNhbGxhYmxlXCIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuY29uY2F0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykpO3JldHVybiBhLmFwcGx5KGIsZCl9fSksYS5qc3RyZWUucGx1Z2lucy5jaGFuZ2VkPWZ1bmN0aW9uKGEsYil7dmFyIGM9W107dGhpcy50cmlnZ2VyPWZ1bmN0aW9uKGEsZCl7dmFyIGUsZjtpZihkfHwoZD17fSksXCJjaGFuZ2VkXCI9PT1hLnJlcGxhY2UoXCIuanN0cmVlXCIsXCJcIikpe2QuY2hhbmdlZD17c2VsZWN0ZWQ6W10sZGVzZWxlY3RlZDpbXX07dmFyIGc9e307Zm9yKGU9MCxmPWMubGVuZ3RoO2Y+ZTtlKyspZ1tjW2VdXT0xO2ZvcihlPTAsZj1kLnNlbGVjdGVkLmxlbmd0aDtmPmU7ZSsrKWdbZC5zZWxlY3RlZFtlXV0/Z1tkLnNlbGVjdGVkW2VdXT0yOmQuY2hhbmdlZC5zZWxlY3RlZC5wdXNoKGQuc2VsZWN0ZWRbZV0pO2ZvcihlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKTE9PT1nW2NbZV1dJiZkLmNoYW5nZWQuZGVzZWxlY3RlZC5wdXNoKGNbZV0pO2M9ZC5zZWxlY3RlZC5zbGljZSgpfWIudHJpZ2dlci5jYWxsKHRoaXMsYSxkKX0sdGhpcy5yZWZyZXNoPWZ1bmN0aW9uKGEsZCl7cmV0dXJuIGM9W10sYi5yZWZyZXNoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19O3ZhciBsPWkuY3JlYXRlRWxlbWVudChcIklcIik7bC5jbGFzc05hbWU9XCJqc3RyZWUtaWNvbiBqc3RyZWUtY2hlY2tib3hcIixsLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxhLmpzdHJlZS5kZWZhdWx0cy5jaGVja2JveD17dmlzaWJsZTohMCx0aHJlZV9zdGF0ZTohMCx3aG9sZV9ub2RlOiEwLGtlZXBfc2VsZWN0ZWRfc3R5bGU6ITAsY2FzY2FkZTpcIlwiLHRpZV9zZWxlY3Rpb246ITAsY2FzY2FkZV90b19kaXNhYmxlZDohMCxjYXNjYWRlX3RvX2hpZGRlbjohMH0sYS5qc3RyZWUucGx1Z2lucy5jaGVja2JveD1mdW5jdGlvbihjLGQpe3RoaXMuYmluZD1mdW5jdGlvbigpe2QuYmluZC5jYWxsKHRoaXMpLHRoaXMuX2RhdGEuY2hlY2tib3gudXRvPSExLHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9W10sdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aHJlZV9zdGF0ZSYmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZT1cInVwK2Rvd24rdW5kZXRlcm1pbmVkXCIpLHRoaXMuZWxlbWVudC5vbihcImluaXQuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNoZWNrYm94LnZpc2libGU9dGhpcy5zZXR0aW5ncy5jaGVja2JveC52aXNpYmxlLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gua2VlcF9zZWxlY3RlZF9zdHlsZXx8dGhpcy5lbGVtZW50LmFkZENsYXNzKFwianN0cmVlLWNoZWNrYm94LW5vLWNsaWNrZWRcIiksdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiZ0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3gtc2VsZWN0aW9uXCIpfS5iaW5kKHRoaXMpKS5vbihcImxvYWRpbmcuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzW3RoaXMuX2RhdGEuY2hlY2tib3gudmlzaWJsZT9cInNob3dfY2hlY2tib3hlc1wiOlwiaGlkZV9jaGVja2JveGVzXCJdKCl9LmJpbmQodGhpcykpLC0xIT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJ1bmRldGVybWluZWRcIikmJnRoaXMuZWxlbWVudC5vbihcImNoYW5nZWQuanN0cmVlIHVuY2hlY2tfbm9kZS5qc3RyZWUgY2hlY2tfbm9kZS5qc3RyZWUgdW5jaGVja19hbGwuanN0cmVlIGNoZWNrX2FsbC5qc3RyZWUgbW92ZV9ub2RlLmpzdHJlZSBjb3B5X25vZGUuanN0cmVlIHJlZHJhdy5qc3RyZWUgb3Blbl9ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jaGVja2JveC51dG8mJmNsZWFyVGltZW91dCh0aGlzLl9kYXRhLmNoZWNrYm94LnV0byksdGhpcy5fZGF0YS5jaGVja2JveC51dG89c2V0VGltZW91dCh0aGlzLl91bmRldGVybWluZWQuYmluZCh0aGlzKSw1MCl9LmJpbmQodGhpcykpLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8dGhpcy5lbGVtZW50Lm9uKFwibW9kZWwuanN0cmVlXCIsZnVuY3Rpb24oYSxiKXt2YXIgYz10aGlzLl9tb2RlbC5kYXRhLGQ9Y1tiLnBhcmVudF0sZT1iLm5vZGVzLGYsZztmb3IoZj0wLGc9ZS5sZW5ndGg7Zz5mO2YrKyljW2VbZl1dLnN0YXRlLmNoZWNrZWQ9Y1tlW2ZdXS5zdGF0ZS5jaGVja2VkfHxjW2VbZl1dLm9yaWdpbmFsJiZjW2VbZl1dLm9yaWdpbmFsLnN0YXRlJiZjW2VbZl1dLm9yaWdpbmFsLnN0YXRlLmNoZWNrZWQsY1tlW2ZdXS5zdGF0ZS5jaGVja2VkJiZ0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLnB1c2goZVtmXSl9LmJpbmQodGhpcykpLCgtMSE9PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKFwidXBcIil8fC0xIT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJkb3duXCIpKSYmdGhpcy5lbGVtZW50Lm9uKFwibW9kZWwuanN0cmVlXCIsZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLl9tb2RlbC5kYXRhLGU9ZFtjLnBhcmVudF0sZj1jLm5vZGVzLGc9W10saCxpLGosayxsLG0sbj10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUsbz10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb247aWYoLTEhPT1uLmluZGV4T2YoXCJkb3duXCIpKWlmKGUuc3RhdGVbbz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKXtmb3IoaT0wLGo9Zi5sZW5ndGg7aj5pO2krKylkW2ZbaV1dLnN0YXRlW28/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMDt0aGlzLl9kYXRhW28/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZD10aGlzLl9kYXRhW28/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5jb25jYXQoZil9ZWxzZSBmb3IoaT0wLGo9Zi5sZW5ndGg7aj5pO2krKylpZihkW2ZbaV1dLnN0YXRlW28/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXSl7Zm9yKGs9MCxsPWRbZltpXV0uY2hpbGRyZW5fZC5sZW5ndGg7bD5rO2srKylkW2RbZltpXV0uY2hpbGRyZW5fZFtrXV0uc3RhdGVbbz9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSEwO3RoaXMuX2RhdGFbbz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPXRoaXMuX2RhdGFbbz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLmNvbmNhdChkW2ZbaV1dLmNoaWxkcmVuX2QpfWlmKC0xIT09bi5pbmRleE9mKFwidXBcIikpe2ZvcihpPTAsaj1lLmNoaWxkcmVuX2QubGVuZ3RoO2o+aTtpKyspZFtlLmNoaWxkcmVuX2RbaV1dLmNoaWxkcmVuLmxlbmd0aHx8Zy5wdXNoKGRbZS5jaGlsZHJlbl9kW2ldXS5wYXJlbnQpO2ZvcihnPWEudmFrYXRhLmFycmF5X3VuaXF1ZShnKSxrPTAsbD1nLmxlbmd0aDtsPms7aysrKXtlPWRbZ1trXV07d2hpbGUoZSYmZS5pZCE9PWEuanN0cmVlLnJvb3Qpe2ZvcihoPTAsaT0wLGo9ZS5jaGlsZHJlbi5sZW5ndGg7aj5pO2krKyloKz1kW2UuY2hpbGRyZW5baV1dLnN0YXRlW28/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXTtpZihoIT09ailicmVhaztlLnN0YXRlW28/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCx0aGlzLl9kYXRhW28/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5wdXNoKGUuaWQpLG09dGhpcy5nZXRfbm9kZShlLCEwKSxtJiZtLmxlbmd0aCYmbS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKG8/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIiksZT10aGlzLmdldF9ub2RlKGUucGFyZW50KX19fXRoaXMuX2RhdGFbbz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPWEudmFrYXRhLmFycmF5X3VuaXF1ZSh0aGlzLl9kYXRhW28/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZCl9LmJpbmQodGhpcykpLm9uKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbj9cInNlbGVjdF9ub2RlLmpzdHJlZVwiOlwiY2hlY2tfbm9kZS5qc3RyZWVcIixmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMsZT1jLm5vZGUsZj10aGlzLl9tb2RlbC5kYXRhLGc9dGhpcy5nZXRfbm9kZShlLnBhcmVudCksaCxpLGosayxsPXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZSxtPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixuPXt9LG89dGhpcy5fZGF0YVttP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQ7Zm9yKGg9MCxpPW8ubGVuZ3RoO2k+aDtoKyspbltvW2hdXT0hMDtpZigtMSE9PWwuaW5kZXhPZihcImRvd25cIikpe3ZhciBwPXRoaXMuX2Nhc2NhZGVfbmV3X2NoZWNrZWRfc3RhdGUoZS5pZCwhMCkscT1lLmNoaWxkcmVuX2QuY29uY2F0KGUuaWQpO2ZvcihoPTAsaT1xLmxlbmd0aDtpPmg7aCsrKXAuaW5kZXhPZihxW2hdKT4tMT9uW3FbaF1dPSEwOmRlbGV0ZSBuW3FbaF1dfWlmKC0xIT09bC5pbmRleE9mKFwidXBcIikpd2hpbGUoZyYmZy5pZCE9PWEuanN0cmVlLnJvb3Qpe2ZvcihqPTAsaD0wLGk9Zy5jaGlsZHJlbi5sZW5ndGg7aT5oO2grKylqKz1mW2cuY2hpbGRyZW5baF1dLnN0YXRlW20/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXTtpZihqIT09aSlicmVhaztnLnN0YXRlW20/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCxuW2cuaWRdPSEwLGs9dGhpcy5nZXRfbm9kZShnLCEwKSxrJiZrLmxlbmd0aCYmay5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKG0/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIiksZz10aGlzLmdldF9ub2RlKGcucGFyZW50KX1vPVtdO2ZvcihoIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShoKSYmby5wdXNoKGgpO3RoaXMuX2RhdGFbbT9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPW99LmJpbmQodGhpcykpLm9uKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbj9cImRlc2VsZWN0X2FsbC5qc3RyZWVcIjpcInVuY2hlY2tfYWxsLmpzdHJlZVwiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9dGhpcy5nZXRfbm9kZShhLmpzdHJlZS5yb290KSxlPXRoaXMuX21vZGVsLmRhdGEsZixnLGg7Zm9yKGY9MCxnPWQuY2hpbGRyZW5fZC5sZW5ndGg7Zz5mO2YrKyloPWVbZC5jaGlsZHJlbl9kW2ZdXSxoJiZoLm9yaWdpbmFsJiZoLm9yaWdpbmFsLnN0YXRlJiZoLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCYmKGgub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkPSExKX0uYmluZCh0aGlzKSkub24odGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uP1wiZGVzZWxlY3Rfbm9kZS5qc3RyZWVcIjpcInVuY2hlY2tfbm9kZS5qc3RyZWVcIixmdW5jdGlvbihiLGMpe3ZhciBkPXRoaXMsZT1jLm5vZGUsZj10aGlzLmdldF9ub2RlKGUsITApLGcsaCxpLGo9dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLGs9dGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uLGw9dGhpcy5fZGF0YVtrP1wiY29yZVwiOlwiY2hlY2tib3hcIl0uc2VsZWN0ZWQsbT17fSxuPVtdLG89ZS5jaGlsZHJlbl9kLmNvbmNhdChlLmlkKTtpZigtMSE9PWouaW5kZXhPZihcImRvd25cIikpe3ZhciBwPXRoaXMuX2Nhc2NhZGVfbmV3X2NoZWNrZWRfc3RhdGUoZS5pZCwhMSk7bD1hLnZha2F0YS5hcnJheV9maWx0ZXIobCxmdW5jdGlvbihhKXtyZXR1cm4tMT09PW8uaW5kZXhPZihhKXx8cC5pbmRleE9mKGEpPi0xfSl9aWYoLTEhPT1qLmluZGV4T2YoXCJ1cFwiKSYmLTE9PT1sLmluZGV4T2YoZS5pZCkpe2ZvcihnPTAsaD1lLnBhcmVudHMubGVuZ3RoO2g+ZztnKyspaT10aGlzLl9tb2RlbC5kYXRhW2UucGFyZW50c1tnXV0saS5zdGF0ZVtrP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09ITEsaSYmaS5vcmlnaW5hbCYmaS5vcmlnaW5hbC5zdGF0ZSYmaS5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQmJihpLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZD0hMSksaT10aGlzLmdldF9ub2RlKGUucGFyZW50c1tnXSwhMCksaSYmaS5sZW5ndGgmJmkuYXR0cihcImFyaWEtc2VsZWN0ZWRcIiwhMSkuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhrP1wianN0cmVlLWNsaWNrZWRcIjpcImpzdHJlZS1jaGVja2VkXCIpO2w9YS52YWthdGEuYXJyYXlfZmlsdGVyKGwsZnVuY3Rpb24oYSl7cmV0dXJuLTE9PT1lLnBhcmVudHMuaW5kZXhPZihhKX0pfXRoaXMuX2RhdGFbaz9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPWx9LmJpbmQodGhpcykpLC0xIT09dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLmluZGV4T2YoXCJ1cFwiKSYmdGhpcy5lbGVtZW50Lm9uKFwiZGVsZXRlX25vZGUuanN0cmVlXCIsZnVuY3Rpb24oYixjKXt2YXIgZD10aGlzLmdldF9ub2RlKGMucGFyZW50KSxlPXRoaXMuX21vZGVsLmRhdGEsZixnLGgsaSxqPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbjt3aGlsZShkJiZkLmlkIT09YS5qc3RyZWUucm9vdCYmIWQuc3RhdGVbaj9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKXtmb3IoaD0wLGY9MCxnPWQuY2hpbGRyZW4ubGVuZ3RoO2c+ZjtmKyspaCs9ZVtkLmNoaWxkcmVuW2ZdXS5zdGF0ZVtqP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl07aWYoIShnPjAmJmg9PT1nKSlicmVhaztkLnN0YXRlW2o/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCx0aGlzLl9kYXRhW2o/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5wdXNoKGQuaWQpLGk9dGhpcy5nZXRfbm9kZShkLCEwKSxpJiZpLmxlbmd0aCYmaS5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKGo/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIiksZD10aGlzLmdldF9ub2RlKGQucGFyZW50KX19LmJpbmQodGhpcykpLm9uKFwibW92ZV9ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKGIsYyl7dmFyIGQ9Yy5pc19tdWx0aSxlPWMub2xkX3BhcmVudCxmPXRoaXMuZ2V0X25vZGUoYy5wYXJlbnQpLGc9dGhpcy5fbW9kZWwuZGF0YSxoLGksaixrLGwsbT10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb247aWYoIWQpe2g9dGhpcy5nZXRfbm9kZShlKTt3aGlsZShoJiZoLmlkIT09YS5qc3RyZWUucm9vdCYmIWguc3RhdGVbbT9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKXtmb3IoaT0wLGo9MCxrPWguY2hpbGRyZW4ubGVuZ3RoO2s+ajtqKyspaSs9Z1toLmNoaWxkcmVuW2pdXS5zdGF0ZVttP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl07aWYoIShrPjAmJmk9PT1rKSlicmVhaztoLnN0YXRlW20/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCx0aGlzLl9kYXRhW20/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5wdXNoKGguaWQpLGw9dGhpcy5nZXRfbm9kZShoLCEwKSxsJiZsLmxlbmd0aCYmbC5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKG0/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIiksaD10aGlzLmdldF9ub2RlKGgucGFyZW50KX19aD1mO3doaWxlKGgmJmguaWQhPT1hLmpzdHJlZS5yb290KXtmb3IoaT0wLGo9MCxrPWguY2hpbGRyZW4ubGVuZ3RoO2s+ajtqKyspaSs9Z1toLmNoaWxkcmVuW2pdXS5zdGF0ZVttP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl07aWYoaT09PWspaC5zdGF0ZVttP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl18fChoLnN0YXRlW20/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMCx0aGlzLl9kYXRhW20/XCJjb3JlXCI6XCJjaGVja2JveFwiXS5zZWxlY3RlZC5wdXNoKGguaWQpLGw9dGhpcy5nZXRfbm9kZShoLCEwKSxsJiZsLmxlbmd0aCYmbC5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKG0/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIikpO2Vsc2V7aWYoIWguc3RhdGVbbT9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdKWJyZWFrO2guc3RhdGVbbT9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdPSExLHRoaXMuX2RhdGFbbT9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkPWEudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKHRoaXMuX2RhdGFbbT9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLGguaWQpLGw9dGhpcy5nZXRfbm9kZShoLCEwKSxsJiZsLmxlbmd0aCYmbC5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCExKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLnJlbW92ZUNsYXNzKG0/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIil9aD10aGlzLmdldF9ub2RlKGgucGFyZW50KX19LmJpbmQodGhpcykpfSx0aGlzLmdldF91bmRldGVybWluZWQ9ZnVuY3Rpb24oYyl7aWYoLTE9PT10aGlzLnNldHRpbmdzLmNoZWNrYm94LmNhc2NhZGUuaW5kZXhPZihcInVuZGV0ZXJtaW5lZFwiKSlyZXR1cm5bXTt2YXIgZCxlLGYsZyxoPXt9LGk9dGhpcy5fbW9kZWwuZGF0YSxqPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixrPXRoaXMuX2RhdGFbaj9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLGw9W10sbT10aGlzLG49W107Zm9yKGQ9MCxlPWsubGVuZ3RoO2U+ZDtkKyspaWYoaVtrW2RdXSYmaVtrW2RdXS5wYXJlbnRzKWZvcihmPTAsZz1pW2tbZF1dLnBhcmVudHMubGVuZ3RoO2c+ZjtmKyspe2lmKGhbaVtrW2RdXS5wYXJlbnRzW2ZdXSE9PWIpYnJlYWs7aVtrW2RdXS5wYXJlbnRzW2ZdIT09YS5qc3RyZWUucm9vdCYmKGhbaVtrW2RdXS5wYXJlbnRzW2ZdXT0hMCxsLnB1c2goaVtrW2RdXS5wYXJlbnRzW2ZdKSl9Zm9yKHRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS1jbG9zZWRcIikubm90KFwiOmhhcyguanN0cmVlLWNoaWxkcmVuKVwiKS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGM9bS5nZXRfbm9kZSh0aGlzKSxqO2lmKGMpaWYoYy5zdGF0ZS5sb2FkZWQpe2ZvcihkPTAsZT1jLmNoaWxkcmVuX2QubGVuZ3RoO2U+ZDtkKyspaWYoaj1pW2MuY2hpbGRyZW5fZFtkXV0sIWouc3RhdGUubG9hZGVkJiZqLm9yaWdpbmFsJiZqLm9yaWdpbmFsLnN0YXRlJiZqLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZCYmai5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQ9PT0hMClmb3IoaFtqLmlkXT09PWImJmouaWQhPT1hLmpzdHJlZS5yb290JiYoaFtqLmlkXT0hMCxsLnB1c2goai5pZCkpLGY9MCxnPWoucGFyZW50cy5sZW5ndGg7Zz5mO2YrKyloW2oucGFyZW50c1tmXV09PT1iJiZqLnBhcmVudHNbZl0hPT1hLmpzdHJlZS5yb290JiYoaFtqLnBhcmVudHNbZl1dPSEwLGwucHVzaChqLnBhcmVudHNbZl0pKX1lbHNlIGlmKGMub3JpZ2luYWwmJmMub3JpZ2luYWwuc3RhdGUmJmMub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkJiZjLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZD09PSEwKWZvcihoW2MuaWRdPT09YiYmYy5pZCE9PWEuanN0cmVlLnJvb3QmJihoW2MuaWRdPSEwLGwucHVzaChjLmlkKSksZj0wLGc9Yy5wYXJlbnRzLmxlbmd0aDtnPmY7ZisrKWhbYy5wYXJlbnRzW2ZdXT09PWImJmMucGFyZW50c1tmXSE9PWEuanN0cmVlLnJvb3QmJihoW2MucGFyZW50c1tmXV09ITAsbC5wdXNoKGMucGFyZW50c1tmXSkpfSksZD0wLGU9bC5sZW5ndGg7ZT5kO2QrKylpW2xbZF1dLnN0YXRlW2o/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXXx8bi5wdXNoKGM/aVtsW2RdXTpsW2RdKTtyZXR1cm4gbn0sdGhpcy5fdW5kZXRlcm1pbmVkPWZ1bmN0aW9uKCl7aWYobnVsbCE9PXRoaXMuZWxlbWVudCl7dmFyIGE9dGhpcy5nZXRfdW5kZXRlcm1pbmVkKCExKSxiLGMsZDtmb3IodGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLXVuZGV0ZXJtaW5lZFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS11bmRldGVybWluZWRcIiksYj0wLGM9YS5sZW5ndGg7Yz5iO2IrKylkPXRoaXMuZ2V0X25vZGUoYVtiXSwhMCksZCYmZC5sZW5ndGgmJmQuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hlY2tib3hcIikuYWRkQ2xhc3MoXCJqc3RyZWUtdW5kZXRlcm1pbmVkXCIpfX0sdGhpcy5yZWRyYXdfbm9kZT1mdW5jdGlvbihhLGIsYyxlKXtpZihhPWQucmVkcmF3X25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKXt2YXIgZixnLGg9bnVsbCxpPW51bGw7Zm9yKGY9MCxnPWEuY2hpbGROb2Rlcy5sZW5ndGg7Zz5mO2YrKylpZihhLmNoaWxkTm9kZXNbZl0mJmEuY2hpbGROb2Rlc1tmXS5jbGFzc05hbWUmJi0xIT09YS5jaGlsZE5vZGVzW2ZdLmNsYXNzTmFtZS5pbmRleE9mKFwianN0cmVlLWFuY2hvclwiKSl7aD1hLmNoaWxkTm9kZXNbZl07YnJlYWt9aCYmKCF0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24mJnRoaXMuX21vZGVsLmRhdGFbYS5pZF0uc3RhdGUuY2hlY2tlZCYmKGguY2xhc3NOYW1lKz1cIiBqc3RyZWUtY2hlY2tlZFwiKSxpPWwuY2xvbmVOb2RlKCExKSx0aGlzLl9tb2RlbC5kYXRhW2EuaWRdLnN0YXRlLmNoZWNrYm94X2Rpc2FibGVkJiYoaS5jbGFzc05hbWUrPVwiIGpzdHJlZS1jaGVja2JveC1kaXNhYmxlZFwiKSxoLmluc2VydEJlZm9yZShpLGguY2hpbGROb2Rlc1swXSkpfXJldHVybiBjfHwtMT09PXRoaXMuc2V0dGluZ3MuY2hlY2tib3guY2FzY2FkZS5pbmRleE9mKFwidW5kZXRlcm1pbmVkXCIpfHwodGhpcy5fZGF0YS5jaGVja2JveC51dG8mJmNsZWFyVGltZW91dCh0aGlzLl9kYXRhLmNoZWNrYm94LnV0byksdGhpcy5fZGF0YS5jaGVja2JveC51dG89c2V0VGltZW91dCh0aGlzLl91bmRldGVybWluZWQuYmluZCh0aGlzKSw1MCkpLGF9LHRoaXMuc2hvd19jaGVja2JveGVzPWZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5jaGVja2JveGVzPSEwLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLnJlbW92ZUNsYXNzKFwianN0cmVlLW5vLWNoZWNrYm94ZXNcIil9LHRoaXMuaGlkZV9jaGVja2JveGVzPWZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLnRoZW1lcy5jaGVja2JveGVzPSExLHRoaXMuZ2V0X2NvbnRhaW5lcl91bCgpLmFkZENsYXNzKFwianN0cmVlLW5vLWNoZWNrYm94ZXNcIil9LHRoaXMudG9nZ2xlX2NoZWNrYm94ZXM9ZnVuY3Rpb24oKXt0aGlzLl9kYXRhLmNvcmUudGhlbWVzLmNoZWNrYm94ZXM/dGhpcy5oaWRlX2NoZWNrYm94ZXMoKTp0aGlzLnNob3dfY2hlY2tib3hlcygpfSx0aGlzLmlzX3VuZGV0ZXJtaW5lZD1mdW5jdGlvbihiKXtiPXRoaXMuZ2V0X25vZGUoYik7dmFyIGM9dGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlLGQsZSxmPXRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixnPXRoaXMuX2RhdGFbZj9cImNvcmVcIjpcImNoZWNrYm94XCJdLnNlbGVjdGVkLGg9dGhpcy5fbW9kZWwuZGF0YTtpZighYnx8Yi5zdGF0ZVtmP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09PT0hMHx8LTE9PT1jLmluZGV4T2YoXCJ1bmRldGVybWluZWRcIil8fC0xPT09Yy5pbmRleE9mKFwiZG93blwiKSYmLTE9PT1jLmluZGV4T2YoXCJ1cFwiKSlyZXR1cm4hMTtpZighYi5zdGF0ZS5sb2FkZWQmJmIub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkPT09ITApcmV0dXJuITA7Zm9yKGQ9MCxlPWIuY2hpbGRyZW5fZC5sZW5ndGg7ZT5kO2QrKylpZigtMSE9PWEuaW5BcnJheShiLmNoaWxkcmVuX2RbZF0sZyl8fCFoW2IuY2hpbGRyZW5fZFtkXV0uc3RhdGUubG9hZGVkJiZoW2IuY2hpbGRyZW5fZFtkXV0ub3JpZ2luYWwuc3RhdGUudW5kZXRlcm1pbmVkKXJldHVybiEwO3JldHVybiExfSx0aGlzLmRpc2FibGVfY2hlY2tib3g9ZnVuY3Rpb24oYil7dmFyIGMsZCxlO2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXtmb3IoYj1iLnNsaWNlKCksYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzLmRpc2FibGVfY2hlY2tib3goYltjXSk7cmV0dXJuITB9cmV0dXJuIGI9dGhpcy5nZXRfbm9kZShiKSxiJiZiLmlkIT09YS5qc3RyZWUucm9vdD8oZT10aGlzLmdldF9ub2RlKGIsITApLHZvaWQoYi5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZHx8KGIuc3RhdGUuY2hlY2tib3hfZGlzYWJsZWQ9ITAsZSYmZS5sZW5ndGgmJmUuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5jaGlsZHJlbihcIi5qc3RyZWUtY2hlY2tib3hcIikuYWRkQ2xhc3MoXCJqc3RyZWUtY2hlY2tib3gtZGlzYWJsZWRcIiksdGhpcy50cmlnZ2VyKFwiZGlzYWJsZV9jaGVja2JveFwiLHtub2RlOmJ9KSkpKTohMX0sdGhpcy5lbmFibGVfY2hlY2tib3g9ZnVuY3Rpb24oYil7dmFyIGMsZCxlO2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXtmb3IoYj1iLnNsaWNlKCksYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzLmVuYWJsZV9jaGVja2JveChiW2NdKTtyZXR1cm4hMH1yZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGImJmIuaWQhPT1hLmpzdHJlZS5yb290PyhlPXRoaXMuZ2V0X25vZGUoYiwhMCksdm9pZChiLnN0YXRlLmNoZWNrYm94X2Rpc2FibGVkJiYoYi5zdGF0ZS5jaGVja2JveF9kaXNhYmxlZD0hMSxlJiZlLmxlbmd0aCYmZS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1jaGVja2JveFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1jaGVja2JveC1kaXNhYmxlZFwiKSx0aGlzLnRyaWdnZXIoXCJlbmFibGVfY2hlY2tib3hcIix7bm9kZTpifSkpKSk6ITF9LHRoaXMuYWN0aXZhdGVfbm9kZT1mdW5jdGlvbihiLGMpe3JldHVybiBhKGMudGFyZ2V0KS5oYXNDbGFzcyhcImpzdHJlZS1jaGVja2JveC1kaXNhYmxlZFwiKT8hMToodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiYodGhpcy5zZXR0aW5ncy5jaGVja2JveC53aG9sZV9ub2RlfHxhKGMudGFyZ2V0KS5oYXNDbGFzcyhcImpzdHJlZS1jaGVja2JveFwiKSkmJihjLmN0cmxLZXk9ITApLHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbnx8IXRoaXMuc2V0dGluZ3MuY2hlY2tib3gud2hvbGVfbm9kZSYmIWEoYy50YXJnZXQpLmhhc0NsYXNzKFwianN0cmVlLWNoZWNrYm94XCIpP2QuYWN0aXZhdGVfbm9kZS5jYWxsKHRoaXMsYixjKTp0aGlzLmlzX2Rpc2FibGVkKGIpPyExOih0aGlzLmlzX2NoZWNrZWQoYik/dGhpcy51bmNoZWNrX25vZGUoYixjKTp0aGlzLmNoZWNrX25vZGUoYixjKSx2b2lkIHRoaXMudHJpZ2dlcihcImFjdGl2YXRlX25vZGVcIix7bm9kZTp0aGlzLmdldF9ub2RlKGIpfSkpKX0sdGhpcy5fY2FzY2FkZV9uZXdfY2hlY2tlZF9zdGF0ZT1mdW5jdGlvbihhLGIpe3ZhciBjPXRoaXMsZD10aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24sZT10aGlzLl9tb2RlbC5kYXRhW2FdLGY9W10sZz1bXSxoLGksajtpZighdGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlX3RvX2Rpc2FibGVkJiZlLnN0YXRlLmRpc2FibGVkfHwhdGhpcy5zZXR0aW5ncy5jaGVja2JveC5jYXNjYWRlX3RvX2hpZGRlbiYmZS5zdGF0ZS5oaWRkZW4paj10aGlzLmdldF9jaGVja2VkX2Rlc2NlbmRhbnRzKGEpLGUuc3RhdGVbZD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdJiZqLnB1c2goZS5pZCksZj1mLmNvbmNhdChqKTtlbHNle2lmKGUuY2hpbGRyZW4pZm9yKGg9MCxpPWUuY2hpbGRyZW4ubGVuZ3RoO2k+aDtoKyspe3ZhciBrPWUuY2hpbGRyZW5baF07aj1jLl9jYXNjYWRlX25ld19jaGVja2VkX3N0YXRlKGssYiksZj1mLmNvbmNhdChqKSxqLmluZGV4T2Yoayk+LTEmJmcucHVzaChrKX12YXIgbD1jLmdldF9ub2RlKGUsITApLG09Zy5sZW5ndGg+MCYmZy5sZW5ndGg8ZS5jaGlsZHJlbi5sZW5ndGg7ZS5vcmlnaW5hbCYmZS5vcmlnaW5hbC5zdGF0ZSYmZS5vcmlnaW5hbC5zdGF0ZS51bmRldGVybWluZWQmJihlLm9yaWdpbmFsLnN0YXRlLnVuZGV0ZXJtaW5lZD1tKSxtPyhlLnN0YXRlW2Q/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMSxsLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoZD9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSk6YiYmZy5sZW5ndGg9PT1lLmNoaWxkcmVuLmxlbmd0aD8oZS5zdGF0ZVtkP1wic2VsZWN0ZWRcIjpcImNoZWNrZWRcIl09YixmLnB1c2goZS5pZCksbC5hdHRyKFwiYXJpYS1zZWxlY3RlZFwiLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmFkZENsYXNzKGQ/XCJqc3RyZWUtY2xpY2tlZFwiOlwianN0cmVlLWNoZWNrZWRcIikpOihlLnN0YXRlW2Q/XCJzZWxlY3RlZFwiOlwiY2hlY2tlZFwiXT0hMSxsLmF0dHIoXCJhcmlhLXNlbGVjdGVkXCIsITEpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoZD9cImpzdHJlZS1jbGlja2VkXCI6XCJqc3RyZWUtY2hlY2tlZFwiKSl9cmV0dXJuIGZ9LHRoaXMuZ2V0X2NoZWNrZWRfZGVzY2VuZGFudHM9ZnVuY3Rpb24oYil7dmFyIGM9dGhpcyxkPWMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbixlPWMuX21vZGVsLmRhdGFbYl07cmV0dXJuIGEudmFrYXRhLmFycmF5X2ZpbHRlcihlLmNoaWxkcmVuX2QsZnVuY3Rpb24oYSl7cmV0dXJuIGMuX21vZGVsLmRhdGFbYV0uc3RhdGVbZD9cInNlbGVjdGVkXCI6XCJjaGVja2VkXCJdfSl9LHRoaXMuY2hlY2tfbm9kZT1mdW5jdGlvbihiLGMpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5zZWxlY3Rfbm9kZShiLCExLCEwLGMpO3ZhciBkLGUsZixnO2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXtmb3IoYj1iLnNsaWNlKCksZT0wLGY9Yi5sZW5ndGg7Zj5lO2UrKyl0aGlzLmNoZWNrX25vZGUoYltlXSxjKTtyZXR1cm4hMH1yZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGImJmIuaWQhPT1hLmpzdHJlZS5yb290PyhkPXRoaXMuZ2V0X25vZGUoYiwhMCksdm9pZChiLnN0YXRlLmNoZWNrZWR8fChiLnN0YXRlLmNoZWNrZWQ9ITAsdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5wdXNoKGIuaWQpLGQmJmQubGVuZ3RoJiZkLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuYWRkQ2xhc3MoXCJqc3RyZWUtY2hlY2tlZFwiKSx0aGlzLnRyaWdnZXIoXCJjaGVja19ub2RlXCIse25vZGU6YixzZWxlY3RlZDp0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLGV2ZW50OmN9KSkpKTohMX0sdGhpcy51bmNoZWNrX25vZGU9ZnVuY3Rpb24oYixjKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuZGVzZWxlY3Rfbm9kZShiLCExLGMpO3ZhciBkLGUsZjtpZihhLnZha2F0YS5pc19hcnJheShiKSl7Zm9yKGI9Yi5zbGljZSgpLGQ9MCxlPWIubGVuZ3RoO2U+ZDtkKyspdGhpcy51bmNoZWNrX25vZGUoYltkXSxjKTtyZXR1cm4hMH1yZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGImJmIuaWQhPT1hLmpzdHJlZS5yb290PyhmPXRoaXMuZ2V0X25vZGUoYiwhMCksdm9pZChiLnN0YXRlLmNoZWNrZWQmJihiLnN0YXRlLmNoZWNrZWQ9ITEsdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD1hLnZha2F0YS5hcnJheV9yZW1vdmVfaXRlbSh0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLGIuaWQpLGYubGVuZ3RoJiZmLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2hlY2tlZFwiKSx0aGlzLnRyaWdnZXIoXCJ1bmNoZWNrX25vZGVcIix7bm9kZTpiLHNlbGVjdGVkOnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQsZXZlbnQ6Y30pKSkpOiExfSx0aGlzLmNoZWNrX2FsbD1mdW5jdGlvbigpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5zZWxlY3RfYWxsKCk7dmFyIGI9dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5jb25jYXQoW10pLGMsZDtmb3IodGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD10aGlzLl9tb2RlbC5kYXRhW2EuanN0cmVlLnJvb3RdLmNoaWxkcmVuX2QuY29uY2F0KCksYz0wLGQ9dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5sZW5ndGg7ZD5jO2MrKyl0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWRbY11dJiYodGhpcy5fbW9kZWwuZGF0YVt0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkW2NdXS5zdGF0ZS5jaGVja2VkPSEwKTt0aGlzLnJlZHJhdyghMCksdGhpcy50cmlnZ2VyKFwiY2hlY2tfYWxsXCIse3NlbGVjdGVkOnRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWR9KX0sdGhpcy51bmNoZWNrX2FsbD1mdW5jdGlvbigpe2lmKHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbilyZXR1cm4gdGhpcy5kZXNlbGVjdF9hbGwoKTt2YXIgYT10aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLmNvbmNhdChbXSksYixjO2ZvcihiPTAsYz10aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLmxlbmd0aDtjPmI7YisrKXRoaXMuX21vZGVsLmRhdGFbdGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZFtiXV0mJih0aGlzLl9tb2RlbC5kYXRhW3RoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWRbYl1dLnN0YXRlLmNoZWNrZWQ9ITEpO3RoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9W10sdGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLWNoZWNrZWRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtY2hlY2tlZFwiKSx0aGlzLnRyaWdnZXIoXCJ1bmNoZWNrX2FsbFwiLHtzZWxlY3RlZDp0aGlzLl9kYXRhLmNoZWNrYm94LnNlbGVjdGVkLG5vZGU6YX0pfSx0aGlzLmlzX2NoZWNrZWQ9ZnVuY3Rpb24oYil7cmV0dXJuIHRoaXMuc2V0dGluZ3MuY2hlY2tib3gudGllX3NlbGVjdGlvbj90aGlzLmlzX3NlbGVjdGVkKGIpOihiPXRoaXMuZ2V0X25vZGUoYiksYiYmYi5pZCE9PWEuanN0cmVlLnJvb3Q/Yi5zdGF0ZS5jaGVja2VkOiExKX0sdGhpcy5nZXRfY2hlY2tlZD1mdW5jdGlvbihiKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uP3RoaXMuZ2V0X3NlbGVjdGVkKGIpOmI/YS5tYXAodGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShhKX0uYmluZCh0aGlzKSk6dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5zbGljZSgpfSx0aGlzLmdldF90b3BfY2hlY2tlZD1mdW5jdGlvbihiKXtpZih0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24pcmV0dXJuIHRoaXMuZ2V0X3RvcF9zZWxlY3RlZChiKTt2YXIgYz10aGlzLmdldF9jaGVja2VkKCEwKSxkPXt9LGUsZixnLGg7Zm9yKGU9MCxmPWMubGVuZ3RoO2Y+ZTtlKyspZFtjW2VdLmlkXT1jW2VdO2ZvcihlPTAsZj1jLmxlbmd0aDtmPmU7ZSsrKWZvcihnPTAsaD1jW2VdLmNoaWxkcmVuX2QubGVuZ3RoO2g+ZztnKyspZFtjW2VdLmNoaWxkcmVuX2RbZ11dJiZkZWxldGUgZFtjW2VdLmNoaWxkcmVuX2RbZ11dO2M9W107Zm9yKGUgaW4gZClkLmhhc093blByb3BlcnR5KGUpJiZjLnB1c2goZSk7cmV0dXJuIGI/YS5tYXAoYyxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRfbm9kZShhKX0uYmluZCh0aGlzKSk6Y30sdGhpcy5nZXRfYm90dG9tX2NoZWNrZWQ9ZnVuY3Rpb24oYil7aWYodGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKXJldHVybiB0aGlzLmdldF9ib3R0b21fc2VsZWN0ZWQoYik7dmFyIGM9dGhpcy5nZXRfY2hlY2tlZCghMCksZD1bXSxlLGY7Zm9yKGU9MCxmPWMubGVuZ3RoO2Y+ZTtlKyspY1tlXS5jaGlsZHJlbi5sZW5ndGh8fGQucHVzaChjW2VdLmlkKTtyZXR1cm4gYj9hLm1hcChkLGZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmdldF9ub2RlKGEpfS5iaW5kKHRoaXMpKTpkfSx0aGlzLmxvYWRfbm9kZT1mdW5jdGlvbihiLGMpe3ZhciBlLGYsZyxoLGksajtpZighYS52YWthdGEuaXNfYXJyYXkoYikmJiF0aGlzLnNldHRpbmdzLmNoZWNrYm94LnRpZV9zZWxlY3Rpb24mJihqPXRoaXMuZ2V0X25vZGUoYiksaiYmai5zdGF0ZS5sb2FkZWQpKWZvcihlPTAsZj1qLmNoaWxkcmVuX2QubGVuZ3RoO2Y+ZTtlKyspdGhpcy5fbW9kZWwuZGF0YVtqLmNoaWxkcmVuX2RbZV1dLnN0YXRlLmNoZWNrZWQmJihpPSEwLHRoaXMuX2RhdGEuY2hlY2tib3guc2VsZWN0ZWQ9YS52YWthdGEuYXJyYXlfcmVtb3ZlX2l0ZW0odGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZCxqLmNoaWxkcmVuX2RbZV0pKTtyZXR1cm4gZC5sb2FkX25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSx0aGlzLmdldF9zdGF0ZT1mdW5jdGlvbigpe3ZhciBhPWQuZ2V0X3N0YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uP2E6KGEuY2hlY2tib3g9dGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZC5zbGljZSgpLGEpfSx0aGlzLnNldF9zdGF0ZT1mdW5jdGlvbihiLGMpe3ZhciBlPWQuc2V0X3N0YXRlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZihlJiZiLmNoZWNrYm94KXtpZighdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uKXt0aGlzLnVuY2hlY2tfYWxsKCk7dmFyIGY9dGhpczthLmVhY2goYi5jaGVja2JveCxmdW5jdGlvbihhLGIpe2YuY2hlY2tfbm9kZShiKX0pfXJldHVybiBkZWxldGUgYi5jaGVja2JveCx0aGlzLnNldF9zdGF0ZShiLGMpLCExfXJldHVybiBlfSx0aGlzLnJlZnJlc2g9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5jaGVja2JveC50aWVfc2VsZWN0aW9uJiYodGhpcy5fZGF0YS5jaGVja2JveC5zZWxlY3RlZD1bXSksZC5yZWZyZXNoLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LGEuanN0cmVlLmRlZmF1bHRzLmNvbmRpdGlvbmFsc2VsZWN0PWZ1bmN0aW9uKCl7cmV0dXJuITB9LGEuanN0cmVlLnBsdWdpbnMuY29uZGl0aW9uYWxzZWxlY3Q9ZnVuY3Rpb24oYSxiKXt0aGlzLmFjdGl2YXRlX25vZGU9ZnVuY3Rpb24oYSxjKXtyZXR1cm4gdGhpcy5zZXR0aW5ncy5jb25kaXRpb25hbHNlbGVjdC5jYWxsKHRoaXMsdGhpcy5nZXRfbm9kZShhKSxjKT9iLmFjdGl2YXRlX25vZGUuY2FsbCh0aGlzLGEsYyk6dm9pZCAwfX0sYS5qc3RyZWUuZGVmYXVsdHMuY29udGV4dG1lbnU9e3NlbGVjdF9ub2RlOiEwLHNob3dfYXRfbm9kZTohMCxpdGVtczpmdW5jdGlvbihiLGMpe3JldHVybntjcmVhdGU6e3NlcGFyYXRvcl9iZWZvcmU6ITEsc2VwYXJhdG9yX2FmdGVyOiEwLF9kaXNhYmxlZDohMSxsYWJlbDpcIkNyZWF0ZVwiLGFjdGlvbjpmdW5jdGlvbihiKXt2YXIgYz1hLmpzdHJlZS5yZWZlcmVuY2UoYi5yZWZlcmVuY2UpLGQ9Yy5nZXRfbm9kZShiLnJlZmVyZW5jZSk7Yy5jcmVhdGVfbm9kZShkLHt9LFwibGFzdFwiLGZ1bmN0aW9uKGEpe3RyeXtjLmVkaXQoYSl9Y2F0Y2goYil7c2V0VGltZW91dChmdW5jdGlvbigpe2MuZWRpdChhKX0sMCl9fSl9fSxyZW5hbWU6e3NlcGFyYXRvcl9iZWZvcmU6ITEsc2VwYXJhdG9yX2FmdGVyOiExLF9kaXNhYmxlZDohMSxsYWJlbDpcIlJlbmFtZVwiLGFjdGlvbjpmdW5jdGlvbihiKXt2YXIgYz1hLmpzdHJlZS5yZWZlcmVuY2UoYi5yZWZlcmVuY2UpLGQ9Yy5nZXRfbm9kZShiLnJlZmVyZW5jZSk7Yy5lZGl0KGQpfX0scmVtb3ZlOntzZXBhcmF0b3JfYmVmb3JlOiExLGljb246ITEsc2VwYXJhdG9yX2FmdGVyOiExLF9kaXNhYmxlZDohMSxsYWJlbDpcIkRlbGV0ZVwiLGFjdGlvbjpmdW5jdGlvbihiKXt2YXIgYz1hLmpzdHJlZS5yZWZlcmVuY2UoYi5yZWZlcmVuY2UpLGQ9Yy5nZXRfbm9kZShiLnJlZmVyZW5jZSk7Yy5pc19zZWxlY3RlZChkKT9jLmRlbGV0ZV9ub2RlKGMuZ2V0X3NlbGVjdGVkKCkpOmMuZGVsZXRlX25vZGUoZCl9fSxjY3A6e3NlcGFyYXRvcl9iZWZvcmU6ITAsaWNvbjohMSxzZXBhcmF0b3JfYWZ0ZXI6ITEsbGFiZWw6XCJFZGl0XCIsYWN0aW9uOiExLHN1Ym1lbnU6e2N1dDp7c2VwYXJhdG9yX2JlZm9yZTohMSxzZXBhcmF0b3JfYWZ0ZXI6ITEsbGFiZWw6XCJDdXRcIixhY3Rpb246ZnVuY3Rpb24oYil7dmFyIGM9YS5qc3RyZWUucmVmZXJlbmNlKGIucmVmZXJlbmNlKSxkPWMuZ2V0X25vZGUoYi5yZWZlcmVuY2UpO2MuaXNfc2VsZWN0ZWQoZCk/Yy5jdXQoYy5nZXRfdG9wX3NlbGVjdGVkKCkpOmMuY3V0KGQpfX0sY29weTp7c2VwYXJhdG9yX2JlZm9yZTohMSxpY29uOiExLHNlcGFyYXRvcl9hZnRlcjohMSxsYWJlbDpcIkNvcHlcIixhY3Rpb246ZnVuY3Rpb24oYil7dmFyIGM9YS5qc3RyZWUucmVmZXJlbmNlKGIucmVmZXJlbmNlKSxkPWMuZ2V0X25vZGUoYi5yZWZlcmVuY2UpO2MuaXNfc2VsZWN0ZWQoZCk/Yy5jb3B5KGMuZ2V0X3RvcF9zZWxlY3RlZCgpKTpjLmNvcHkoZCl9fSxwYXN0ZTp7c2VwYXJhdG9yX2JlZm9yZTohMSxpY29uOiExLF9kaXNhYmxlZDpmdW5jdGlvbihiKXtyZXR1cm4hYS5qc3RyZWUucmVmZXJlbmNlKGIucmVmZXJlbmNlKS5jYW5fcGFzdGUoKX0sc2VwYXJhdG9yX2FmdGVyOiExLGxhYmVsOlwiUGFzdGVcIixhY3Rpb246ZnVuY3Rpb24oYil7dmFyIGM9YS5qc3RyZWUucmVmZXJlbmNlKGIucmVmZXJlbmNlKSxkPWMuZ2V0X25vZGUoYi5yZWZlcmVuY2UpO2MucGFzdGUoZCl9fX19fX19LGEuanN0cmVlLnBsdWdpbnMuY29udGV4dG1lbnU9ZnVuY3Rpb24oYyxkKXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXtkLmJpbmQuY2FsbCh0aGlzKTt2YXIgYj0wLGM9bnVsbCxlLGY7dGhpcy5lbGVtZW50Lm9uKFwiaW5pdC5qc3RyZWUgbG9hZGluZy5qc3RyZWUgcmVhZHkuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzLmdldF9jb250YWluZXJfdWwoKS5hZGRDbGFzcyhcImpzdHJlZS1jb250ZXh0bWVudVwiKX0uYmluZCh0aGlzKSkub24oXCJjb250ZXh0bWVudS5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oYSxkKXtcImlucHV0XCIhPT1hLnRhcmdldC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJihhLnByZXZlbnREZWZhdWx0KCksYj1hLmN0cmxLZXk/K25ldyBEYXRlOjAsKGR8fGMpJiYoYj0rbmV3IERhdGUrMWU0KSxjJiZjbGVhclRpbWVvdXQoYyksdGhpcy5pc19sb2FkaW5nKGEuY3VycmVudFRhcmdldCl8fHRoaXMuc2hvd19jb250ZXh0bWVudShhLmN1cnJlbnRUYXJnZXQsYS5wYWdlWCxhLnBhZ2VZLGEpKX0uYmluZCh0aGlzKSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtYW5jaG9yXCIsZnVuY3Rpb24oYyl7dGhpcy5fZGF0YS5jb250ZXh0bWVudS52aXNpYmxlJiYoIWJ8fCtuZXcgRGF0ZS1iPjI1MCkmJmEudmFrYXRhLmNvbnRleHQuaGlkZSgpLGI9MH0uYmluZCh0aGlzKSkub24oXCJ0b3VjaHN0YXJ0LmpzdHJlZVwiLFwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihiKXtiLm9yaWdpbmFsRXZlbnQmJmIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlcyYmYi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdJiYoZT1iLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WCxmPWIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZLGM9c2V0VGltZW91dChmdW5jdGlvbigpe2EoYi5jdXJyZW50VGFyZ2V0KS50cmlnZ2VyKFwiY29udGV4dG1lbnVcIiwhMCl9LDc1MCkpfSkub24oXCJ0b3VjaG1vdmUudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGIpe2MmJmIub3JpZ2luYWxFdmVudCYmYi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzJiZiLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0mJihNYXRoLmFicyhlLWIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYKT4xMHx8TWF0aC5hYnMoZi1iLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSk+MTApJiYoY2xlYXJUaW1lb3V0KGMpLGEudmFrYXRhLmNvbnRleHQuaGlkZSgpKX0pLm9uKFwidG91Y2hlbmQudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGEpe2MmJmNsZWFyVGltZW91dChjKX0pLGEoaSkub24oXCJjb250ZXh0X2hpZGUudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGIsYyl7dGhpcy5fZGF0YS5jb250ZXh0bWVudS52aXNpYmxlPSExLGEoYy5yZWZlcmVuY2UpLnJlbW92ZUNsYXNzKFwianN0cmVlLWNvbnRleHRcIil9LmJpbmQodGhpcykpfSx0aGlzLnRlYXJkb3duPWZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb250ZXh0bWVudS52aXNpYmxlJiZhLnZha2F0YS5jb250ZXh0LmhpZGUoKSxhKGkpLm9mZihcImNvbnRleHRfaGlkZS52YWthdGEuanN0cmVlXCIpLGQudGVhcmRvd24uY2FsbCh0aGlzKX0sdGhpcy5zaG93X2NvbnRleHRtZW51PWZ1bmN0aW9uKGMsZCxlLGYpe2lmKGM9dGhpcy5nZXRfbm9kZShjKSwhY3x8Yy5pZD09PWEuanN0cmVlLnJvb3QpcmV0dXJuITE7dmFyIGc9dGhpcy5zZXR0aW5ncy5jb250ZXh0bWVudSxoPXRoaXMuZ2V0X25vZGUoYywhMCksaT1oLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIiksaj0hMSxrPSExOyhnLnNob3dfYXRfbm9kZXx8ZD09PWJ8fGU9PT1iKSYmKGo9aS5vZmZzZXQoKSxkPWoubGVmdCxlPWoudG9wK3RoaXMuX2RhdGEuY29yZS5saV9oZWlnaHQpLHRoaXMuc2V0dGluZ3MuY29udGV4dG1lbnUuc2VsZWN0X25vZGUmJiF0aGlzLmlzX3NlbGVjdGVkKGMpJiZ0aGlzLmFjdGl2YXRlX25vZGUoYyxmKSxrPWcuaXRlbXMsYS52YWthdGEuaXNfZnVuY3Rpb24oaykmJihrPWsuY2FsbCh0aGlzLGMsZnVuY3Rpb24oYSl7dGhpcy5fc2hvd19jb250ZXh0bWVudShjLGQsZSxhKX0uYmluZCh0aGlzKSkpLGEuaXNQbGFpbk9iamVjdChrKSYmdGhpcy5fc2hvd19jb250ZXh0bWVudShjLGQsZSxrKX0sdGhpcy5fc2hvd19jb250ZXh0bWVudT1mdW5jdGlvbihiLGMsZCxlKXtcclxudmFyIGY9dGhpcy5nZXRfbm9kZShiLCEwKSxnPWYuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKTthKGkpLm9uZShcImNvbnRleHRfc2hvdy52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oYixjKXt2YXIgZD1cImpzdHJlZS1jb250ZXh0bWVudSBqc3RyZWUtXCIrdGhpcy5nZXRfdGhlbWUoKStcIi1jb250ZXh0bWVudVwiO2EoYy5lbGVtZW50KS5hZGRDbGFzcyhkKSxnLmFkZENsYXNzKFwianN0cmVlLWNvbnRleHRcIil9LmJpbmQodGhpcykpLHRoaXMuX2RhdGEuY29udGV4dG1lbnUudmlzaWJsZT0hMCxhLnZha2F0YS5jb250ZXh0LnNob3coZyx7eDpjLHk6ZH0sZSksdGhpcy50cmlnZ2VyKFwic2hvd19jb250ZXh0bWVudVwiLHtub2RlOmIseDpjLHk6ZH0pfX0sZnVuY3Rpb24oYSl7dmFyIGI9ITEsYz17ZWxlbWVudDohMSxyZWZlcmVuY2U6ITEscG9zaXRpb25feDowLHBvc2l0aW9uX3k6MCxpdGVtczpbXSxodG1sOlwiXCIsaXNfdmlzaWJsZTohMX07YS52YWthdGEuY29udGV4dD17c2V0dGluZ3M6e2hpZGVfb25tb3VzZWxlYXZlOjAsaWNvbnM6ITB9LF90cmlnZ2VyOmZ1bmN0aW9uKGIpe2EoaSkudHJpZ2dlckhhbmRsZXIoXCJjb250ZXh0X1wiK2IrXCIudmFrYXRhXCIse3JlZmVyZW5jZTpjLnJlZmVyZW5jZSxlbGVtZW50OmMuZWxlbWVudCxwb3NpdGlvbjp7eDpjLnBvc2l0aW9uX3gseTpjLnBvc2l0aW9uX3l9fSl9LF9leGVjdXRlOmZ1bmN0aW9uKGIpe3JldHVybiBiPWMuaXRlbXNbYl0sYiYmKCFiLl9kaXNhYmxlZHx8YS52YWthdGEuaXNfZnVuY3Rpb24oYi5fZGlzYWJsZWQpJiYhYi5fZGlzYWJsZWQoe2l0ZW06YixyZWZlcmVuY2U6Yy5yZWZlcmVuY2UsZWxlbWVudDpjLmVsZW1lbnR9KSkmJmIuYWN0aW9uP2IuYWN0aW9uLmNhbGwobnVsbCx7aXRlbTpiLHJlZmVyZW5jZTpjLnJlZmVyZW5jZSxlbGVtZW50OmMuZWxlbWVudCxwb3NpdGlvbjp7eDpjLnBvc2l0aW9uX3gseTpjLnBvc2l0aW9uX3l9fSk6ITF9LF9wYXJzZTpmdW5jdGlvbihiLGQpe2lmKCFiKXJldHVybiExO2R8fChjLmh0bWw9XCJcIixjLml0ZW1zPVtdKTt2YXIgZT1cIlwiLGY9ITEsZztyZXR1cm4gZCYmKGUrPVwiPHVsPlwiKSxhLmVhY2goYixmdW5jdGlvbihiLGQpe3JldHVybiBkPyhjLml0ZW1zLnB1c2goZCksIWYmJmQuc2VwYXJhdG9yX2JlZm9yZSYmKGUrPVwiPGxpIGNsYXNzPSd2YWthdGEtY29udGV4dC1zZXBhcmF0b3InPjxhIGhyZWY9JyMnIFwiKyhhLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmljb25zP1wiXCI6J2NsYXNzPVwidmFrYXRhLWNvbnRleHQtbm8taWNvbnNcIicpK1wiPiYjMTYwOzwvYT48L2xpPlwiKSxmPSExLGUrPVwiPGxpIGNsYXNzPSdcIisoZC5fY2xhc3N8fFwiXCIpKyhkLl9kaXNhYmxlZD09PSEwfHxhLnZha2F0YS5pc19mdW5jdGlvbihkLl9kaXNhYmxlZCkmJmQuX2Rpc2FibGVkKHtpdGVtOmQscmVmZXJlbmNlOmMucmVmZXJlbmNlLGVsZW1lbnQ6Yy5lbGVtZW50fSk/XCIgdmFrYXRhLWNvbnRleHRtZW51LWRpc2FibGVkIFwiOlwiXCIpK1wiJyBcIisoZC5zaG9ydGN1dD9cIiBkYXRhLXNob3J0Y3V0PSdcIitkLnNob3J0Y3V0K1wiJyBcIjpcIlwiKStcIj5cIixlKz1cIjxhIGhyZWY9JyMnIHJlbD0nXCIrKGMuaXRlbXMubGVuZ3RoLTEpK1wiJyBcIisoZC50aXRsZT9cInRpdGxlPSdcIitkLnRpdGxlK1wiJ1wiOlwiXCIpK1wiPlwiLGEudmFrYXRhLmNvbnRleHQuc2V0dGluZ3MuaWNvbnMmJihlKz1cIjxpIFwiLGQuaWNvbiYmKGUrPS0xIT09ZC5pY29uLmluZGV4T2YoXCIvXCIpfHwtMSE9PWQuaWNvbi5pbmRleE9mKFwiLlwiKT9cIiBzdHlsZT0nYmFja2dyb3VuZDp1cmwoXFxcIlwiK2QuaWNvbitcIlxcXCIpIGNlbnRlciBjZW50ZXIgbm8tcmVwZWF0JyBcIjpcIiBjbGFzcz0nXCIrZC5pY29uK1wiJyBcIiksZSs9XCI+PC9pPjxzcGFuIGNsYXNzPSd2YWthdGEtY29udGV4dG1lbnUtc2VwJz4mIzE2MDs8L3NwYW4+XCIpLGUrPShhLnZha2F0YS5pc19mdW5jdGlvbihkLmxhYmVsKT9kLmxhYmVsKHtpdGVtOmIscmVmZXJlbmNlOmMucmVmZXJlbmNlLGVsZW1lbnQ6Yy5lbGVtZW50fSk6ZC5sYWJlbCkrKGQuc2hvcnRjdXQ/JyA8c3BhbiBjbGFzcz1cInZha2F0YS1jb250ZXh0bWVudS1zaG9ydGN1dCB2YWthdGEtY29udGV4dG1lbnUtc2hvcnRjdXQtJytkLnNob3J0Y3V0KydcIj4nKyhkLnNob3J0Y3V0X2xhYmVsfHxcIlwiKStcIjwvc3Bhbj5cIjpcIlwiKStcIjwvYT5cIixkLnN1Ym1lbnUmJihnPWEudmFrYXRhLmNvbnRleHQuX3BhcnNlKGQuc3VibWVudSwhMCksZyYmKGUrPWcpKSxlKz1cIjwvbGk+XCIsdm9pZChkLnNlcGFyYXRvcl9hZnRlciYmKGUrPVwiPGxpIGNsYXNzPSd2YWthdGEtY29udGV4dC1zZXBhcmF0b3InPjxhIGhyZWY9JyMnIFwiKyhhLnZha2F0YS5jb250ZXh0LnNldHRpbmdzLmljb25zP1wiXCI6J2NsYXNzPVwidmFrYXRhLWNvbnRleHQtbm8taWNvbnNcIicpK1wiPiYjMTYwOzwvYT48L2xpPlwiLGY9ITApKSk6ITB9KSxlPWUucmVwbGFjZSgvPGxpIGNsYXNzXFw9J3Zha2F0YS1jb250ZXh0LXNlcGFyYXRvcidcXD48XFwvbGlcXD4kLyxcIlwiKSxkJiYoZSs9XCI8L3VsPlwiKSxkfHwoYy5odG1sPWUsYS52YWthdGEuY29udGV4dC5fdHJpZ2dlcihcInBhcnNlXCIpKSxlLmxlbmd0aD4xMD9lOiExfSxfc2hvd19zdWJtZW51OmZ1bmN0aW9uKGMpe2lmKGM9YShjKSxjLmxlbmd0aCYmYy5jaGlsZHJlbihcInVsXCIpLmxlbmd0aCl7dmFyIGQ9Yy5jaGlsZHJlbihcInVsXCIpLGU9Yy5vZmZzZXQoKS5sZWZ0LGY9ZStjLm91dGVyV2lkdGgoKSxnPWMub2Zmc2V0KCkudG9wLGg9ZC53aWR0aCgpLGk9ZC5oZWlnaHQoKSxqPWEod2luZG93KS53aWR0aCgpK2Eod2luZG93KS5zY3JvbGxMZWZ0KCksaz1hKHdpbmRvdykuaGVpZ2h0KCkrYSh3aW5kb3cpLnNjcm9sbFRvcCgpO2I/Y1tmLShoKzEwK2Mub3V0ZXJXaWR0aCgpKTwwP1wiYWRkQ2xhc3NcIjpcInJlbW92ZUNsYXNzXCJdKFwidmFrYXRhLWNvbnRleHQtbGVmdFwiKTpjW2YraD5qJiZlPmotZj9cImFkZENsYXNzXCI6XCJyZW1vdmVDbGFzc1wiXShcInZha2F0YS1jb250ZXh0LXJpZ2h0XCIpLGcraSsxMD5rJiZkLmNzcyhcImJvdHRvbVwiLFwiLTFweFwiKSxjLmhhc0NsYXNzKFwidmFrYXRhLWNvbnRleHQtcmlnaHRcIik/aD5lJiZkLmNzcyhcIm1hcmdpbi1yaWdodFwiLGUtaCk6aD5qLWYmJmQuY3NzKFwibWFyZ2luLWxlZnRcIixqLWYtaCksZC5zaG93KCl9fSxzaG93OmZ1bmN0aW9uKGQsZSxmKXt2YXIgZyxoLGosayxsLG0sbixvLHA9ITA7c3dpdGNoKGMuZWxlbWVudCYmYy5lbGVtZW50Lmxlbmd0aCYmYy5lbGVtZW50LndpZHRoKFwiXCIpLHApe2Nhc2UhZSYmIWQ6cmV0dXJuITE7Y2FzZSEhZSYmISFkOmMucmVmZXJlbmNlPWQsYy5wb3NpdGlvbl94PWUueCxjLnBvc2l0aW9uX3k9ZS55O2JyZWFrO2Nhc2UhZSYmISFkOmMucmVmZXJlbmNlPWQsZz1kLm9mZnNldCgpLGMucG9zaXRpb25feD1nLmxlZnQrZC5vdXRlckhlaWdodCgpLGMucG9zaXRpb25feT1nLnRvcDticmVhaztjYXNlISFlJiYhZDpjLnBvc2l0aW9uX3g9ZS54LGMucG9zaXRpb25feT1lLnl9ZCYmIWYmJmEoZCkuZGF0YShcInZha2F0YV9jb250ZXh0bWVudVwiKSYmKGY9YShkKS5kYXRhKFwidmFrYXRhX2NvbnRleHRtZW51XCIpKSxhLnZha2F0YS5jb250ZXh0Ll9wYXJzZShmKSYmYy5lbGVtZW50Lmh0bWwoYy5odG1sKSxjLml0ZW1zLmxlbmd0aCYmKGMuZWxlbWVudC5hcHBlbmRUbyhpLmJvZHkpLGg9Yy5lbGVtZW50LGo9Yy5wb3NpdGlvbl94LGs9Yy5wb3NpdGlvbl95LGw9aC53aWR0aCgpLG09aC5oZWlnaHQoKSxuPWEod2luZG93KS53aWR0aCgpK2Eod2luZG93KS5zY3JvbGxMZWZ0KCksbz1hKHdpbmRvdykuaGVpZ2h0KCkrYSh3aW5kb3cpLnNjcm9sbFRvcCgpLGImJihqLT1oLm91dGVyV2lkdGgoKS1hKGQpLm91dGVyV2lkdGgoKSxqPGEod2luZG93KS5zY3JvbGxMZWZ0KCkrMjAmJihqPWEod2luZG93KS5zY3JvbGxMZWZ0KCkrMjApKSxqK2wrMjA+biYmKGo9bi0obCsyMCkpLGsrbSsyMD5vJiYoaz1vLShtKzIwKSksYy5lbGVtZW50LmNzcyh7bGVmdDpqLHRvcDprfSkuc2hvdygpLmZpbmQoXCJhXCIpLmZpcnN0KCkudHJpZ2dlcihcImZvY3VzXCIpLnBhcmVudCgpLmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIiksYy5pc192aXNpYmxlPSEwLGEudmFrYXRhLmNvbnRleHQuX3RyaWdnZXIoXCJzaG93XCIpKX0saGlkZTpmdW5jdGlvbigpe2MuaXNfdmlzaWJsZSYmKGMuZWxlbWVudC5oaWRlKCkuZmluZChcInVsXCIpLmhpZGUoKS5lbmQoKS5maW5kKFwiOmZvY3VzXCIpLnRyaWdnZXIoXCJibHVyXCIpLmVuZCgpLmRldGFjaCgpLGMuaXNfdmlzaWJsZT0hMSxhLnZha2F0YS5jb250ZXh0Ll90cmlnZ2VyKFwiaGlkZVwiKSl9fSxhKGZ1bmN0aW9uKCl7Yj1cInJ0bFwiPT09YShpLmJvZHkpLmNzcyhcImRpcmVjdGlvblwiKTt2YXIgZD0hMTtjLmVsZW1lbnQ9YShcIjx1bCBjbGFzcz0ndmFrYXRhLWNvbnRleHQnPjwvdWw+XCIpLGMuZWxlbWVudC5vbihcIm1vdXNlZW50ZXJcIixcImxpXCIsZnVuY3Rpb24oYil7Yi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSxhLmNvbnRhaW5zKHRoaXMsYi5yZWxhdGVkVGFyZ2V0KXx8KGQmJmNsZWFyVGltZW91dChkKSxjLmVsZW1lbnQuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmVuZCgpLGEodGhpcykuc2libGluZ3MoKS5maW5kKFwidWxcIikuaGlkZSgpLmVuZCgpLmVuZCgpLnBhcmVudHNVbnRpbChcIi52YWthdGEtY29udGV4dFwiLFwibGlcIikuYWRkQmFjaygpLmFkZENsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIiksYS52YWthdGEuY29udGV4dC5fc2hvd19zdWJtZW51KHRoaXMpKX0pLm9uKFwibW91c2VsZWF2ZVwiLFwibGlcIixmdW5jdGlvbihiKXthLmNvbnRhaW5zKHRoaXMsYi5yZWxhdGVkVGFyZ2V0KXx8YSh0aGlzKS5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmFkZEJhY2soKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpfSkub24oXCJtb3VzZWxlYXZlXCIsZnVuY3Rpb24oYil7YSh0aGlzKS5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIiksYS52YWthdGEuY29udGV4dC5zZXR0aW5ncy5oaWRlX29ubW91c2VsZWF2ZSYmKGQ9c2V0VGltZW91dChmdW5jdGlvbihiKXtyZXR1cm4gZnVuY3Rpb24oKXthLnZha2F0YS5jb250ZXh0LmhpZGUoKX19KHRoaXMpLGEudmFrYXRhLmNvbnRleHQuc2V0dGluZ3MuaGlkZV9vbm1vdXNlbGVhdmUpKX0pLm9uKFwiY2xpY2tcIixcImFcIixmdW5jdGlvbihiKXtiLnByZXZlbnREZWZhdWx0KCksYSh0aGlzKS50cmlnZ2VyKFwiYmx1clwiKS5wYXJlbnQoKS5oYXNDbGFzcyhcInZha2F0YS1jb250ZXh0LWRpc2FibGVkXCIpfHxhLnZha2F0YS5jb250ZXh0Ll9leGVjdXRlKGEodGhpcykuYXR0cihcInJlbFwiKSk9PT0hMXx8YS52YWthdGEuY29udGV4dC5oaWRlKCl9KS5vbihcImtleWRvd25cIixcImFcIixmdW5jdGlvbihiKXt2YXIgZD1udWxsO3N3aXRjaChiLndoaWNoKXtjYXNlIDEzOmNhc2UgMzI6Yi50eXBlPVwiY2xpY2tcIixiLnByZXZlbnREZWZhdWx0KCksYShiLmN1cnJlbnRUYXJnZXQpLnRyaWdnZXIoYik7YnJlYWs7Y2FzZSAzNzpjLmlzX3Zpc2libGUmJihjLmVsZW1lbnQuZmluZChcIi52YWthdGEtY29udGV4dC1ob3ZlclwiKS5sYXN0KCkuY2xvc2VzdChcImxpXCIpLmZpcnN0KCkuZmluZChcInVsXCIpLmhpZGUoKS5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikuZW5kKCkuZW5kKCkuY2hpbGRyZW4oXCJhXCIpLnRyaWdnZXIoXCJmb2N1c1wiKSxiLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGIucHJldmVudERlZmF1bHQoKSk7YnJlYWs7Y2FzZSAzODpjLmlzX3Zpc2libGUmJihkPWMuZWxlbWVudC5maW5kKFwidWw6dmlzaWJsZVwiKS5hZGRCYWNrKCkubGFzdCgpLmNoaWxkcmVuKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLnJlbW92ZUNsYXNzKFwidmFrYXRhLWNvbnRleHQtaG92ZXJcIikucHJldkFsbChcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5maXJzdCgpLGQubGVuZ3RofHwoZD1jLmVsZW1lbnQuZmluZChcInVsOnZpc2libGVcIikuYWRkQmFjaygpLmxhc3QoKS5jaGlsZHJlbihcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5sYXN0KCkpLGQuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5jaGlsZHJlbihcImFcIikudHJpZ2dlcihcImZvY3VzXCIpLGIuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYi5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztjYXNlIDM5OmMuaXNfdmlzaWJsZSYmKGMuZWxlbWVudC5maW5kKFwiLnZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmxhc3QoKS5jaGlsZHJlbihcInVsXCIpLnNob3coKS5jaGlsZHJlbihcImxpOm5vdCgudmFrYXRhLWNvbnRleHQtc2VwYXJhdG9yKVwiKS5yZW1vdmVDbGFzcyhcInZha2F0YS1jb250ZXh0LWhvdmVyXCIpLmZpcnN0KCkuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5jaGlsZHJlbihcImFcIikudHJpZ2dlcihcImZvY3VzXCIpLGIuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYi5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztjYXNlIDQwOmMuaXNfdmlzaWJsZSYmKGQ9Yy5lbGVtZW50LmZpbmQoXCJ1bDp2aXNpYmxlXCIpLmFkZEJhY2soKS5sYXN0KCkuY2hpbGRyZW4oXCIudmFrYXRhLWNvbnRleHQtaG92ZXJcIikucmVtb3ZlQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5uZXh0QWxsKFwibGk6bm90KC52YWthdGEtY29udGV4dC1zZXBhcmF0b3IpXCIpLmZpcnN0KCksZC5sZW5ndGh8fChkPWMuZWxlbWVudC5maW5kKFwidWw6dmlzaWJsZVwiKS5hZGRCYWNrKCkubGFzdCgpLmNoaWxkcmVuKFwibGk6bm90KC52YWthdGEtY29udGV4dC1zZXBhcmF0b3IpXCIpLmZpcnN0KCkpLGQuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ob3ZlclwiKS5jaGlsZHJlbihcImFcIikudHJpZ2dlcihcImZvY3VzXCIpLGIuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksYi5wcmV2ZW50RGVmYXVsdCgpKTticmVhaztjYXNlIDI3OmEudmFrYXRhLmNvbnRleHQuaGlkZSgpLGIucHJldmVudERlZmF1bHQoKX19KS5vbihcImtleWRvd25cIixmdW5jdGlvbihhKXthLnByZXZlbnREZWZhdWx0KCk7dmFyIGI9Yy5lbGVtZW50LmZpbmQoXCIudmFrYXRhLWNvbnRleHRtZW51LXNob3J0Y3V0LVwiK2Eud2hpY2gpLnBhcmVudCgpO2IucGFyZW50KCkubm90KFwiLnZha2F0YS1jb250ZXh0LWRpc2FibGVkXCIpJiZiLnRyaWdnZXIoXCJjbGlja1wiKX0pLGEoaSkub24oXCJtb3VzZWRvd24udmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGIpe2MuaXNfdmlzaWJsZSYmYy5lbGVtZW50WzBdIT09Yi50YXJnZXQmJiFhLmNvbnRhaW5zKGMuZWxlbWVudFswXSxiLnRhcmdldCkmJmEudmFrYXRhLmNvbnRleHQuaGlkZSgpfSkub24oXCJjb250ZXh0X3Nob3cudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGEsZCl7Yy5lbGVtZW50LmZpbmQoXCJsaTpoYXModWwpXCIpLmNoaWxkcmVuKFwiYVwiKS5hZGRDbGFzcyhcInZha2F0YS1jb250ZXh0LXBhcmVudFwiKSxiJiZjLmVsZW1lbnQuYWRkQ2xhc3MoXCJ2YWthdGEtY29udGV4dC1ydGxcIikuY3NzKFwiZGlyZWN0aW9uXCIsXCJydGxcIiksYy5lbGVtZW50LmZpbmQoXCJ1bFwiKS5oaWRlKCkuZW5kKCl9KX0pfShhKSxhLmpzdHJlZS5kZWZhdWx0cy5kbmQ9e2NvcHk6ITAsb3Blbl90aW1lb3V0OjUwMCxpc19kcmFnZ2FibGU6ITAsY2hlY2tfd2hpbGVfZHJhZ2dpbmc6ITAsYWx3YXlzX2NvcHk6ITEsaW5zaWRlX3BvczowLGRyYWdfc2VsZWN0aW9uOiEwLHRvdWNoOiEwLGxhcmdlX2Ryb3BfdGFyZ2V0OiExLGxhcmdlX2RyYWdfdGFyZ2V0OiExLHVzZV9odG1sNTohMX07dmFyIG0sbjthLmpzdHJlZS5wbHVnaW5zLmRuZD1mdW5jdGlvbihiLGMpe3RoaXMuaW5pdD1mdW5jdGlvbihhLGIpe2MuaW5pdC5jYWxsKHRoaXMsYSxiKSx0aGlzLnNldHRpbmdzLmRuZC51c2VfaHRtbDU9dGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1JiZcImRyYWdnYWJsZVwiaW4gaS5jcmVhdGVFbGVtZW50KFwic3BhblwiKX0sdGhpcy5iaW5kPWZ1bmN0aW9uKCl7Yy5iaW5kLmNhbGwodGhpcyksdGhpcy5lbGVtZW50Lm9uKHRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNT9cImRyYWdzdGFydC5qc3RyZWVcIjpcIm1vdXNlZG93bi5qc3RyZWUgdG91Y2hzdGFydC5qc3RyZWVcIix0aGlzLnNldHRpbmdzLmRuZC5sYXJnZV9kcmFnX3RhcmdldD9cIi5qc3RyZWUtbm9kZVwiOlwiLmpzdHJlZS1hbmNob3JcIixmdW5jdGlvbihiKXtpZih0aGlzLnNldHRpbmdzLmRuZC5sYXJnZV9kcmFnX3RhcmdldCYmYShiLnRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKVswXSE9PWIuY3VycmVudFRhcmdldClyZXR1cm4hMDtpZihcInRvdWNoc3RhcnRcIj09PWIudHlwZSYmKCF0aGlzLnNldHRpbmdzLmRuZC50b3VjaHx8XCJzZWxlY3RlZFwiPT09dGhpcy5zZXR0aW5ncy5kbmQudG91Y2gmJiFhKGIuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmhhc0NsYXNzKFwianN0cmVlLWNsaWNrZWRcIikpKXJldHVybiEwO3ZhciBjPXRoaXMuZ2V0X25vZGUoYi50YXJnZXQpLGQ9dGhpcy5pc19zZWxlY3RlZChjKSYmdGhpcy5zZXR0aW5ncy5kbmQuZHJhZ19zZWxlY3Rpb24/dGhpcy5nZXRfdG9wX3NlbGVjdGVkKCkubGVuZ3RoOjEsZT1kPjE/ZCtcIiBcIit0aGlzLmdldF9zdHJpbmcoXCJub2Rlc1wiKTp0aGlzLmdldF90ZXh0KGIuY3VycmVudFRhcmdldCk7aWYodGhpcy5zZXR0aW5ncy5jb3JlLmZvcmNlX3RleHQmJihlPWEudmFrYXRhLmh0bWwuZXNjYXBlKGUpKSxjJiZjLmlkJiZjLmlkIT09YS5qc3RyZWUucm9vdCYmKDE9PT1iLndoaWNofHxcInRvdWNoc3RhcnRcIj09PWIudHlwZXx8XCJkcmFnc3RhcnRcIj09PWIudHlwZSkmJih0aGlzLnNldHRpbmdzLmRuZC5pc19kcmFnZ2FibGU9PT0hMHx8YS52YWthdGEuaXNfZnVuY3Rpb24odGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlKSYmdGhpcy5zZXR0aW5ncy5kbmQuaXNfZHJhZ2dhYmxlLmNhbGwodGhpcyxkPjE/dGhpcy5nZXRfdG9wX3NlbGVjdGVkKCEwKTpbY10sYikpKXtpZihtPXtqc3RyZWU6ITAsb3JpZ2luOnRoaXMsb2JqOnRoaXMuZ2V0X25vZGUoYywhMCksbm9kZXM6ZD4xP3RoaXMuZ2V0X3RvcF9zZWxlY3RlZCgpOltjLmlkXX0sbj1iLmN1cnJlbnRUYXJnZXQsIXRoaXMuc2V0dGluZ3MuZG5kLnVzZV9odG1sNSlyZXR1cm4gdGhpcy5lbGVtZW50LnRyaWdnZXIoXCJtb3VzZWRvd24uanN0cmVlXCIpLGEudmFrYXRhLmRuZC5zdGFydChiLG0sJzxkaXYgaWQ9XCJqc3RyZWUtZG5kXCIgY2xhc3M9XCJqc3RyZWUtJyt0aGlzLmdldF90aGVtZSgpK1wiIGpzdHJlZS1cIit0aGlzLmdldF90aGVtZSgpK1wiLVwiK3RoaXMuZ2V0X3RoZW1lX3ZhcmlhbnQoKStcIiBcIisodGhpcy5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKydcIj48aSBjbGFzcz1cImpzdHJlZS1pY29uIGpzdHJlZS1lclwiPjwvaT4nK2UrJzxpbnMgY2xhc3M9XCJqc3RyZWUtY29weVwiPis8L2lucz48L2Rpdj4nKTthLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzdGFydFwiLGIse2hlbHBlcjphKCksZWxlbWVudDpuLGRhdGE6bX0pfX0uYmluZCh0aGlzKSksdGhpcy5zZXR0aW5ncy5kbmQudXNlX2h0bWw1JiZ0aGlzLmVsZW1lbnQub24oXCJkcmFnb3Zlci5qc3RyZWVcIixmdW5jdGlvbihiKXtyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCgpLGEudmFrYXRhLmRuZC5fdHJpZ2dlcihcIm1vdmVcIixiLHtoZWxwZXI6YSgpLGVsZW1lbnQ6bixkYXRhOm19KSwhMX0pLm9uKFwiZHJvcC5qc3RyZWVcIixmdW5jdGlvbihiKXtyZXR1cm4gYi5wcmV2ZW50RGVmYXVsdCgpLGEudmFrYXRhLmRuZC5fdHJpZ2dlcihcInN0b3BcIixiLHtoZWxwZXI6YSgpLGVsZW1lbnQ6bixkYXRhOm19KSwhMX0uYmluZCh0aGlzKSl9LHRoaXMucmVkcmF3X25vZGU9ZnVuY3Rpb24oYSxiLGQsZSl7aWYoYT1jLnJlZHJhd19ub2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhJiZ0aGlzLnNldHRpbmdzLmRuZC51c2VfaHRtbDUpaWYodGhpcy5zZXR0aW5ncy5kbmQubGFyZ2VfZHJhZ190YXJnZXQpYS5zZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwhMCk7ZWxzZXt2YXIgZixnLGg9bnVsbDtmb3IoZj0wLGc9YS5jaGlsZE5vZGVzLmxlbmd0aDtnPmY7ZisrKWlmKGEuY2hpbGROb2Rlc1tmXSYmYS5jaGlsZE5vZGVzW2ZdLmNsYXNzTmFtZSYmLTEhPT1hLmNoaWxkTm9kZXNbZl0uY2xhc3NOYW1lLmluZGV4T2YoXCJqc3RyZWUtYW5jaG9yXCIpKXtoPWEuY2hpbGROb2Rlc1tmXTticmVha31oJiZoLnNldEF0dHJpYnV0ZShcImRyYWdnYWJsZVwiLCEwKX1yZXR1cm4gYX19LGEoZnVuY3Rpb24oKXt2YXIgYz0hMSxkPSExLGU9ITEsZj0hMSxnPWEoJzxkaXYgaWQ9XCJqc3RyZWUtbWFya2VyXCI+JiMxNjA7PC9kaXY+JykuaGlkZSgpO2EoaSkub24oXCJkcmFnb3Zlci52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oYil7biYmYS52YWthdGEuZG5kLl90cmlnZ2VyKFwibW92ZVwiLGIse2hlbHBlcjphKCksZWxlbWVudDpuLGRhdGE6bX0pfSkub24oXCJkcm9wLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihiKXtuJiYoYS52YWthdGEuZG5kLl90cmlnZ2VyKFwic3RvcFwiLGIse2hlbHBlcjphKCksZWxlbWVudDpuLGRhdGE6bX0pLG49bnVsbCxtPW51bGwpfSkub24oXCJkbmRfc3RhcnQudmFrYXRhLmpzdHJlZVwiLGZ1bmN0aW9uKGEsYil7Yz0hMSxlPSExLGImJmIuZGF0YSYmYi5kYXRhLmpzdHJlZSYmZy5hcHBlbmRUbyhpLmJvZHkpfSkub24oXCJkbmRfbW92ZS52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oaCxpKXt2YXIgaj1pLmV2ZW50LnRhcmdldCE9PWUudGFyZ2V0O2lmKGYmJighaS5ldmVudHx8XCJkcmFnb3ZlclwiIT09aS5ldmVudC50eXBlfHxqKSYmY2xlYXJUaW1lb3V0KGYpLGkmJmkuZGF0YSYmaS5kYXRhLmpzdHJlZSYmKCFpLmV2ZW50LnRhcmdldC5pZHx8XCJqc3RyZWUtbWFya2VyXCIhPT1pLmV2ZW50LnRhcmdldC5pZCkpe2U9aS5ldmVudDt2YXIgaz1hLmpzdHJlZS5yZWZlcmVuY2UoaS5ldmVudC50YXJnZXQpLGw9ITEsbT0hMSxuPSExLG8scCxxLHIscyx0LHUsdix3LHgseSx6LEEsQixDLEQsRSxGO2lmKGsmJmsuX2RhdGEmJmsuX2RhdGEuZG5kKWlmKGcuYXR0cihcImNsYXNzXCIsXCJqc3RyZWUtXCIray5nZXRfdGhlbWUoKSsoay5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKSxEPWkuZGF0YS5vcmlnaW4mJihpLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5hbHdheXNfY29weXx8aS5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuY29weSYmKGkuZXZlbnQubWV0YUtleXx8aS5ldmVudC5jdHJsS2V5KSksaS5oZWxwZXIuY2hpbGRyZW4oKS5hdHRyKFwiY2xhc3NcIixcImpzdHJlZS1cIitrLmdldF90aGVtZSgpK1wiIGpzdHJlZS1cIitrLmdldF90aGVtZSgpK1wiLVwiK2suZ2V0X3RoZW1lX3ZhcmlhbnQoKStcIiBcIisoay5zZXR0aW5ncy5jb3JlLnRoZW1lcy5yZXNwb25zaXZlP1wiIGpzdHJlZS1kbmQtcmVzcG9uc2l2ZVwiOlwiXCIpKS5maW5kKFwiLmpzdHJlZS1jb3B5XCIpLmZpcnN0KClbRD9cInNob3dcIjpcImhpZGVcIl0oKSxpLmV2ZW50LnRhcmdldCE9PWsuZWxlbWVudFswXSYmaS5ldmVudC50YXJnZXQhPT1rLmdldF9jb250YWluZXJfdWwoKVswXXx8MCE9PWsuZ2V0X2NvbnRhaW5lcl91bCgpLmNoaWxkcmVuKCkubGVuZ3RoKXtpZihsPWsuc2V0dGluZ3MuZG5kLmxhcmdlX2Ryb3BfdGFyZ2V0P2EoaS5ldmVudC50YXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlLW5vZGVcIikuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKTphKGkuZXZlbnQudGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1hbmNob3JcIiksbCYmbC5sZW5ndGgmJmwucGFyZW50KCkuaXMoXCIuanN0cmVlLWNsb3NlZCwgLmpzdHJlZS1vcGVuLCAuanN0cmVlLWxlYWZcIikmJihtPWwub2Zmc2V0KCksbj0oaS5ldmVudC5wYWdlWSE9PWI/aS5ldmVudC5wYWdlWTppLmV2ZW50Lm9yaWdpbmFsRXZlbnQucGFnZVkpLW0udG9wLHI9bC5vdXRlckhlaWdodCgpLHU9ci8zPm4/W1wiYlwiLFwiaVwiLFwiYVwiXTpuPnItci8zP1tcImFcIixcImlcIixcImJcIl06bj5yLzI/W1wiaVwiLFwiYVwiLFwiYlwiXTpbXCJpXCIsXCJiXCIsXCJhXCJdLGEuZWFjaCh1LGZ1bmN0aW9uKGIsZSl7c3dpdGNoKGUpe2Nhc2VcImJcIjpwPW0ubGVmdC02LHE9bS50b3Ascz1rLmdldF9wYXJlbnQobCksdD1sLnBhcmVudCgpLmluZGV4KCksRj1cImpzdHJlZS1iZWxvd1wiO2JyZWFrO2Nhc2VcImlcIjpCPWsuc2V0dGluZ3MuZG5kLmluc2lkZV9wb3MsQz1rLmdldF9ub2RlKGwucGFyZW50KCkpLHA9bS5sZWZ0LTIscT1tLnRvcCtyLzIrMSxzPUMuaWQsdD1cImZpcnN0XCI9PT1CPzA6XCJsYXN0XCI9PT1CP0MuY2hpbGRyZW4ubGVuZ3RoOk1hdGgubWluKEIsQy5jaGlsZHJlbi5sZW5ndGgpLEY9XCJqc3RyZWUtaW5zaWRlXCI7YnJlYWs7Y2FzZVwiYVwiOnA9bS5sZWZ0LTYscT1tLnRvcCtyLHM9ay5nZXRfcGFyZW50KGwpLHQ9bC5wYXJlbnQoKS5pbmRleCgpKzEsRj1cImpzdHJlZS1hYm92ZVwifWZvcih2PSEwLHc9MCx4PWkuZGF0YS5ub2Rlcy5sZW5ndGg7eD53O3crKylpZih5PWkuZGF0YS5vcmlnaW4mJihpLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5hbHdheXNfY29weXx8aS5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuY29weSYmKGkuZXZlbnQubWV0YUtleXx8aS5ldmVudC5jdHJsS2V5KSk/XCJjb3B5X25vZGVcIjpcIm1vdmVfbm9kZVwiLHo9dCxcIm1vdmVfbm9kZVwiPT09eSYmXCJhXCI9PT1lJiZpLmRhdGEub3JpZ2luJiZpLmRhdGEub3JpZ2luPT09ayYmcz09PWsuZ2V0X3BhcmVudChpLmRhdGEubm9kZXNbd10pJiYoQT1rLmdldF9ub2RlKHMpLHo+YS5pbkFycmF5KGkuZGF0YS5ub2Rlc1t3XSxBLmNoaWxkcmVuKSYmKHotPTEpKSx2PXYmJihrJiZrLnNldHRpbmdzJiZrLnNldHRpbmdzLmRuZCYmay5zZXR0aW5ncy5kbmQuY2hlY2tfd2hpbGVfZHJhZ2dpbmc9PT0hMXx8ay5jaGVjayh5LGkuZGF0YS5vcmlnaW4mJmkuZGF0YS5vcmlnaW4hPT1rP2kuZGF0YS5vcmlnaW4uZ2V0X25vZGUoaS5kYXRhLm5vZGVzW3ddKTppLmRhdGEubm9kZXNbd10scyx6LHtkbmQ6ITAscmVmOmsuZ2V0X25vZGUobC5wYXJlbnQoKSkscG9zOmUsb3JpZ2luOmkuZGF0YS5vcmlnaW4saXNfbXVsdGk6aS5kYXRhLm9yaWdpbiYmaS5kYXRhLm9yaWdpbiE9PWssaXNfZm9yZWlnbjohaS5kYXRhLm9yaWdpbn0pKSwhdil7ayYmay5sYXN0X2Vycm9yJiYoZD1rLmxhc3RfZXJyb3IoKSk7YnJlYWt9cmV0dXJuXCJpXCI9PT1lJiZsLnBhcmVudCgpLmlzKFwiLmpzdHJlZS1jbG9zZWRcIikmJmsuc2V0dGluZ3MuZG5kLm9wZW5fdGltZW91dCYmKCFpLmV2ZW50fHxcImRyYWdvdmVyXCIhPT1pLmV2ZW50LnR5cGV8fGopJiYoZiYmY2xlYXJUaW1lb3V0KGYpLGY9c2V0VGltZW91dChmdW5jdGlvbihhLGIpe3JldHVybiBmdW5jdGlvbigpe2Eub3Blbl9ub2RlKGIpfX0oayxsKSxrLnNldHRpbmdzLmRuZC5vcGVuX3RpbWVvdXQpKSx2PyhFPWsuZ2V0X25vZGUocywhMCksRS5oYXNDbGFzcyhcIi5qc3RyZWUtZG5kLXBhcmVudFwiKXx8KGEoXCIuanN0cmVlLWRuZC1wYXJlbnRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtZG5kLXBhcmVudFwiKSxFLmFkZENsYXNzKFwianN0cmVlLWRuZC1wYXJlbnRcIikpLGM9e2luczprLHBhcjpzLHBvczpcImlcIiE9PWV8fFwibGFzdFwiIT09Qnx8MCE9PXR8fGsuaXNfbG9hZGVkKEMpP3Q6XCJsYXN0XCJ9LGcuY3NzKHtsZWZ0OnArXCJweFwiLHRvcDpxK1wicHhcIn0pLnNob3coKSxnLnJlbW92ZUNsYXNzKFwianN0cmVlLWFib3ZlIGpzdHJlZS1pbnNpZGUganN0cmVlLWJlbG93XCIpLmFkZENsYXNzKEYpLGkuaGVscGVyLmZpbmQoXCIuanN0cmVlLWljb25cIikuZmlyc3QoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1lclwiKS5hZGRDbGFzcyhcImpzdHJlZS1va1wiKSxpLmV2ZW50Lm9yaWdpbmFsRXZlbnQmJmkuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXImJihpLmV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmRyb3BFZmZlY3Q9RD9cImNvcHlcIjpcIm1vdmVcIiksZD17fSx1PSEwLCExKTp2b2lkIDB9KSx1PT09ITApKXJldHVybn1lbHNle2Zvcih2PSEwLHc9MCx4PWkuZGF0YS5ub2Rlcy5sZW5ndGg7eD53O3crKylpZih2PXYmJmsuY2hlY2soaS5kYXRhLm9yaWdpbiYmKGkuZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5fHxpLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5JiYoaS5ldmVudC5tZXRhS2V5fHxpLmV2ZW50LmN0cmxLZXkpKT9cImNvcHlfbm9kZVwiOlwibW92ZV9ub2RlXCIsaS5kYXRhLm9yaWdpbiYmaS5kYXRhLm9yaWdpbiE9PWs/aS5kYXRhLm9yaWdpbi5nZXRfbm9kZShpLmRhdGEubm9kZXNbd10pOmkuZGF0YS5ub2Rlc1t3XSxhLmpzdHJlZS5yb290LFwibGFzdFwiLHtkbmQ6ITAscmVmOmsuZ2V0X25vZGUoYS5qc3RyZWUucm9vdCkscG9zOlwiaVwiLG9yaWdpbjppLmRhdGEub3JpZ2luLGlzX211bHRpOmkuZGF0YS5vcmlnaW4mJmkuZGF0YS5vcmlnaW4hPT1rLGlzX2ZvcmVpZ246IWkuZGF0YS5vcmlnaW59KSwhdilicmVhaztpZih2KXJldHVybiBjPXtpbnM6ayxwYXI6YS5qc3RyZWUucm9vdCxwb3M6XCJsYXN0XCJ9LGcuaGlkZSgpLGkuaGVscGVyLmZpbmQoXCIuanN0cmVlLWljb25cIikuZmlyc3QoKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1lclwiKS5hZGRDbGFzcyhcImpzdHJlZS1va1wiKSx2b2lkKGkuZXZlbnQub3JpZ2luYWxFdmVudCYmaS5ldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2ZlciYmKGkuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdD1EP1wiY29weVwiOlwibW92ZVwiKSl9YShcIi5qc3RyZWUtZG5kLXBhcmVudFwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1kbmQtcGFyZW50XCIpLGM9ITEsaS5oZWxwZXIuZmluZChcIi5qc3RyZWUtaWNvblwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1va1wiKS5hZGRDbGFzcyhcImpzdHJlZS1lclwiKSxpLmV2ZW50Lm9yaWdpbmFsRXZlbnQmJmkuZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIsZy5oaWRlKCl9fSkub24oXCJkbmRfc2Nyb2xsLnZha2F0YS5qc3RyZWVcIixmdW5jdGlvbihhLGIpe2ImJmIuZGF0YSYmYi5kYXRhLmpzdHJlZSYmKGcuaGlkZSgpLGM9ITEsZT0hMSxiLmhlbHBlci5maW5kKFwiLmpzdHJlZS1pY29uXCIpLmZpcnN0KCkucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtb2tcIikuYWRkQ2xhc3MoXCJqc3RyZWUtZXJcIikpfSkub24oXCJkbmRfc3RvcC52YWthdGEuanN0cmVlXCIsZnVuY3Rpb24oYixoKXtpZihhKFwiLmpzdHJlZS1kbmQtcGFyZW50XCIpLnJlbW92ZUNsYXNzKFwianN0cmVlLWRuZC1wYXJlbnRcIiksZiYmY2xlYXJUaW1lb3V0KGYpLGgmJmguZGF0YSYmaC5kYXRhLmpzdHJlZSl7Zy5oaWRlKCkuZGV0YWNoKCk7dmFyIGksaixrPVtdO2lmKGMpe2ZvcihpPTAsaj1oLmRhdGEubm9kZXMubGVuZ3RoO2o+aTtpKyspa1tpXT1oLmRhdGEub3JpZ2luP2guZGF0YS5vcmlnaW4uZ2V0X25vZGUoaC5kYXRhLm5vZGVzW2ldKTpoLmRhdGEubm9kZXNbaV07Yy5pbnNbaC5kYXRhLm9yaWdpbiYmKGguZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmFsd2F5c19jb3B5fHxoLmRhdGEub3JpZ2luLnNldHRpbmdzLmRuZC5jb3B5JiYoaC5ldmVudC5tZXRhS2V5fHxoLmV2ZW50LmN0cmxLZXkpKT9cImNvcHlfbm9kZVwiOlwibW92ZV9ub2RlXCJdKGssYy5wYXIsYy5wb3MsITEsITEsITEsaC5kYXRhLm9yaWdpbil9ZWxzZSBpPWEoaC5ldmVudC50YXJnZXQpLmNsb3Nlc3QoXCIuanN0cmVlXCIpLGkubGVuZ3RoJiZkJiZkLmVycm9yJiZcImNoZWNrXCI9PT1kLmVycm9yJiYoaT1pLmpzdHJlZSghMCksaSYmaS5zZXR0aW5ncy5jb3JlLmVycm9yLmNhbGwodGhpcyxkKSk7ZT0hMSxjPSExfX0pLm9uKFwia2V5dXAuanN0cmVlIGtleWRvd24uanN0cmVlXCIsZnVuY3Rpb24oYixoKXtoPWEudmFrYXRhLmRuZC5fZ2V0KCksaCYmaC5kYXRhJiZoLmRhdGEuanN0cmVlJiYoXCJrZXl1cFwiPT09Yi50eXBlJiYyNz09PWIud2hpY2g/KGYmJmNsZWFyVGltZW91dChmKSxjPSExLGQ9ITEsZT0hMSxmPSExLGcuaGlkZSgpLmRldGFjaCgpLGEudmFrYXRhLmRuZC5fY2xlYW4oKSk6KGguaGVscGVyLmZpbmQoXCIuanN0cmVlLWNvcHlcIikuZmlyc3QoKVtoLmRhdGEub3JpZ2luJiYoaC5kYXRhLm9yaWdpbi5zZXR0aW5ncy5kbmQuYWx3YXlzX2NvcHl8fGguZGF0YS5vcmlnaW4uc2V0dGluZ3MuZG5kLmNvcHkmJihiLm1ldGFLZXl8fGIuY3RybEtleSkpP1wic2hvd1wiOlwiaGlkZVwiXSgpLGUmJihlLm1ldGFLZXk9Yi5tZXRhS2V5LGUuY3RybEtleT1iLmN0cmxLZXksYS52YWthdGEuZG5kLl90cmlnZ2VyKFwibW92ZVwiLGUpKSkpfSl9KSxmdW5jdGlvbihhKXthLnZha2F0YS5odG1sPXtkaXY6YShcIjxkaXY+PC9kaXY+XCIpLGVzY2FwZTpmdW5jdGlvbihiKXtyZXR1cm4gYS52YWthdGEuaHRtbC5kaXYudGV4dChiKS5odG1sKCl9LHN0cmlwOmZ1bmN0aW9uKGIpe3JldHVybiBhLnZha2F0YS5odG1sLmRpdi5lbXB0eSgpLmFwcGVuZChhLnBhcnNlSFRNTChiKSkudGV4dCgpfX07dmFyIGM9e2VsZW1lbnQ6ITEsdGFyZ2V0OiExLGlzX2Rvd246ITEsaXNfZHJhZzohMSxoZWxwZXI6ITEsaGVscGVyX3c6MCxkYXRhOiExLGluaXRfeDowLGluaXRfeTowLHNjcm9sbF9sOjAsc2Nyb2xsX3Q6MCxzY3JvbGxfZTohMSxzY3JvbGxfaTohMSxpc190b3VjaDohMX07YS52YWthdGEuZG5kPXtzZXR0aW5nczp7c2Nyb2xsX3NwZWVkOjEwLHNjcm9sbF9wcm94aW1pdHk6MjAsaGVscGVyX2xlZnQ6NSxoZWxwZXJfdG9wOjEwLHRocmVzaG9sZDo1LHRocmVzaG9sZF90b3VjaDoxMH0sX3RyaWdnZXI6ZnVuY3Rpb24oYyxkLGUpe2U9PT1iJiYoZT1hLnZha2F0YS5kbmQuX2dldCgpKSxlLmV2ZW50PWQsYShpKS50cmlnZ2VySGFuZGxlcihcImRuZF9cIitjK1wiLnZha2F0YVwiLGUpfSxfZ2V0OmZ1bmN0aW9uKCl7cmV0dXJue2RhdGE6Yy5kYXRhLGVsZW1lbnQ6Yy5lbGVtZW50LGhlbHBlcjpjLmhlbHBlcn19LF9jbGVhbjpmdW5jdGlvbigpe2MuaGVscGVyJiZjLmhlbHBlci5yZW1vdmUoKSxjLnNjcm9sbF9pJiYoY2xlYXJJbnRlcnZhbChjLnNjcm9sbF9pKSxjLnNjcm9sbF9pPSExKSxjPXtlbGVtZW50OiExLHRhcmdldDohMSxpc19kb3duOiExLGlzX2RyYWc6ITEsaGVscGVyOiExLGhlbHBlcl93OjAsZGF0YTohMSxpbml0X3g6MCxpbml0X3k6MCxzY3JvbGxfbDowLHNjcm9sbF90OjAsc2Nyb2xsX2U6ITEsc2Nyb2xsX2k6ITEsaXNfdG91Y2g6ITF9LG49bnVsbCxhKGkpLm9mZihcIm1vdXNlbW92ZS52YWthdGEuanN0cmVlIHRvdWNobW92ZS52YWthdGEuanN0cmVlXCIsYS52YWthdGEuZG5kLmRyYWcpLGEoaSkub2ZmKFwibW91c2V1cC52YWthdGEuanN0cmVlIHRvdWNoZW5kLnZha2F0YS5qc3RyZWVcIixhLnZha2F0YS5kbmQuc3RvcCl9LF9zY3JvbGw6ZnVuY3Rpb24oYil7aWYoIWMuc2Nyb2xsX2V8fCFjLnNjcm9sbF9sJiYhYy5zY3JvbGxfdClyZXR1cm4gYy5zY3JvbGxfaSYmKGNsZWFySW50ZXJ2YWwoYy5zY3JvbGxfaSksYy5zY3JvbGxfaT0hMSksITE7aWYoIWMuc2Nyb2xsX2kpcmV0dXJuIGMuc2Nyb2xsX2k9c2V0SW50ZXJ2YWwoYS52YWthdGEuZG5kLl9zY3JvbGwsMTAwKSwhMTtpZihiPT09ITApcmV0dXJuITE7dmFyIGQ9Yy5zY3JvbGxfZS5zY3JvbGxUb3AoKSxlPWMuc2Nyb2xsX2Uuc2Nyb2xsTGVmdCgpO2Muc2Nyb2xsX2Uuc2Nyb2xsVG9wKGQrYy5zY3JvbGxfdCphLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3NwZWVkKSxjLnNjcm9sbF9lLnNjcm9sbExlZnQoZStjLnNjcm9sbF9sKmEudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfc3BlZWQpLChkIT09Yy5zY3JvbGxfZS5zY3JvbGxUb3AoKXx8ZSE9PWMuc2Nyb2xsX2Uuc2Nyb2xsTGVmdCgpKSYmYS52YWthdGEuZG5kLl90cmlnZ2VyKFwic2Nyb2xsXCIsYy5zY3JvbGxfZSl9LHN0YXJ0OmZ1bmN0aW9uKGIsZCxlKXtcInRvdWNoc3RhcnRcIj09PWIudHlwZSYmYi5vcmlnaW5hbEV2ZW50JiZiLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMmJmIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSYmKGIucGFnZVg9Yi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLGIucGFnZVk9Yi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZLGIudGFyZ2V0PWkuZWxlbWVudEZyb21Qb2ludChiLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgtd2luZG93LnBhZ2VYT2Zmc2V0LGIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpKSxjLmlzX2RyYWcmJmEudmFrYXRhLmRuZC5zdG9wKHt9KTt0cnl7Yi5jdXJyZW50VGFyZ2V0LnVuc2VsZWN0YWJsZT1cIm9uXCIsYi5jdXJyZW50VGFyZ2V0Lm9uc2VsZWN0c3RhcnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sYi5jdXJyZW50VGFyZ2V0LnN0eWxlJiYoYi5jdXJyZW50VGFyZ2V0LnN0eWxlLnRvdWNoQWN0aW9uPVwibm9uZVwiLGIuY3VycmVudFRhcmdldC5zdHlsZS5tc1RvdWNoQWN0aW9uPVwibm9uZVwiLGIuY3VycmVudFRhcmdldC5zdHlsZS5Nb3pVc2VyU2VsZWN0PVwibm9uZVwiKX1jYXRjaChmKXt9cmV0dXJuIGMuaW5pdF94PWIucGFnZVgsYy5pbml0X3k9Yi5wYWdlWSxjLmRhdGE9ZCxjLmlzX2Rvd249ITAsYy5lbGVtZW50PWIuY3VycmVudFRhcmdldCxjLnRhcmdldD1iLnRhcmdldCxjLmlzX3RvdWNoPVwidG91Y2hzdGFydFwiPT09Yi50eXBlLGUhPT0hMSYmKGMuaGVscGVyPWEoXCI8ZGl2IGlkPSd2YWthdGEtZG5kJz48L2Rpdj5cIikuaHRtbChlKS5jc3Moe2Rpc3BsYXk6XCJibG9ja1wiLG1hcmdpbjpcIjBcIixwYWRkaW5nOlwiMFwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6XCItMjAwMHB4XCIsbGluZUhlaWdodDpcIjE2cHhcIix6SW5kZXg6XCIxMDAwMFwifSkpLGEoaSkub24oXCJtb3VzZW1vdmUudmFrYXRhLmpzdHJlZSB0b3VjaG1vdmUudmFrYXRhLmpzdHJlZVwiLGEudmFrYXRhLmRuZC5kcmFnKSxhKGkpLm9uKFwibW91c2V1cC52YWthdGEuanN0cmVlIHRvdWNoZW5kLnZha2F0YS5qc3RyZWVcIixhLnZha2F0YS5kbmQuc3RvcCksITF9LGRyYWc6ZnVuY3Rpb24oYil7aWYoXCJ0b3VjaG1vdmVcIj09PWIudHlwZSYmYi5vcmlnaW5hbEV2ZW50JiZiLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXMmJmIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXSYmKGIucGFnZVg9Yi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLGIucGFnZVk9Yi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZLGIudGFyZ2V0PWkuZWxlbWVudEZyb21Qb2ludChiLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVgtd2luZG93LnBhZ2VYT2Zmc2V0LGIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWS13aW5kb3cucGFnZVlPZmZzZXQpKSxjLmlzX2Rvd24pe2lmKCFjLmlzX2RyYWcpe2lmKCEoTWF0aC5hYnMoYi5wYWdlWC1jLmluaXRfeCk+KGMuaXNfdG91Y2g/YS52YWthdGEuZG5kLnNldHRpbmdzLnRocmVzaG9sZF90b3VjaDphLnZha2F0YS5kbmQuc2V0dGluZ3MudGhyZXNob2xkKXx8TWF0aC5hYnMoYi5wYWdlWS1jLmluaXRfeSk+KGMuaXNfdG91Y2g/YS52YWthdGEuZG5kLnNldHRpbmdzLnRocmVzaG9sZF90b3VjaDphLnZha2F0YS5kbmQuc2V0dGluZ3MudGhyZXNob2xkKSkpcmV0dXJuO2MuaGVscGVyJiYoYy5oZWxwZXIuYXBwZW5kVG8oaS5ib2R5KSxjLmhlbHBlcl93PWMuaGVscGVyLm91dGVyV2lkdGgoKSksYy5pc19kcmFnPSEwLGEoYy50YXJnZXQpLm9uZShcImNsaWNrLnZha2F0YVwiLCExKSxhLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzdGFydFwiLGIpfXZhciBkPSExLGU9ITEsZj0hMSxnPSExLGg9ITEsaj0hMSxrPSExLGw9ITEsbT0hMSxuPSExO3JldHVybiBjLnNjcm9sbF90PTAsYy5zY3JvbGxfbD0wLGMuc2Nyb2xsX2U9ITEsYShhKGIudGFyZ2V0KS5wYXJlbnRzVW50aWwoXCJib2R5XCIpLmFkZEJhY2soKS5nZXQoKS5yZXZlcnNlKCkpLmZpbHRlcihmdW5jdGlvbigpe3JldHVybi9eYXV0b3xzY3JvbGwkLy50ZXN0KGEodGhpcykuY3NzKFwib3ZlcmZsb3dcIikpJiYodGhpcy5zY3JvbGxIZWlnaHQ+dGhpcy5vZmZzZXRIZWlnaHR8fHRoaXMuc2Nyb2xsV2lkdGg+dGhpcy5vZmZzZXRXaWR0aCl9KS5lYWNoKGZ1bmN0aW9uKCl7dmFyIGQ9YSh0aGlzKSxlPWQub2Zmc2V0KCk7cmV0dXJuIHRoaXMuc2Nyb2xsSGVpZ2h0PnRoaXMub2Zmc2V0SGVpZ2h0JiYoZS50b3ArZC5oZWlnaHQoKS1iLnBhZ2VZPGEudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYoYy5zY3JvbGxfdD0xKSxiLnBhZ2VZLWUudG9wPGEudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYoYy5zY3JvbGxfdD0tMSkpLHRoaXMuc2Nyb2xsV2lkdGg+dGhpcy5vZmZzZXRXaWR0aCYmKGUubGVmdCtkLndpZHRoKCktYi5wYWdlWDxhLnZha2F0YS5kbmQuc2V0dGluZ3Muc2Nyb2xsX3Byb3hpbWl0eSYmKGMuc2Nyb2xsX2w9MSksYi5wYWdlWC1lLmxlZnQ8YS52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihjLnNjcm9sbF9sPS0xKSksYy5zY3JvbGxfdHx8Yy5zY3JvbGxfbD8oYy5zY3JvbGxfZT1hKHRoaXMpLCExKTp2b2lkIDB9KSxjLnNjcm9sbF9lfHwoZD1hKGkpLGU9YSh3aW5kb3cpLGY9ZC5oZWlnaHQoKSxnPWUuaGVpZ2h0KCksaD1kLndpZHRoKCksaj1lLndpZHRoKCksaz1kLnNjcm9sbFRvcCgpLGw9ZC5zY3JvbGxMZWZ0KCksZj5nJiZiLnBhZ2VZLWs8YS52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihjLnNjcm9sbF90PS0xKSxmPmcmJmctKGIucGFnZVktayk8YS52YWthdGEuZG5kLnNldHRpbmdzLnNjcm9sbF9wcm94aW1pdHkmJihjLnNjcm9sbF90PTEpLGg+aiYmYi5wYWdlWC1sPGEudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYoYy5zY3JvbGxfbD0tMSksaD5qJiZqLShiLnBhZ2VYLWwpPGEudmFrYXRhLmRuZC5zZXR0aW5ncy5zY3JvbGxfcHJveGltaXR5JiYoYy5zY3JvbGxfbD0xKSwoYy5zY3JvbGxfdHx8Yy5zY3JvbGxfbCkmJihjLnNjcm9sbF9lPWQpKSxjLnNjcm9sbF9lJiZhLnZha2F0YS5kbmQuX3Njcm9sbCghMCksYy5oZWxwZXImJihtPXBhcnNlSW50KGIucGFnZVkrYS52YWthdGEuZG5kLnNldHRpbmdzLmhlbHBlcl90b3AsMTApLG49cGFyc2VJbnQoYi5wYWdlWCthLnZha2F0YS5kbmQuc2V0dGluZ3MuaGVscGVyX2xlZnQsMTApLGYmJm0rMjU+ZiYmKG09Zi01MCksaCYmbitjLmhlbHBlcl93PmgmJihuPWgtKGMuaGVscGVyX3crMikpLGMuaGVscGVyLmNzcyh7bGVmdDpuK1wicHhcIix0b3A6bStcInB4XCJ9KSksYS52YWthdGEuZG5kLl90cmlnZ2VyKFwibW92ZVwiLGIpLCExfX0sc3RvcDpmdW5jdGlvbihiKXtpZihcInRvdWNoZW5kXCI9PT1iLnR5cGUmJmIub3JpZ2luYWxFdmVudCYmYi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzJiZiLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0mJihiLnBhZ2VYPWIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCxiLnBhZ2VZPWIub3JpZ2luYWxFdmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWSxiLnRhcmdldD1pLmVsZW1lbnRGcm9tUG9pbnQoYi5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VYLXdpbmRvdy5wYWdlWE9mZnNldCxiLm9yaWdpbmFsRXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVktd2luZG93LnBhZ2VZT2Zmc2V0KSksYy5pc19kcmFnKWIudGFyZ2V0IT09Yy50YXJnZXQmJmEoYy50YXJnZXQpLm9mZihcImNsaWNrLnZha2F0YVwiKSxhLnZha2F0YS5kbmQuX3RyaWdnZXIoXCJzdG9wXCIsYik7ZWxzZSBpZihcInRvdWNoZW5kXCI9PT1iLnR5cGUmJmIudGFyZ2V0PT09Yy50YXJnZXQpe3ZhciBkPXNldFRpbWVvdXQoZnVuY3Rpb24oKXthKGIudGFyZ2V0KS50cmlnZ2VyKFwiY2xpY2tcIil9LDEwMCk7YShiLnRhcmdldCkub25lKFwiY2xpY2tcIixmdW5jdGlvbigpe2QmJmNsZWFyVGltZW91dChkKX0pfXJldHVybiBhLnZha2F0YS5kbmQuX2NsZWFuKCksITF9fX0oYSksYS5qc3RyZWUuZGVmYXVsdHMubWFzc2xvYWQ9bnVsbCxhLmpzdHJlZS5wbHVnaW5zLm1hc3Nsb2FkPWZ1bmN0aW9uKGIsYyl7dGhpcy5pbml0PWZ1bmN0aW9uKGEsYil7dGhpcy5fZGF0YS5tYXNzbG9hZD17fSxjLmluaXQuY2FsbCh0aGlzLGEsYil9LHRoaXMuX2xvYWRfbm9kZXM9ZnVuY3Rpb24oYixkLGUsZil7dmFyIGc9dGhpcy5zZXR0aW5ncy5tYXNzbG9hZCxoPVtdLGk9dGhpcy5fbW9kZWwuZGF0YSxqLGssbDtpZighZSl7Zm9yKGo9MCxrPWIubGVuZ3RoO2s+ajtqKyspKCFpW2Jbal1dfHwhaVtiW2pdXS5zdGF0ZS5sb2FkZWQmJiFpW2Jbal1dLnN0YXRlLmZhaWxlZHx8ZikmJihoLnB1c2goYltqXSksbD10aGlzLmdldF9ub2RlKGJbal0sITApLGwmJmwubGVuZ3RoJiZsLmFkZENsYXNzKFwianN0cmVlLWxvYWRpbmdcIikuYXR0cihcImFyaWEtYnVzeVwiLCEwKSk7aWYodGhpcy5fZGF0YS5tYXNzbG9hZD17fSxoLmxlbmd0aCl7aWYoYS52YWthdGEuaXNfZnVuY3Rpb24oZykpcmV0dXJuIGcuY2FsbCh0aGlzLGgsZnVuY3Rpb24oYSl7dmFyIGcsaDtpZihhKWZvcihnIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShnKSYmKHRoaXMuX2RhdGEubWFzc2xvYWRbZ109YVtnXSk7Zm9yKGc9MCxoPWIubGVuZ3RoO2g+ZztnKyspbD10aGlzLmdldF9ub2RlKGJbZ10sITApLGwmJmwubGVuZ3RoJiZsLnJlbW92ZUNsYXNzKFwianN0cmVlLWxvYWRpbmdcIikuYXR0cihcImFyaWEtYnVzeVwiLCExKTtjLl9sb2FkX25vZGVzLmNhbGwodGhpcyxiLGQsZSxmKX0uYmluZCh0aGlzKSk7aWYoXCJvYmplY3RcIj09dHlwZW9mIGcmJmcmJmcudXJsKXJldHVybiBnPWEuZXh0ZW5kKCEwLHt9LGcpLGEudmFrYXRhLmlzX2Z1bmN0aW9uKGcudXJsKSYmKGcudXJsPWcudXJsLmNhbGwodGhpcyxoKSksYS52YWthdGEuaXNfZnVuY3Rpb24oZy5kYXRhKSYmKGcuZGF0YT1nLmRhdGEuY2FsbCh0aGlzLGgpKSxhLmFqYXgoZykuZG9uZShmdW5jdGlvbihhLGcsaCl7dmFyIGksajtpZihhKWZvcihpIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShpKSYmKHRoaXMuX2RhdGEubWFzc2xvYWRbaV09YVtpXSk7Zm9yKGk9MCxqPWIubGVuZ3RoO2o+aTtpKyspbD10aGlzLmdldF9ub2RlKGJbaV0sITApLGwmJmwubGVuZ3RoJiZsLnJlbW92ZUNsYXNzKFwianN0cmVlLWxvYWRpbmdcIikuYXR0cihcImFyaWEtYnVzeVwiLCExKTtjLl9sb2FkX25vZGVzLmNhbGwodGhpcyxiLGQsZSxmKX0uYmluZCh0aGlzKSkuZmFpbChmdW5jdGlvbihhKXtjLl9sb2FkX25vZGVzLmNhbGwodGhpcyxiLGQsZSxmKX0uYmluZCh0aGlzKSl9fXJldHVybiBjLl9sb2FkX25vZGVzLmNhbGwodGhpcyxiLGQsZSxmKX0sdGhpcy5fbG9hZF9ub2RlPWZ1bmN0aW9uKGIsZCl7dmFyIGU9dGhpcy5fZGF0YS5tYXNzbG9hZFtiLmlkXSxmPW51bGwsZztyZXR1cm4gZT8oZj10aGlzW1wic3RyaW5nXCI9PXR5cGVvZiBlP1wiX2FwcGVuZF9odG1sX2RhdGFcIjpcIl9hcHBlbmRfanNvbl9kYXRhXCJdKGIsXCJzdHJpbmdcIj09dHlwZW9mIGU/YShhLnBhcnNlSFRNTChlKSkuZmlsdGVyKGZ1bmN0aW9uKCl7cmV0dXJuIDMhPT10aGlzLm5vZGVUeXBlfSk6ZSxmdW5jdGlvbihhKXtkLmNhbGwodGhpcyxhKX0pLGc9dGhpcy5nZXRfbm9kZShiLmlkLCEwKSxnJiZnLmxlbmd0aCYmZy5yZW1vdmVDbGFzcyhcImpzdHJlZS1sb2FkaW5nXCIpLmF0dHIoXCJhcmlhLWJ1c3lcIiwhMSksZGVsZXRlIHRoaXMuX2RhdGEubWFzc2xvYWRbYi5pZF0sZik6Yy5fbG9hZF9ub2RlLmNhbGwodGhpcyxiLGQpfX0sYS5qc3RyZWUuZGVmYXVsdHMuc2VhcmNoPXthamF4OiExLGZ1enp5OiExLGNhc2Vfc2Vuc2l0aXZlOiExLHNob3dfb25seV9tYXRjaGVzOiExLHNob3dfb25seV9tYXRjaGVzX2NoaWxkcmVuOiExLGNsb3NlX29wZW5lZF9vbmNsZWFyOiEwLHNlYXJjaF9sZWF2ZXNfb25seTohMSxzZWFyY2hfY2FsbGJhY2s6ITF9LGEuanN0cmVlLnBsdWdpbnMuc2VhcmNoPWZ1bmN0aW9uKGMsZCl7dGhpcy5iaW5kPWZ1bmN0aW9uKCl7ZC5iaW5kLmNhbGwodGhpcyksdGhpcy5fZGF0YS5zZWFyY2guc3RyPVwiXCIsdGhpcy5fZGF0YS5zZWFyY2guZG9tPWEoKSx0aGlzLl9kYXRhLnNlYXJjaC5yZXM9W10sdGhpcy5fZGF0YS5zZWFyY2gub3BuPVtdLHRoaXMuX2RhdGEuc2VhcmNoLnNvbT0hMSx0aGlzLl9kYXRhLnNlYXJjaC5zbWM9ITEsdGhpcy5fZGF0YS5zZWFyY2guaGRuPVtdLHRoaXMuZWxlbWVudC5vbihcInNlYXJjaC5qc3RyZWVcIixmdW5jdGlvbihiLGMpe2lmKHRoaXMuX2RhdGEuc2VhcmNoLnNvbSYmYy5yZXMubGVuZ3RoKXt2YXIgZD10aGlzLl9tb2RlbC5kYXRhLGUsZixnPVtdLGgsaTtmb3IoZT0wLGY9Yy5yZXMubGVuZ3RoO2Y+ZTtlKyspaWYoZFtjLnJlc1tlXV0mJiFkW2MucmVzW2VdXS5zdGF0ZS5oaWRkZW4mJihnLnB1c2goYy5yZXNbZV0pLGc9Zy5jb25jYXQoZFtjLnJlc1tlXV0ucGFyZW50cyksdGhpcy5fZGF0YS5zZWFyY2guc21jKSlmb3IoaD0wLGk9ZFtjLnJlc1tlXV0uY2hpbGRyZW5fZC5sZW5ndGg7aT5oO2grKylkW2RbYy5yZXNbZV1dLmNoaWxkcmVuX2RbaF1dJiYhZFtkW2MucmVzW2VdXS5jaGlsZHJlbl9kW2hdXS5zdGF0ZS5oaWRkZW4mJmcucHVzaChkW2MucmVzW2VdXS5jaGlsZHJlbl9kW2hdKTtnPWEudmFrYXRhLmFycmF5X3JlbW92ZV9pdGVtKGEudmFrYXRhLmFycmF5X3VuaXF1ZShnKSxhLmpzdHJlZS5yb290KSx0aGlzLl9kYXRhLnNlYXJjaC5oZG49dGhpcy5oaWRlX2FsbCghMCksdGhpcy5zaG93X25vZGUoZywhMCksdGhpcy5yZWRyYXcoITApfX0uYmluZCh0aGlzKSkub24oXCJjbGVhcl9zZWFyY2guanN0cmVlXCIsZnVuY3Rpb24oYSxiKXt0aGlzLl9kYXRhLnNlYXJjaC5zb20mJmIucmVzLmxlbmd0aCYmKHRoaXMuc2hvd19ub2RlKHRoaXMuX2RhdGEuc2VhcmNoLmhkbiwhMCksdGhpcy5yZWRyYXcoITApKX0uYmluZCh0aGlzKSl9LHRoaXMuc2VhcmNoPWZ1bmN0aW9uKGMsZCxlLGYsZyxoKXtpZihjPT09ITF8fFwiXCI9PT1hLnZha2F0YS50cmltKGMudG9TdHJpbmcoKSkpcmV0dXJuIHRoaXMuY2xlYXJfc2VhcmNoKCk7Zj10aGlzLmdldF9ub2RlKGYpLGY9ZiYmZi5pZD9mLmlkOm51bGwsYz1jLnRvU3RyaW5nKCk7dmFyIGk9dGhpcy5zZXR0aW5ncy5zZWFyY2gsaj1pLmFqYXg/aS5hamF4OiExLGs9dGhpcy5fbW9kZWwuZGF0YSxsPW51bGwsbT1bXSxuPVtdLG8scDtpZih0aGlzLl9kYXRhLnNlYXJjaC5yZXMubGVuZ3RoJiYhZyYmdGhpcy5jbGVhcl9zZWFyY2goKSxlPT09YiYmKGU9aS5zaG93X29ubHlfbWF0Y2hlcyksaD09PWImJihoPWkuc2hvd19vbmx5X21hdGNoZXNfY2hpbGRyZW4pLCFkJiZqIT09ITEpcmV0dXJuIGEudmFrYXRhLmlzX2Z1bmN0aW9uKGopP2ouY2FsbCh0aGlzLGMsZnVuY3Rpb24oYil7YiYmYi5kJiYoYj1iLmQpLHRoaXMuX2xvYWRfbm9kZXMoYS52YWthdGEuaXNfYXJyYXkoYik/YS52YWthdGEuYXJyYXlfdW5pcXVlKGIpOltdLGZ1bmN0aW9uKCl7dGhpcy5zZWFyY2goYywhMCxlLGYsZyxoKX0pfS5iaW5kKHRoaXMpLGYpOihqPWEuZXh0ZW5kKHt9LGopLGouZGF0YXx8KGouZGF0YT17fSksai5kYXRhLnN0cj1jLGYmJihqLmRhdGEuaW5zaWRlPWYpLHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0JiZ0aGlzLl9kYXRhLnNlYXJjaC5sYXN0UmVxdWVzdC5hYm9ydCgpLHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0PWEuYWpheChqKS5mYWlsKGZ1bmN0aW9uKCl7dGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiYWpheFwiLHBsdWdpbjpcInNlYXJjaFwiLGlkOlwic2VhcmNoXzAxXCIscmVhc29uOlwiQ291bGQgbm90IGxvYWQgc2VhcmNoIHBhcmVudHNcIixkYXRhOkpTT04uc3RyaW5naWZ5KGopfSx0aGlzLnNldHRpbmdzLmNvcmUuZXJyb3IuY2FsbCh0aGlzLHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yKX0uYmluZCh0aGlzKSkuZG9uZShmdW5jdGlvbihiKXtiJiZiLmQmJihiPWIuZCksdGhpcy5fbG9hZF9ub2RlcyhhLnZha2F0YS5pc19hcnJheShiKT9hLnZha2F0YS5hcnJheV91bmlxdWUoYik6W10sZnVuY3Rpb24oKXt0aGlzLnNlYXJjaChjLCEwLGUsZixnLGgpfSl9LmJpbmQodGhpcykpLHRoaXMuX2RhdGEuc2VhcmNoLmxhc3RSZXF1ZXN0KTtpZihnfHwodGhpcy5fZGF0YS5zZWFyY2guc3RyPWMsdGhpcy5fZGF0YS5zZWFyY2guZG9tPWEoKSx0aGlzLl9kYXRhLnNlYXJjaC5yZXM9W10sdGhpcy5fZGF0YS5zZWFyY2gub3BuPVtdLHRoaXMuX2RhdGEuc2VhcmNoLnNvbT1lLHRoaXMuX2RhdGEuc2VhcmNoLnNtYz1oKSxsPW5ldyBhLnZha2F0YS5zZWFyY2goYywhMCx7Y2FzZVNlbnNpdGl2ZTppLmNhc2Vfc2Vuc2l0aXZlLGZ1enp5OmkuZnV6enl9KSxhLmVhY2goa1tmP2Y6YS5qc3RyZWUucm9vdF0uY2hpbGRyZW5fZCxmdW5jdGlvbihhLGIpe3ZhciBkPWtbYl07ZC50ZXh0JiYhZC5zdGF0ZS5oaWRkZW4mJighaS5zZWFyY2hfbGVhdmVzX29ubHl8fGQuc3RhdGUubG9hZGVkJiYwPT09ZC5jaGlsZHJlbi5sZW5ndGgpJiYoaS5zZWFyY2hfY2FsbGJhY2smJmkuc2VhcmNoX2NhbGxiYWNrLmNhbGwodGhpcyxjLGQpfHwhaS5zZWFyY2hfY2FsbGJhY2smJmwuc2VhcmNoKGQudGV4dCkuaXNNYXRjaCkmJihtLnB1c2goYiksbj1uLmNvbmNhdChkLnBhcmVudHMpKX0pLG0ubGVuZ3RoKXtmb3Iobj1hLnZha2F0YS5hcnJheV91bmlxdWUobiksbz0wLHA9bi5sZW5ndGg7cD5vO28rKyluW29dIT09YS5qc3RyZWUucm9vdCYma1tuW29dXSYmdGhpcy5vcGVuX25vZGUobltvXSxudWxsLDApPT09ITAmJnRoaXMuX2RhdGEuc2VhcmNoLm9wbi5wdXNoKG5bb10pO2c/KHRoaXMuX2RhdGEuc2VhcmNoLmRvbT10aGlzLl9kYXRhLnNlYXJjaC5kb20uYWRkKGEodGhpcy5lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3JBbGwoXCIjXCIrYS5tYXAobSxmdW5jdGlvbihiKXtyZXR1cm4tMSE9PVwiMDEyMzQ1Njc4OVwiLmluZGV4T2YoYlswXSk/XCJcXFxcM1wiK2JbMF0rXCIgXCIrYi5zdWJzdHIoMSkucmVwbGFjZShhLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpOmIucmVwbGFjZShhLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpfSkuam9pbihcIiwgI1wiKSkpKSx0aGlzLl9kYXRhLnNlYXJjaC5yZXM9YS52YWthdGEuYXJyYXlfdW5pcXVlKHRoaXMuX2RhdGEuc2VhcmNoLnJlcy5jb25jYXQobSkpKToodGhpcy5fZGF0YS5zZWFyY2guZG9tPWEodGhpcy5lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3JBbGwoXCIjXCIrYS5tYXAobSxmdW5jdGlvbihiKXtyZXR1cm4tMSE9PVwiMDEyMzQ1Njc4OVwiLmluZGV4T2YoYlswXSk/XCJcXFxcM1wiK2JbMF0rXCIgXCIrYi5zdWJzdHIoMSkucmVwbGFjZShhLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpOmIucmVwbGFjZShhLmpzdHJlZS5pZHJlZ2V4LFwiXFxcXCQmXCIpfSkuam9pbihcIiwgI1wiKSkpLHRoaXMuX2RhdGEuc2VhcmNoLnJlcz1tKSx0aGlzLl9kYXRhLnNlYXJjaC5kb20uY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5hZGRDbGFzcyhcImpzdHJlZS1zZWFyY2hcIil9dGhpcy50cmlnZ2VyKFwic2VhcmNoXCIse25vZGVzOnRoaXMuX2RhdGEuc2VhcmNoLmRvbSxzdHI6YyxyZXM6dGhpcy5fZGF0YS5zZWFyY2gucmVzLHNob3dfb25seV9tYXRjaGVzOmV9KX0sdGhpcy5jbGVhcl9zZWFyY2g9ZnVuY3Rpb24oKXt0aGlzLnNldHRpbmdzLnNlYXJjaC5jbG9zZV9vcGVuZWRfb25jbGVhciYmdGhpcy5jbG9zZV9ub2RlKHRoaXMuX2RhdGEuc2VhcmNoLm9wbiwwKSx0aGlzLnRyaWdnZXIoXCJjbGVhcl9zZWFyY2hcIix7bm9kZXM6dGhpcy5fZGF0YS5zZWFyY2guZG9tLHN0cjp0aGlzLl9kYXRhLnNlYXJjaC5zdHIscmVzOnRoaXMuX2RhdGEuc2VhcmNoLnJlc30pLHRoaXMuX2RhdGEuc2VhcmNoLnJlcy5sZW5ndGgmJih0aGlzLl9kYXRhLnNlYXJjaC5kb209YSh0aGlzLmVsZW1lbnRbMF0ucXVlcnlTZWxlY3RvckFsbChcIiNcIithLm1hcCh0aGlzLl9kYXRhLnNlYXJjaC5yZXMsZnVuY3Rpb24oYil7cmV0dXJuLTEhPT1cIjAxMjM0NTY3ODlcIi5pbmRleE9mKGJbMF0pP1wiXFxcXDNcIitiWzBdK1wiIFwiK2Iuc3Vic3RyKDEpLnJlcGxhY2UoYS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKTpiLnJlcGxhY2UoYS5qc3RyZWUuaWRyZWdleCxcIlxcXFwkJlwiKX0pLmpvaW4oXCIsICNcIikpKSx0aGlzLl9kYXRhLnNlYXJjaC5kb20uY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKS5yZW1vdmVDbGFzcyhcImpzdHJlZS1zZWFyY2hcIikpLHRoaXMuX2RhdGEuc2VhcmNoLnN0cj1cIlwiLHRoaXMuX2RhdGEuc2VhcmNoLnJlcz1bXSx0aGlzLl9kYXRhLnNlYXJjaC5vcG49W10sdGhpcy5fZGF0YS5zZWFyY2guZG9tPWEoKX0sdGhpcy5yZWRyYXdfbm9kZT1mdW5jdGlvbihiLGMsZSxmKXtpZihiPWQucmVkcmF3X25vZGUuYXBwbHkodGhpcyxhcmd1bWVudHMpLGImJi0xIT09YS5pbkFycmF5KGIuaWQsdGhpcy5fZGF0YS5zZWFyY2gucmVzKSl7dmFyIGcsaCxpPW51bGw7Zm9yKGc9MCxoPWIuY2hpbGROb2Rlcy5sZW5ndGg7aD5nO2crKylpZihiLmNoaWxkTm9kZXNbZ10mJmIuY2hpbGROb2Rlc1tnXS5jbGFzc05hbWUmJi0xIT09Yi5jaGlsZE5vZGVzW2ddLmNsYXNzTmFtZS5pbmRleE9mKFwianN0cmVlLWFuY2hvclwiKSl7aT1iLmNoaWxkTm9kZXNbZ107YnJlYWt9aSYmKGkuY2xhc3NOYW1lKz1cIiBqc3RyZWUtc2VhcmNoXCIpfXJldHVybiBifX0sZnVuY3Rpb24oYSl7YS52YWthdGEuc2VhcmNoPWZ1bmN0aW9uKGIsYyxkKXtkPWR8fHt9LGQ9YS5leHRlbmQoe30sYS52YWthdGEuc2VhcmNoLmRlZmF1bHRzLGQpLGQuZnV6enkhPT0hMSYmKGQuZnV6enk9ITApLGI9ZC5jYXNlU2Vuc2l0aXZlP2I6Yi50b0xvd2VyQ2FzZSgpO3ZhciBlPWQubG9jYXRpb24sZj1kLmRpc3RhbmNlLGc9ZC50aHJlc2hvbGQsaD1iLmxlbmd0aCxpLGosayxsO3JldHVybiBoPjMyJiYoZC5mdXp6eT0hMSksZC5mdXp6eSYmKGk9MTw8aC0xLGo9ZnVuY3Rpb24oKXt2YXIgYT17fSxjPTA7Zm9yKGM9MDtoPmM7YysrKWFbYi5jaGFyQXQoYyldPTA7Zm9yKGM9MDtoPmM7YysrKWFbYi5jaGFyQXQoYyldfD0xPDxoLWMtMTtyZXR1cm4gYX0oKSxrPWZ1bmN0aW9uKGEsYil7dmFyIGM9YS9oLGQ9TWF0aC5hYnMoZS1iKTtyZXR1cm4gZj9jK2QvZjpkPzE6Y30pLGw9ZnVuY3Rpb24oYSl7aWYoYT1kLmNhc2VTZW5zaXRpdmU/YTphLnRvTG93ZXJDYXNlKCksYj09PWF8fC0xIT09YS5pbmRleE9mKGIpKXJldHVybntpc01hdGNoOiEwLHNjb3JlOjB9O2lmKCFkLmZ1enp5KXJldHVybntpc01hdGNoOiExLHNjb3JlOjF9O3ZhciBjLGYsbD1hLmxlbmd0aCxtPWcsbj1hLmluZGV4T2YoYixlKSxvLHAscT1oK2wscixzLHQsdSx2LHc9MSx4PVtdO2ZvcigtMSE9PW4mJihtPU1hdGgubWluKGsoMCxuKSxtKSxuPWEubGFzdEluZGV4T2YoYixlK2gpLC0xIT09biYmKG09TWF0aC5taW4oaygwLG4pLG0pKSksbj0tMSxjPTA7aD5jO2MrKyl7bz0wLHA9cTt3aGlsZShwPm8payhjLGUrcCk8PW0/bz1wOnE9cCxwPU1hdGguZmxvb3IoKHEtbykvMitvKTtmb3IocT1wLHM9TWF0aC5tYXgoMSxlLXArMSksdD1NYXRoLm1pbihlK3AsbCkraCx1PW5ldyBBcnJheSh0KzIpLHVbdCsxXT0oMTw8YyktMSxmPXQ7Zj49cztmLS0paWYodj1qW2EuY2hhckF0KGYtMSldLDA9PT1jP3VbZl09KHVbZisxXTw8MXwxKSZ2OnVbZl09KHVbZisxXTw8MXwxKSZ2fCgocltmKzFdfHJbZl0pPDwxfDEpfHJbZisxXSx1W2ZdJmkmJih3PWsoYyxmLTEpLG0+PXcpKXtpZihtPXcsbj1mLTEseC5wdXNoKG4pLCEobj5lKSlicmVhaztzPU1hdGgubWF4KDEsMiplLW4pfWlmKGsoYysxLGUpPm0pYnJlYWs7cj11fXJldHVybntpc01hdGNoOm4+PTAsc2NvcmU6d319LGM9PT0hMD97c2VhcmNoOmx9OmwoYyl9LGEudmFrYXRhLnNlYXJjaC5kZWZhdWx0cz17bG9jYXRpb246MCxkaXN0YW5jZToxMDAsdGhyZXNob2xkOi42LGZ1enp5OiExLGNhc2VTZW5zaXRpdmU6ITF9fShhKSxhLmpzdHJlZS5kZWZhdWx0cy5zb3J0PWZ1bmN0aW9uKGEsYil7cmV0dXJuIHRoaXMuZ2V0X3RleHQoYSk+dGhpcy5nZXRfdGV4dChiKT8xOi0xfSxhLmpzdHJlZS5wbHVnaW5zLnNvcnQ9ZnVuY3Rpb24oYSxiKXt0aGlzLmJpbmQ9ZnVuY3Rpb24oKXtiLmJpbmQuY2FsbCh0aGlzKSx0aGlzLmVsZW1lbnQub24oXCJtb2RlbC5qc3RyZWVcIixmdW5jdGlvbihhLGIpe3RoaXMuc29ydChiLnBhcmVudCwhMCl9LmJpbmQodGhpcykpLm9uKFwicmVuYW1lX25vZGUuanN0cmVlIGNyZWF0ZV9ub2RlLmpzdHJlZVwiLGZ1bmN0aW9uKGEsYil7dGhpcy5zb3J0KGIucGFyZW50fHxiLm5vZGUucGFyZW50LCExKSx0aGlzLnJlZHJhd19ub2RlKGIucGFyZW50fHxiLm5vZGUucGFyZW50LCEwKX0uYmluZCh0aGlzKSkub24oXCJtb3ZlX25vZGUuanN0cmVlIGNvcHlfbm9kZS5qc3RyZWVcIixmdW5jdGlvbihhLGIpe3RoaXMuc29ydChiLnBhcmVudCwhMSksdGhpcy5yZWRyYXdfbm9kZShiLnBhcmVudCwhMCl9LmJpbmQodGhpcykpfSx0aGlzLnNvcnQ9ZnVuY3Rpb24oYSxiKXt2YXIgYyxkO2lmKGE9dGhpcy5nZXRfbm9kZShhKSxhJiZhLmNoaWxkcmVuJiZhLmNoaWxkcmVuLmxlbmd0aCYmKGEuY2hpbGRyZW4uc29ydCh0aGlzLnNldHRpbmdzLnNvcnQuYmluZCh0aGlzKSksYikpZm9yKGM9MCxkPWEuY2hpbGRyZW5fZC5sZW5ndGg7ZD5jO2MrKyl0aGlzLnNvcnQoYS5jaGlsZHJlbl9kW2NdLCExKX19O3ZhciBvPSExO2EuanN0cmVlLmRlZmF1bHRzLnN0YXRlPXtrZXk6XCJqc3RyZWVcIixldmVudHM6XCJjaGFuZ2VkLmpzdHJlZSBvcGVuX25vZGUuanN0cmVlIGNsb3NlX25vZGUuanN0cmVlIGNoZWNrX25vZGUuanN0cmVlIHVuY2hlY2tfbm9kZS5qc3RyZWVcIix0dGw6ITEsZmlsdGVyOiExLHByZXNlcnZlX2xvYWRlZDohMX0sYS5qc3RyZWUucGx1Z2lucy5zdGF0ZT1mdW5jdGlvbihiLGMpe3RoaXMuYmluZD1mdW5jdGlvbigpe2MuYmluZC5jYWxsKHRoaXMpO3ZhciBhPWZ1bmN0aW9uKCl7dGhpcy5lbGVtZW50Lm9uKHRoaXMuc2V0dGluZ3Muc3RhdGUuZXZlbnRzLGZ1bmN0aW9uKCl7byYmY2xlYXJUaW1lb3V0KG8pLG89c2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMuc2F2ZV9zdGF0ZSgpfS5iaW5kKHRoaXMpLDEwMCl9LmJpbmQodGhpcykpLHRoaXMudHJpZ2dlcihcInN0YXRlX3JlYWR5XCIpfS5iaW5kKHRoaXMpO3RoaXMuZWxlbWVudC5vbihcInJlYWR5LmpzdHJlZVwiLGZ1bmN0aW9uKGIsYyl7dGhpcy5lbGVtZW50Lm9uZShcInJlc3RvcmVfc3RhdGUuanN0cmVlXCIsYSksdGhpcy5yZXN0b3JlX3N0YXRlKCl8fGEoKX0uYmluZCh0aGlzKSl9LHRoaXMuc2F2ZV9zdGF0ZT1mdW5jdGlvbigpe3ZhciBiPXRoaXMuZ2V0X3N0YXRlKCk7dGhpcy5zZXR0aW5ncy5zdGF0ZS5wcmVzZXJ2ZV9sb2FkZWR8fGRlbGV0ZSBiLmNvcmUubG9hZGVkO3ZhciBjPXtzdGF0ZTpiLHR0bDp0aGlzLnNldHRpbmdzLnN0YXRlLnR0bCxzZWM6K25ldyBEYXRlfTthLnZha2F0YS5zdG9yYWdlLnNldCh0aGlzLnNldHRpbmdzLnN0YXRlLmtleSxKU09OLnN0cmluZ2lmeShjKSl9LHRoaXMucmVzdG9yZV9zdGF0ZT1mdW5jdGlvbigpe3ZhciBiPWEudmFrYXRhLnN0b3JhZ2UuZ2V0KHRoaXMuc2V0dGluZ3Muc3RhdGUua2V5KTtpZihiKXRyeXtiPUpTT04ucGFyc2UoYil9Y2F0Y2goYyl7cmV0dXJuITF9cmV0dXJuIGImJmIudHRsJiZiLnNlYyYmK25ldyBEYXRlLWIuc2VjPmIudHRsPyExOihiJiZiLnN0YXRlJiYoYj1iLnN0YXRlKSxiJiZhLnZha2F0YS5pc19mdW5jdGlvbih0aGlzLnNldHRpbmdzLnN0YXRlLmZpbHRlcikmJihiPXRoaXMuc2V0dGluZ3Muc3RhdGUuZmlsdGVyLmNhbGwodGhpcyxiKSksYj8odGhpcy5zZXR0aW5ncy5zdGF0ZS5wcmVzZXJ2ZV9sb2FkZWR8fGRlbGV0ZSBiLmNvcmUubG9hZGVkLHRoaXMuZWxlbWVudC5vbmUoXCJzZXRfc3RhdGUuanN0cmVlXCIsZnVuY3Rpb24oYyxkKXtkLmluc3RhbmNlLnRyaWdnZXIoXCJyZXN0b3JlX3N0YXRlXCIse3N0YXRlOmEuZXh0ZW5kKCEwLHt9LGIpfSl9KSx0aGlzLnNldF9zdGF0ZShiKSwhMCk6ITEpfSx0aGlzLmNsZWFyX3N0YXRlPWZ1bmN0aW9uKCl7cmV0dXJuIGEudmFrYXRhLnN0b3JhZ2UuZGVsKHRoaXMuc2V0dGluZ3Muc3RhdGUua2V5KX19LGZ1bmN0aW9uKGEsYil7YS52YWthdGEuc3RvcmFnZT17c2V0OmZ1bmN0aW9uKGEsYil7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShhLGIpfSxnZXQ6ZnVuY3Rpb24oYSl7cmV0dXJuIHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShhKX0sZGVsOmZ1bmN0aW9uKGEpe3JldHVybiB3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oYSl9fX0oYSksYS5qc3RyZWUuZGVmYXVsdHMudHlwZXM9e1xyXG5cImRlZmF1bHRcIjp7fX0sYS5qc3RyZWUuZGVmYXVsdHMudHlwZXNbYS5qc3RyZWUucm9vdF09e30sYS5qc3RyZWUucGx1Z2lucy50eXBlcz1mdW5jdGlvbihjLGQpe3RoaXMuaW5pdD1mdW5jdGlvbihjLGUpe3ZhciBmLGc7aWYoZSYmZS50eXBlcyYmZS50eXBlc1tcImRlZmF1bHRcIl0pZm9yKGYgaW4gZS50eXBlcylpZihcImRlZmF1bHRcIiE9PWYmJmYhPT1hLmpzdHJlZS5yb290JiZlLnR5cGVzLmhhc093blByb3BlcnR5KGYpKWZvcihnIGluIGUudHlwZXNbXCJkZWZhdWx0XCJdKWUudHlwZXNbXCJkZWZhdWx0XCJdLmhhc093blByb3BlcnR5KGcpJiZlLnR5cGVzW2ZdW2ddPT09YiYmKGUudHlwZXNbZl1bZ109ZS50eXBlc1tcImRlZmF1bHRcIl1bZ10pO2QuaW5pdC5jYWxsKHRoaXMsYyxlKSx0aGlzLl9tb2RlbC5kYXRhW2EuanN0cmVlLnJvb3RdLnR5cGU9YS5qc3RyZWUucm9vdH0sdGhpcy5yZWZyZXNoPWZ1bmN0aW9uKGIsYyl7ZC5yZWZyZXNoLmNhbGwodGhpcyxiLGMpLHRoaXMuX21vZGVsLmRhdGFbYS5qc3RyZWUucm9vdF0udHlwZT1hLmpzdHJlZS5yb290fSx0aGlzLmJpbmQ9ZnVuY3Rpb24oKXt0aGlzLmVsZW1lbnQub24oXCJtb2RlbC5qc3RyZWVcIixmdW5jdGlvbihjLGQpe3ZhciBlPXRoaXMuX21vZGVsLmRhdGEsZj1kLm5vZGVzLGc9dGhpcy5zZXR0aW5ncy50eXBlcyxoLGksaj1cImRlZmF1bHRcIixrO2ZvcihoPTAsaT1mLmxlbmd0aDtpPmg7aCsrKXtpZihqPVwiZGVmYXVsdFwiLGVbZltoXV0ub3JpZ2luYWwmJmVbZltoXV0ub3JpZ2luYWwudHlwZSYmZ1tlW2ZbaF1dLm9yaWdpbmFsLnR5cGVdJiYoaj1lW2ZbaF1dLm9yaWdpbmFsLnR5cGUpLGVbZltoXV0uZGF0YSYmZVtmW2hdXS5kYXRhLmpzdHJlZSYmZVtmW2hdXS5kYXRhLmpzdHJlZS50eXBlJiZnW2VbZltoXV0uZGF0YS5qc3RyZWUudHlwZV0mJihqPWVbZltoXV0uZGF0YS5qc3RyZWUudHlwZSksZVtmW2hdXS50eXBlPWosZVtmW2hdXS5pY29uPT09ITAmJmdbal0uaWNvbiE9PWImJihlW2ZbaF1dLmljb249Z1tqXS5pY29uKSxnW2pdLmxpX2F0dHIhPT1iJiZcIm9iamVjdFwiPT10eXBlb2YgZ1tqXS5saV9hdHRyKWZvcihrIGluIGdbal0ubGlfYXR0cilpZihnW2pdLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoaykpe2lmKFwiaWRcIj09PWspY29udGludWU7ZVtmW2hdXS5saV9hdHRyW2tdPT09Yj9lW2ZbaF1dLmxpX2F0dHJba109Z1tqXS5saV9hdHRyW2tdOlwiY2xhc3NcIj09PWsmJihlW2ZbaF1dLmxpX2F0dHJbXCJjbGFzc1wiXT1nW2pdLmxpX2F0dHJbXCJjbGFzc1wiXStcIiBcIitlW2ZbaF1dLmxpX2F0dHJbXCJjbGFzc1wiXSl9aWYoZ1tqXS5hX2F0dHIhPT1iJiZcIm9iamVjdFwiPT10eXBlb2YgZ1tqXS5hX2F0dHIpZm9yKGsgaW4gZ1tqXS5hX2F0dHIpaWYoZ1tqXS5hX2F0dHIuaGFzT3duUHJvcGVydHkoaykpe2lmKFwiaWRcIj09PWspY29udGludWU7ZVtmW2hdXS5hX2F0dHJba109PT1iP2VbZltoXV0uYV9hdHRyW2tdPWdbal0uYV9hdHRyW2tdOlwiaHJlZlwiPT09ayYmXCIjXCI9PT1lW2ZbaF1dLmFfYXR0cltrXT9lW2ZbaF1dLmFfYXR0ci5ocmVmPWdbal0uYV9hdHRyLmhyZWY6XCJjbGFzc1wiPT09ayYmKGVbZltoXV0uYV9hdHRyW1wiY2xhc3NcIl09Z1tqXS5hX2F0dHJbXCJjbGFzc1wiXStcIiBcIitlW2ZbaF1dLmFfYXR0cltcImNsYXNzXCJdKX19ZVthLmpzdHJlZS5yb290XS50eXBlPWEuanN0cmVlLnJvb3R9LmJpbmQodGhpcykpLGQuYmluZC5jYWxsKHRoaXMpfSx0aGlzLmdldF9qc29uPWZ1bmN0aW9uKGIsYyxlKXt2YXIgZixnLGg9dGhpcy5fbW9kZWwuZGF0YSxpPWM/YS5leHRlbmQoITAse30sYyx7bm9faWQ6ITF9KTp7fSxqPWQuZ2V0X2pzb24uY2FsbCh0aGlzLGIsaSxlKTtpZihqPT09ITEpcmV0dXJuITE7aWYoYS52YWthdGEuaXNfYXJyYXkoaikpZm9yKGY9MCxnPWoubGVuZ3RoO2c+ZjtmKyspaltmXS50eXBlPWpbZl0uaWQmJmhbaltmXS5pZF0mJmhbaltmXS5pZF0udHlwZT9oW2pbZl0uaWRdLnR5cGU6XCJkZWZhdWx0XCIsYyYmYy5ub19pZCYmKGRlbGV0ZSBqW2ZdLmlkLGpbZl0ubGlfYXR0ciYmaltmXS5saV9hdHRyLmlkJiZkZWxldGUgaltmXS5saV9hdHRyLmlkLGpbZl0uYV9hdHRyJiZqW2ZdLmFfYXR0ci5pZCYmZGVsZXRlIGpbZl0uYV9hdHRyLmlkKTtlbHNlIGoudHlwZT1qLmlkJiZoW2ouaWRdJiZoW2ouaWRdLnR5cGU/aFtqLmlkXS50eXBlOlwiZGVmYXVsdFwiLGMmJmMubm9faWQmJihqPXRoaXMuX2RlbGV0ZV9pZHMoaikpO3JldHVybiBqfSx0aGlzLl9kZWxldGVfaWRzPWZ1bmN0aW9uKGIpe2lmKGEudmFrYXRhLmlzX2FycmF5KGIpKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspYltjXT10aGlzLl9kZWxldGVfaWRzKGJbY10pO3JldHVybiBifXJldHVybiBkZWxldGUgYi5pZCxiLmxpX2F0dHImJmIubGlfYXR0ci5pZCYmZGVsZXRlIGIubGlfYXR0ci5pZCxiLmFfYXR0ciYmYi5hX2F0dHIuaWQmJmRlbGV0ZSBiLmFfYXR0ci5pZCxiLmNoaWxkcmVuJiZhLnZha2F0YS5pc19hcnJheShiLmNoaWxkcmVuKSYmKGIuY2hpbGRyZW49dGhpcy5fZGVsZXRlX2lkcyhiLmNoaWxkcmVuKSksYn0sdGhpcy5jaGVjaz1mdW5jdGlvbihjLGUsZixnLGgpe2lmKGQuY2hlY2suY2FsbCh0aGlzLGMsZSxmLGcsaCk9PT0hMSlyZXR1cm4hMTtlPWUmJmUuaWQ/ZTp0aGlzLmdldF9ub2RlKGUpLGY9ZiYmZi5pZD9mOnRoaXMuZ2V0X25vZGUoZik7dmFyIGk9ZSYmZS5pZD9oJiZoLm9yaWdpbj9oLm9yaWdpbjphLmpzdHJlZS5yZWZlcmVuY2UoZS5pZCk6bnVsbCxqLGssbCxtO3N3aXRjaChpPWkmJmkuX21vZGVsJiZpLl9tb2RlbC5kYXRhP2kuX21vZGVsLmRhdGE6bnVsbCxjKXtjYXNlXCJjcmVhdGVfbm9kZVwiOmNhc2VcIm1vdmVfbm9kZVwiOmNhc2VcImNvcHlfbm9kZVwiOmlmKFwibW92ZV9ub2RlXCIhPT1jfHwtMT09PWEuaW5BcnJheShlLmlkLGYuY2hpbGRyZW4pKXtpZihqPXRoaXMuZ2V0X3J1bGVzKGYpLGoubWF4X2NoaWxkcmVuIT09YiYmLTEhPT1qLm1heF9jaGlsZHJlbiYmai5tYXhfY2hpbGRyZW49PT1mLmNoaWxkcmVuLmxlbmd0aClyZXR1cm4gdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ0eXBlc1wiLGlkOlwidHlwZXNfMDFcIixyZWFzb246XCJtYXhfY2hpbGRyZW4gcHJldmVudHMgZnVuY3Rpb246IFwiK2MsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmMscG9zOmcsb2JqOmUmJmUuaWQ/ZS5pZDohMSxwYXI6ZiYmZi5pZD9mLmlkOiExfSl9LCExO2lmKGoudmFsaWRfY2hpbGRyZW4hPT1iJiYtMSE9PWoudmFsaWRfY2hpbGRyZW4mJi0xPT09YS5pbkFycmF5KGUudHlwZXx8XCJkZWZhdWx0XCIsai52YWxpZF9jaGlsZHJlbikpcmV0dXJuIHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidHlwZXNcIixpZDpcInR5cGVzXzAyXCIscmVhc29uOlwidmFsaWRfY2hpbGRyZW4gcHJldmVudHMgZnVuY3Rpb246IFwiK2MsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmMscG9zOmcsb2JqOmUmJmUuaWQ/ZS5pZDohMSxwYXI6ZiYmZi5pZD9mLmlkOiExfSl9LCExO2lmKGkmJmUuY2hpbGRyZW5fZCYmZS5wYXJlbnRzKXtmb3Ioaz0wLGw9MCxtPWUuY2hpbGRyZW5fZC5sZW5ndGg7bT5sO2wrKylrPU1hdGgubWF4KGssaVtlLmNoaWxkcmVuX2RbbF1dLnBhcmVudHMubGVuZ3RoKTtrPWstZS5wYXJlbnRzLmxlbmd0aCsxfSgwPj1rfHxrPT09YikmJihrPTEpO2Rve2lmKGoubWF4X2RlcHRoIT09YiYmLTEhPT1qLm1heF9kZXB0aCYmai5tYXhfZGVwdGg8aylyZXR1cm4gdGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ0eXBlc1wiLGlkOlwidHlwZXNfMDNcIixyZWFzb246XCJtYXhfZGVwdGggcHJldmVudHMgZnVuY3Rpb246IFwiK2MsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmMscG9zOmcsb2JqOmUmJmUuaWQ/ZS5pZDohMSxwYXI6ZiYmZi5pZD9mLmlkOiExfSl9LCExO2Y9dGhpcy5nZXRfbm9kZShmLnBhcmVudCksaj10aGlzLmdldF9ydWxlcyhmKSxrKyt9d2hpbGUoZil9fXJldHVybiEwfSx0aGlzLmdldF9ydWxlcz1mdW5jdGlvbihhKXtpZihhPXRoaXMuZ2V0X25vZGUoYSksIWEpcmV0dXJuITE7dmFyIGM9dGhpcy5nZXRfdHlwZShhLCEwKTtyZXR1cm4gYy5tYXhfZGVwdGg9PT1iJiYoYy5tYXhfZGVwdGg9LTEpLGMubWF4X2NoaWxkcmVuPT09YiYmKGMubWF4X2NoaWxkcmVuPS0xKSxjLnZhbGlkX2NoaWxkcmVuPT09YiYmKGMudmFsaWRfY2hpbGRyZW49LTEpLGN9LHRoaXMuZ2V0X3R5cGU9ZnVuY3Rpb24oYixjKXtyZXR1cm4gYj10aGlzLmdldF9ub2RlKGIpLGI/Yz9hLmV4dGVuZCh7dHlwZTpiLnR5cGV9LHRoaXMuc2V0dGluZ3MudHlwZXNbYi50eXBlXSk6Yi50eXBlOiExfSx0aGlzLnNldF90eXBlPWZ1bmN0aW9uKGMsZCl7dmFyIGU9dGhpcy5fbW9kZWwuZGF0YSxmLGcsaCxpLGosayxsLG07aWYoYS52YWthdGEuaXNfYXJyYXkoYykpe2ZvcihjPWMuc2xpY2UoKSxnPTAsaD1jLmxlbmd0aDtoPmc7ZysrKXRoaXMuc2V0X3R5cGUoY1tnXSxkKTtyZXR1cm4hMH1pZihmPXRoaXMuc2V0dGluZ3MudHlwZXMsYz10aGlzLmdldF9ub2RlKGMpLCFmW2RdfHwhYylyZXR1cm4hMTtpZihsPXRoaXMuZ2V0X25vZGUoYywhMCksbCYmbC5sZW5ndGgmJihtPWwuY2hpbGRyZW4oXCIuanN0cmVlLWFuY2hvclwiKSksaT1jLnR5cGUsaj10aGlzLmdldF9pY29uKGMpLGMudHlwZT1kLChqPT09ITB8fCFmW2ldfHxmW2ldLmljb24hPT1iJiZqPT09ZltpXS5pY29uKSYmdGhpcy5zZXRfaWNvbihjLGZbZF0uaWNvbiE9PWI/ZltkXS5pY29uOiEwKSxmW2ldJiZmW2ldLmxpX2F0dHIhPT1iJiZcIm9iamVjdFwiPT10eXBlb2YgZltpXS5saV9hdHRyKWZvcihrIGluIGZbaV0ubGlfYXR0cilpZihmW2ldLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoaykpe2lmKFwiaWRcIj09PWspY29udGludWU7XCJjbGFzc1wiPT09az8oZVtjLmlkXS5saV9hdHRyW1wiY2xhc3NcIl09KGVbYy5pZF0ubGlfYXR0cltcImNsYXNzXCJdfHxcIlwiKS5yZXBsYWNlKGZbaV0ubGlfYXR0cltrXSxcIlwiKSxsJiZsLnJlbW92ZUNsYXNzKGZbaV0ubGlfYXR0cltrXSkpOmVbYy5pZF0ubGlfYXR0cltrXT09PWZbaV0ubGlfYXR0cltrXSYmKGVbYy5pZF0ubGlfYXR0cltrXT1udWxsLGwmJmwucmVtb3ZlQXR0cihrKSl9aWYoZltpXSYmZltpXS5hX2F0dHIhPT1iJiZcIm9iamVjdFwiPT10eXBlb2YgZltpXS5hX2F0dHIpZm9yKGsgaW4gZltpXS5hX2F0dHIpaWYoZltpXS5hX2F0dHIuaGFzT3duUHJvcGVydHkoaykpe2lmKFwiaWRcIj09PWspY29udGludWU7XCJjbGFzc1wiPT09az8oZVtjLmlkXS5hX2F0dHJbXCJjbGFzc1wiXT0oZVtjLmlkXS5hX2F0dHJbXCJjbGFzc1wiXXx8XCJcIikucmVwbGFjZShmW2ldLmFfYXR0cltrXSxcIlwiKSxtJiZtLnJlbW92ZUNsYXNzKGZbaV0uYV9hdHRyW2tdKSk6ZVtjLmlkXS5hX2F0dHJba109PT1mW2ldLmFfYXR0cltrXSYmKFwiaHJlZlwiPT09az8oZVtjLmlkXS5hX2F0dHJba109XCIjXCIsbSYmbS5hdHRyKFwiaHJlZlwiLFwiI1wiKSk6KGRlbGV0ZSBlW2MuaWRdLmFfYXR0cltrXSxtJiZtLnJlbW92ZUF0dHIoaykpKX1pZihmW2RdLmxpX2F0dHIhPT1iJiZcIm9iamVjdFwiPT10eXBlb2YgZltkXS5saV9hdHRyKWZvcihrIGluIGZbZF0ubGlfYXR0cilpZihmW2RdLmxpX2F0dHIuaGFzT3duUHJvcGVydHkoaykpe2lmKFwiaWRcIj09PWspY29udGludWU7ZVtjLmlkXS5saV9hdHRyW2tdPT09Yj8oZVtjLmlkXS5saV9hdHRyW2tdPWZbZF0ubGlfYXR0cltrXSxsJiYoXCJjbGFzc1wiPT09az9sLmFkZENsYXNzKGZbZF0ubGlfYXR0cltrXSk6bC5hdHRyKGssZltkXS5saV9hdHRyW2tdKSkpOlwiY2xhc3NcIj09PWsmJihlW2MuaWRdLmxpX2F0dHJbXCJjbGFzc1wiXT1mW2RdLmxpX2F0dHJba10rXCIgXCIrZVtjLmlkXS5saV9hdHRyW1wiY2xhc3NcIl0sbCYmbC5hZGRDbGFzcyhmW2RdLmxpX2F0dHJba10pKX1pZihmW2RdLmFfYXR0ciE9PWImJlwib2JqZWN0XCI9PXR5cGVvZiBmW2RdLmFfYXR0cilmb3IoayBpbiBmW2RdLmFfYXR0cilpZihmW2RdLmFfYXR0ci5oYXNPd25Qcm9wZXJ0eShrKSl7aWYoXCJpZFwiPT09ayljb250aW51ZTtlW2MuaWRdLmFfYXR0cltrXT09PWI/KGVbYy5pZF0uYV9hdHRyW2tdPWZbZF0uYV9hdHRyW2tdLG0mJihcImNsYXNzXCI9PT1rP20uYWRkQ2xhc3MoZltkXS5hX2F0dHJba10pOm0uYXR0cihrLGZbZF0uYV9hdHRyW2tdKSkpOlwiaHJlZlwiPT09ayYmXCIjXCI9PT1lW2MuaWRdLmFfYXR0cltrXT8oZVtjLmlkXS5hX2F0dHIuaHJlZj1mW2RdLmFfYXR0ci5ocmVmLG0mJm0uYXR0cihcImhyZWZcIixmW2RdLmFfYXR0ci5ocmVmKSk6XCJjbGFzc1wiPT09ayYmKGVbYy5pZF0uYV9hdHRyW1wiY2xhc3NcIl09ZltkXS5hX2F0dHJbXCJjbGFzc1wiXStcIiBcIitlW2MuaWRdLmFfYXR0cltcImNsYXNzXCJdLG0mJm0uYWRkQ2xhc3MoZltkXS5hX2F0dHJba10pKX1yZXR1cm4hMH19LGEuanN0cmVlLmRlZmF1bHRzLnVuaXF1ZT17Y2FzZV9zZW5zaXRpdmU6ITEsdHJpbV93aGl0ZXNwYWNlOiExLGR1cGxpY2F0ZTpmdW5jdGlvbihhLGIpe3JldHVybiBhK1wiIChcIitiK1wiKVwifX0sYS5qc3RyZWUucGx1Z2lucy51bmlxdWU9ZnVuY3Rpb24oYyxkKXt0aGlzLmNoZWNrPWZ1bmN0aW9uKGIsYyxlLGYsZyl7aWYoZC5jaGVjay5jYWxsKHRoaXMsYixjLGUsZixnKT09PSExKXJldHVybiExO2lmKGM9YyYmYy5pZD9jOnRoaXMuZ2V0X25vZGUoYyksZT1lJiZlLmlkP2U6dGhpcy5nZXRfbm9kZShlKSwhZXx8IWUuY2hpbGRyZW4pcmV0dXJuITA7dmFyIGg9XCJyZW5hbWVfbm9kZVwiPT09Yj9mOmMudGV4dCxpPVtdLGo9dGhpcy5zZXR0aW5ncy51bmlxdWUuY2FzZV9zZW5zaXRpdmUsaz10aGlzLnNldHRpbmdzLnVuaXF1ZS50cmltX3doaXRlc3BhY2UsbD10aGlzLl9tb2RlbC5kYXRhLG0sbixvO2ZvcihtPTAsbj1lLmNoaWxkcmVuLmxlbmd0aDtuPm07bSsrKW89bFtlLmNoaWxkcmVuW21dXS50ZXh0LGp8fChvPW8udG9Mb3dlckNhc2UoKSksayYmKG89by5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKSksaS5wdXNoKG8pO3N3aXRjaChqfHwoaD1oLnRvTG93ZXJDYXNlKCkpLGsmJihoPWgucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpLGIpe2Nhc2VcImRlbGV0ZV9ub2RlXCI6cmV0dXJuITA7Y2FzZVwicmVuYW1lX25vZGVcIjpyZXR1cm4gbz1jLnRleHR8fFwiXCIsanx8KG89by50b0xvd2VyQ2FzZSgpKSxrJiYobz1vLnJlcGxhY2UoL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nLFwiXCIpKSxtPS0xPT09YS5pbkFycmF5KGgsaSl8fGMudGV4dCYmbz09PWgsbXx8KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidW5pcXVlXCIsaWQ6XCJ1bmlxdWVfMDFcIixyZWFzb246XCJDaGlsZCB3aXRoIG5hbWUgXCIraCtcIiBhbHJlYWR5IGV4aXN0cy4gUHJldmVudGluZzogXCIrYixkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6Yixwb3M6ZixvYmo6YyYmYy5pZD9jLmlkOiExLHBhcjplJiZlLmlkP2UuaWQ6ITF9KX0pLG07Y2FzZVwiY3JlYXRlX25vZGVcIjpyZXR1cm4gbT0tMT09PWEuaW5BcnJheShoLGkpLG18fCh0aGlzLl9kYXRhLmNvcmUubGFzdF9lcnJvcj17ZXJyb3I6XCJjaGVja1wiLHBsdWdpbjpcInVuaXF1ZVwiLGlkOlwidW5pcXVlXzA0XCIscmVhc29uOlwiQ2hpbGQgd2l0aCBuYW1lIFwiK2grXCIgYWxyZWFkeSBleGlzdHMuIFByZXZlbnRpbmc6IFwiK2IsZGF0YTpKU09OLnN0cmluZ2lmeSh7Y2hrOmIscG9zOmYsb2JqOmMmJmMuaWQ/Yy5pZDohMSxwYXI6ZSYmZS5pZD9lLmlkOiExfSl9KSxtO2Nhc2VcImNvcHlfbm9kZVwiOnJldHVybiBtPS0xPT09YS5pbkFycmF5KGgsaSksbXx8KHRoaXMuX2RhdGEuY29yZS5sYXN0X2Vycm9yPXtlcnJvcjpcImNoZWNrXCIscGx1Z2luOlwidW5pcXVlXCIsaWQ6XCJ1bmlxdWVfMDJcIixyZWFzb246XCJDaGlsZCB3aXRoIG5hbWUgXCIraCtcIiBhbHJlYWR5IGV4aXN0cy4gUHJldmVudGluZzogXCIrYixkYXRhOkpTT04uc3RyaW5naWZ5KHtjaGs6Yixwb3M6ZixvYmo6YyYmYy5pZD9jLmlkOiExLHBhcjplJiZlLmlkP2UuaWQ6ITF9KX0pLG07Y2FzZVwibW92ZV9ub2RlXCI6cmV0dXJuIG09Yy5wYXJlbnQ9PT1lLmlkJiYoIWd8fCFnLmlzX211bHRpKXx8LTE9PT1hLmluQXJyYXkoaCxpKSxtfHwodGhpcy5fZGF0YS5jb3JlLmxhc3RfZXJyb3I9e2Vycm9yOlwiY2hlY2tcIixwbHVnaW46XCJ1bmlxdWVcIixpZDpcInVuaXF1ZV8wM1wiLHJlYXNvbjpcIkNoaWxkIHdpdGggbmFtZSBcIitoK1wiIGFscmVhZHkgZXhpc3RzLiBQcmV2ZW50aW5nOiBcIitiLGRhdGE6SlNPTi5zdHJpbmdpZnkoe2NoazpiLHBvczpmLG9iajpjJiZjLmlkP2MuaWQ6ITEscGFyOmUmJmUuaWQ/ZS5pZDohMX0pfSksbX1yZXR1cm4hMH0sdGhpcy5jcmVhdGVfbm9kZT1mdW5jdGlvbihjLGUsZixnLGgpe2lmKCFlfHxlLnRleHQ9PT1iKXtpZihudWxsPT09YyYmKGM9YS5qc3RyZWUucm9vdCksYz10aGlzLmdldF9ub2RlKGMpLCFjKXJldHVybiBkLmNyZWF0ZV9ub2RlLmNhbGwodGhpcyxjLGUsZixnLGgpO2lmKGY9Zj09PWI/XCJsYXN0XCI6ZiwhZi50b1N0cmluZygpLm1hdGNoKC9eKGJlZm9yZXxhZnRlcikkLykmJiFoJiYhdGhpcy5pc19sb2FkZWQoYykpcmV0dXJuIGQuY3JlYXRlX25vZGUuY2FsbCh0aGlzLGMsZSxmLGcsaCk7ZXx8KGU9e30pO3ZhciBpLGosayxsLG0sbj10aGlzLl9tb2RlbC5kYXRhLG89dGhpcy5zZXR0aW5ncy51bmlxdWUuY2FzZV9zZW5zaXRpdmUscD10aGlzLnNldHRpbmdzLnVuaXF1ZS50cmltX3doaXRlc3BhY2UscT10aGlzLnNldHRpbmdzLnVuaXF1ZS5kdXBsaWNhdGUscjtmb3Ioaj1pPXRoaXMuZ2V0X3N0cmluZyhcIk5ldyBub2RlXCIpLGs9W10sbD0wLG09Yy5jaGlsZHJlbi5sZW5ndGg7bT5sO2wrKylyPW5bYy5jaGlsZHJlbltsXV0udGV4dCxvfHwocj1yLnRvTG93ZXJDYXNlKCkpLHAmJihyPXIucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpLGsucHVzaChyKTtsPTEscj1qLG98fChyPXIudG9Mb3dlckNhc2UoKSkscCYmKHI9ci5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZyxcIlwiKSk7d2hpbGUoLTEhPT1hLmluQXJyYXkocixrKSlqPXEuY2FsbCh0aGlzLGksKytsKS50b1N0cmluZygpLHI9aixvfHwocj1yLnRvTG93ZXJDYXNlKCkpLHAmJihyPXIucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csXCJcIikpO2UudGV4dD1qfXJldHVybiBkLmNyZWF0ZV9ub2RlLmNhbGwodGhpcyxjLGUsZixnLGgpfX07dmFyIHA9aS5jcmVhdGVFbGVtZW50KFwiRElWXCIpO2lmKHAuc2V0QXR0cmlidXRlKFwidW5zZWxlY3RhYmxlXCIsXCJvblwiKSxwLnNldEF0dHJpYnV0ZShcInJvbGVcIixcInByZXNlbnRhdGlvblwiKSxwLmNsYXNzTmFtZT1cImpzdHJlZS13aG9sZXJvd1wiLHAuaW5uZXJIVE1MPVwiJiMxNjA7XCIsYS5qc3RyZWUucGx1Z2lucy53aG9sZXJvdz1mdW5jdGlvbihiLGMpe3RoaXMuYmluZD1mdW5jdGlvbigpe2MuYmluZC5jYWxsKHRoaXMpLHRoaXMuZWxlbWVudC5vbihcInJlYWR5LmpzdHJlZSBzZXRfc3RhdGUuanN0cmVlXCIsZnVuY3Rpb24oKXt0aGlzLmhpZGVfZG90cygpfS5iaW5kKHRoaXMpKS5vbihcImluaXQuanN0cmVlIGxvYWRpbmcuanN0cmVlIHJlYWR5LmpzdHJlZVwiLGZ1bmN0aW9uKCl7dGhpcy5nZXRfY29udGFpbmVyX3VsKCkuYWRkQ2xhc3MoXCJqc3RyZWUtd2hvbGVyb3ctdWxcIil9LmJpbmQodGhpcykpLm9uKFwiZGVzZWxlY3RfYWxsLmpzdHJlZVwiLGZ1bmN0aW9uKGEsYil7dGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLXdob2xlcm93LWNsaWNrZWRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKX0uYmluZCh0aGlzKSkub24oXCJjaGFuZ2VkLmpzdHJlZVwiLGZ1bmN0aW9uKGEsYil7dGhpcy5lbGVtZW50LmZpbmQoXCIuanN0cmVlLXdob2xlcm93LWNsaWNrZWRcIikucmVtb3ZlQ2xhc3MoXCJqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKTt2YXIgYz0hMSxkLGU7Zm9yKGQ9MCxlPWIuc2VsZWN0ZWQubGVuZ3RoO2U+ZDtkKyspYz10aGlzLmdldF9ub2RlKGIuc2VsZWN0ZWRbZF0sITApLGMmJmMubGVuZ3RoJiZjLmNoaWxkcmVuKFwiLmpzdHJlZS13aG9sZXJvd1wiKS5hZGRDbGFzcyhcImpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpfS5iaW5kKHRoaXMpKS5vbihcIm9wZW5fbm9kZS5qc3RyZWVcIixmdW5jdGlvbihhLGIpe3RoaXMuZ2V0X25vZGUoYi5ub2RlLCEwKS5maW5kKFwiLmpzdHJlZS1jbGlja2VkXCIpLnBhcmVudCgpLmNoaWxkcmVuKFwiLmpzdHJlZS13aG9sZXJvd1wiKS5hZGRDbGFzcyhcImpzdHJlZS13aG9sZXJvdy1jbGlja2VkXCIpfS5iaW5kKHRoaXMpKS5vbihcImhvdmVyX25vZGUuanN0cmVlIGRlaG92ZXJfbm9kZS5qc3RyZWVcIixmdW5jdGlvbihhLGIpe1wiaG92ZXJfbm9kZVwiPT09YS50eXBlJiZ0aGlzLmlzX2Rpc2FibGVkKGIubm9kZSl8fHRoaXMuZ2V0X25vZGUoYi5ub2RlLCEwKS5jaGlsZHJlbihcIi5qc3RyZWUtd2hvbGVyb3dcIilbXCJob3Zlcl9ub2RlXCI9PT1hLnR5cGU/XCJhZGRDbGFzc1wiOlwicmVtb3ZlQ2xhc3NcIl0oXCJqc3RyZWUtd2hvbGVyb3ctaG92ZXJlZFwiKX0uYmluZCh0aGlzKSkub24oXCJjb250ZXh0bWVudS5qc3RyZWVcIixcIi5qc3RyZWUtd2hvbGVyb3dcIixmdW5jdGlvbihiKXtpZih0aGlzLl9kYXRhLmNvbnRleHRtZW51KXtiLnByZXZlbnREZWZhdWx0KCk7dmFyIGM9YS5FdmVudChcImNvbnRleHRtZW51XCIse21ldGFLZXk6Yi5tZXRhS2V5LGN0cmxLZXk6Yi5jdHJsS2V5LGFsdEtleTpiLmFsdEtleSxzaGlmdEtleTpiLnNoaWZ0S2V5LHBhZ2VYOmIucGFnZVgscGFnZVk6Yi5wYWdlWX0pO2EoYi5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZmlyc3QoKS50cmlnZ2VyKGMpfX0uYmluZCh0aGlzKSkub24oXCJjbGljay5qc3RyZWVcIixcIi5qc3RyZWUtd2hvbGVyb3dcIixmdW5jdGlvbihiKXtiLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3ZhciBjPWEuRXZlbnQoXCJjbGlja1wiLHttZXRhS2V5OmIubWV0YUtleSxjdHJsS2V5OmIuY3RybEtleSxhbHRLZXk6Yi5hbHRLZXksc2hpZnRLZXk6Yi5zaGlmdEtleX0pO2EoYi5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZmlyc3QoKS50cmlnZ2VyKGMpLnRyaWdnZXIoXCJmb2N1c1wiKX0pLm9uKFwiZGJsY2xpY2suanN0cmVlXCIsXCIuanN0cmVlLXdob2xlcm93XCIsZnVuY3Rpb24oYil7Yi5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTt2YXIgYz1hLkV2ZW50KFwiZGJsY2xpY2tcIix7bWV0YUtleTpiLm1ldGFLZXksY3RybEtleTpiLmN0cmxLZXksYWx0S2V5OmIuYWx0S2V5LHNoaWZ0S2V5OmIuc2hpZnRLZXl9KTthKGIuY3VycmVudFRhcmdldCkuY2xvc2VzdChcIi5qc3RyZWUtbm9kZVwiKS5jaGlsZHJlbihcIi5qc3RyZWUtYW5jaG9yXCIpLmZpcnN0KCkudHJpZ2dlcihjKS50cmlnZ2VyKFwiZm9jdXNcIil9KS5vbihcImNsaWNrLmpzdHJlZVwiLFwiLmpzdHJlZS1sZWFmID4gLmpzdHJlZS1vY2xcIixmdW5jdGlvbihiKXtiLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO3ZhciBjPWEuRXZlbnQoXCJjbGlja1wiLHttZXRhS2V5OmIubWV0YUtleSxjdHJsS2V5OmIuY3RybEtleSxhbHRLZXk6Yi5hbHRLZXksc2hpZnRLZXk6Yi5zaGlmdEtleX0pO2EoYi5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KFwiLmpzdHJlZS1ub2RlXCIpLmNoaWxkcmVuKFwiLmpzdHJlZS1hbmNob3JcIikuZmlyc3QoKS50cmlnZ2VyKGMpLnRyaWdnZXIoXCJmb2N1c1wiKX0uYmluZCh0aGlzKSkub24oXCJtb3VzZW92ZXIuanN0cmVlXCIsXCIuanN0cmVlLXdob2xlcm93LCAuanN0cmVlLWljb25cIixmdW5jdGlvbihhKXtyZXR1cm4gYS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKSx0aGlzLmlzX2Rpc2FibGVkKGEuY3VycmVudFRhcmdldCl8fHRoaXMuaG92ZXJfbm9kZShhLmN1cnJlbnRUYXJnZXQpLCExfS5iaW5kKHRoaXMpKS5vbihcIm1vdXNlbGVhdmUuanN0cmVlXCIsXCIuanN0cmVlLW5vZGVcIixmdW5jdGlvbihhKXt0aGlzLmRlaG92ZXJfbm9kZShhLmN1cnJlbnRUYXJnZXQpfS5iaW5kKHRoaXMpKX0sdGhpcy50ZWFyZG93bj1mdW5jdGlvbigpe3RoaXMuc2V0dGluZ3Mud2hvbGVyb3cmJnRoaXMuZWxlbWVudC5maW5kKFwiLmpzdHJlZS13aG9sZXJvd1wiKS5yZW1vdmUoKSxjLnRlYXJkb3duLmNhbGwodGhpcyl9LHRoaXMucmVkcmF3X25vZGU9ZnVuY3Rpb24oYixkLGUsZil7aWYoYj1jLnJlZHJhd19ub2RlLmFwcGx5KHRoaXMsYXJndW1lbnRzKSl7dmFyIGc9cC5jbG9uZU5vZGUoITApOy0xIT09YS5pbkFycmF5KGIuaWQsdGhpcy5fZGF0YS5jb3JlLnNlbGVjdGVkKSYmKGcuY2xhc3NOYW1lKz1cIiBqc3RyZWUtd2hvbGVyb3ctY2xpY2tlZFwiKSx0aGlzLl9kYXRhLmNvcmUuZm9jdXNlZCYmdGhpcy5fZGF0YS5jb3JlLmZvY3VzZWQ9PT1iLmlkJiYoZy5jbGFzc05hbWUrPVwiIGpzdHJlZS13aG9sZXJvdy1ob3ZlcmVkXCIpLGIuaW5zZXJ0QmVmb3JlKGcsYi5jaGlsZE5vZGVzWzBdKX1yZXR1cm4gYn19LHdpbmRvdy5jdXN0b21FbGVtZW50cyYmT2JqZWN0JiZPYmplY3QuY3JlYXRlKXt2YXIgcT1PYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSk7cS5jcmVhdGVkQ2FsbGJhY2s9ZnVuY3Rpb24oKXt2YXIgYj17Y29yZTp7fSxwbHVnaW5zOltdfSxjO2ZvcihjIGluIGEuanN0cmVlLnBsdWdpbnMpYS5qc3RyZWUucGx1Z2lucy5oYXNPd25Qcm9wZXJ0eShjKSYmdGhpcy5hdHRyaWJ1dGVzW2NdJiYoYi5wbHVnaW5zLnB1c2goYyksdGhpcy5nZXRBdHRyaWJ1dGUoYykmJkpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUoYykpJiYoYltjXT1KU09OLnBhcnNlKHRoaXMuZ2V0QXR0cmlidXRlKGMpKSkpO2ZvcihjIGluIGEuanN0cmVlLmRlZmF1bHRzLmNvcmUpYS5qc3RyZWUuZGVmYXVsdHMuY29yZS5oYXNPd25Qcm9wZXJ0eShjKSYmdGhpcy5hdHRyaWJ1dGVzW2NdJiYoYi5jb3JlW2NdPUpTT04ucGFyc2UodGhpcy5nZXRBdHRyaWJ1dGUoYykpfHx0aGlzLmdldEF0dHJpYnV0ZShjKSk7YSh0aGlzKS5qc3RyZWUoYil9O3RyeXt3aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKFwidmFrYXRhLWpzdHJlZVwiLGZ1bmN0aW9uKCl7fSx7cHJvdG90eXBlOnF9KX1jYXRjaChyKXt9fX19KTsiXSwic291cmNlUm9vdCI6IiJ9